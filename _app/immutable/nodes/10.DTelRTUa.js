import{t as d,a as f}from"../chunks/Doa8wjnW.js";import"../chunks/1NVSwa0V.js";import{am as A,an as L,ao as r,ap as n,c as g,o as j,aq as i,j as c,as as x}from"../chunks/ej_Vdcdl.js";import{e as v,s as P}from"../chunks/Cz9yb1SE.js";import{i as T}from"../chunks/CILL4GR2.js";import{i as $}from"../chunks/CyOr1GcM.js";import{g as C}from"../chunks/Bu9kb4uT.js";import{g as O}from"../chunks/B7b2kqBE.js";import{a as l}from"../chunks/CgfUSf79.js";import{s as S}from"../chunks/B_dPVe-a.js";import{s as q}from"../chunks/GknLpfGC.js";var B=d('<p class="error-banner svelte-piwgzn"> </p>'),D=d('<div class="logout-page svelte-piwgzn"><h1>Are you sure you want to log out?</h1> <!> <div class="action-buttons svelte-piwgzn"><button class="svelte-piwgzn"><span>Yes</span></button> <button class="alert svelte-piwgzn"><span>Oops</span></button></div></div>');function R(b,h){A(h,!1);let a=j(null);function w(){var t,o;(o=(t=l).clear)==null||o.call(t),l.deleteLocalStorage(),S.clear(),q.clear()}async function y(){c(a,null);const{token:t}=C(l)||{};try{const e=await(await fetch("https://3ee.dev/account/logout/",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json","Access-Control-Allow-Origin":"https://skatebuild.pro",...t&&{Authorization:`Token ${t}`}},mode:"cors"})).json();e!=null&&e.success?(w(),await O("/")):c(a,"Logout failed. Please try again.")}catch(o){console.error("Logout error",o),c(a,"An error occurred. Please try again.")}}function k(){typeof history<"u"&&history.back()}$();var s=D(),p=r(n(s),2);{var _=t=>{var o=B(),e=n(o,!0);i(o),x(()=>P(e,g(a))),f(t,o)};T(p,t=>{g(a)&&t(_)})}var u=r(p,2),m=n(u),z=r(m,2);i(u),i(s),v("click",m,y),v("click",z,k),f(b,s),L()}export{R as component};
