import{f as ye}from"../chunks/19TPhq2Y.js";import{t as A,b as T}from"../chunks/sVH7KyVU.js";import"../chunks/BlV5JtZD.js";import{ak as de,at as Ce,au as Ve,ar as V,g as e,al as ce,an as c,am as t,v as l,A as f,j as ie,ao as i,n as G,av as Se,ap as We,aq as Y,aJ as we}from"../chunks/B7593ALr.js";import{i as pe}from"../chunks/BsyQbx9E.js";import{p as F,s as Ye}from"../chunks/BlorkeUt.js";import{o as _e}from"../chunks/DNQVjnRK.js";import{g as xe}from"../chunks/CZSC437v.js";import{e as E,s as Ne}from"../chunks/BuysMPOX.js";import{i as Q}from"../chunks/Bsp-WgAa.js";import{e as ue,i as Pe}from"../chunks/DlAme5BV.js";import{r as H,s as He,b as Ke}from"../chunks/7y99m61e.js";import{b as ve,a as Qe}from"../chunks/BKZrsII3.js";import{b as Xe}from"../chunks/Cv7ck14Y.js";import{s as ne}from"../chunks/DPGB8WOh.js";import{a as Ze}from"../chunks/Bwh0lwj5.js";import{g as $e}from"../chunks/DufWPfKt.js";const et=!1,tt=async({fetch:z})=>{const C=await ye(z,"skateboard-products/index.json"),L=await ye(z,"rollerskate-products/index.json");return{skateboardProducts:C,rollerskateProducts:L}},Bt=Object.freeze(Object.defineProperty({__proto__:null,load:tt,prerender:et},Symbol.toStringTag,{value:"Module"}));var at=A('<li role="option" tabindex="0" class="svelte-1latwr4"> </li>'),lt=A('<ul role="listbox" class="svelte-1latwr4"></ul>'),st=A('<div class="combobox svelte-1latwr4"><input type="text" autocomplete="off" class="svelte-1latwr4"> <!></div>');function w(z,C){de(C,!1);const L=f();let g=F(C,"options",24,()=>[]),m=F(C,"value",12,""),d=F(C,"placeholder",8,"Start typing…"),j=f(""),x=f(!1);_e(()=>{const r=g().find(h=>h.slug===m());r&&l(j,r.productName)});function W(r){l(j,r.target.value);const h=g().find(N=>N.productName===e(j));m(h?h.slug:"")}function P(r){l(j,r.productName),m(r.slug),l(x,!1)}Ce(()=>(ie(m()),ie(g()),e(j)),()=>{if(m()){const r=g().find(h=>h.slug===m());r&&r.productName!==e(j)&&l(j,r.productName)}}),Ce(()=>(e(j),ie(g())),()=>{l(L,e(j)?g().filter(r=>r.productName.toLowerCase().includes(e(j).toLowerCase())):g())}),Ve(),pe();var B=st(),S=c(B);H(S);var O=t(S,2);{var q=r=>{var h=lt();ue(h,5,()=>e(L),N=>N.slug,(N,J)=>{var D=at(),M=c(D,!0);i(D),V(()=>Ne(M,e(J).productName)),E("mousedown",D,()=>P(e(J))),E("keydown",D,R=>{var I,n;R.key==="Enter"&&P(e(J)),R.key==="ArrowDown"&&((I=R.currentTarget.nextElementSibling)==null||I.focus()),R.key==="ArrowUp"&&((n=R.currentTarget.previousElementSibling)==null||n.focus())}),T(N,D)}),i(h),T(r,h)};Q(O,r=>{e(x)&&r(q)})}i(B),V(()=>He(S,"placeholder",d())),ve(S,()=>e(j),r=>l(j,r)),E("input",S,W),E("focus",S,()=>l(x,!0)),E("blur",S,()=>setTimeout(()=>l(x,!1),150)),T(z,B),ce()}var ot=A('<label class="svelte-1mjfju1"><input type="radio" required class="svelte-1mjfju1"> </label>'),rt=A("<option>Street</option> <option>Vert</option> <option>Freestyle</option> <option>Park</option> <option>Downhill</option> <option>Cruisin</option>",1),it=A("<option>Artistic skating</option> <option>Roller dance</option> <option>Speed skating</option> <option>Roller derby</option> <option>Park skating</option> <option>Roller hockey</option>",1),nt=A('<div class="field svelte-1mjfju1"><label class="svelte-1mjfju1">Deck</label> <!></div> <div class="field svelte-1mjfju1"><label class="svelte-1mjfju1">Griptape</label> <!></div> <div class="field svelte-1mjfju1"><label class="svelte-1mjfju1">Rails</label> <!></div> <div class="field svelte-1mjfju1"><label class="svelte-1mjfju1">Risers</label> <!></div>',1),ut=A('<div class="field svelte-1mjfju1"><label class="svelte-1mjfju1">Boot</label> <!></div> <div class="field svelte-1mjfju1"><label class="svelte-1mjfju1">Toestops</label> <!></div> <div class="field svelte-1mjfju1"><label class="svelte-1mjfju1">Slideblocks</label> <!></div> <div class="field svelte-1mjfju1"><label class="svelte-1mjfju1">Plates</label> <!></div>',1),vt=A('<div class="attribute-row svelte-1mjfju1"><input type="text" placeholder="Name" required class="svelte-1mjfju1"> <input class="attribute-slider svelte-1mjfju1" type="range" min="0" max="1" step="0.01"> <button class="removeBtn svelte-1mjfju1" type="button">✕</button></div>'),dt=A('<form class="container svelte-1mjfju1"><div class="field svelte-1mjfju1"><label class="svelte-1mjfju1">Build Name</label> <input required class="svelte-1mjfju1"></div> <div class="field-group svelte-1mjfju1"></div> <div class="field svelte-1mjfju1"><label class="svelte-1mjfju1">Style</label> <select required class="svelte-1mjfju1"><option disabled>Select style</option><!></select></div> <!> <!> <div class="field svelte-1mjfju1"><label class="svelte-1mjfju1">Trucks</label> <!></div> <div class="field svelte-1mjfju1"><label class="svelte-1mjfju1">Bearings</label> <!></div> <div class="field svelte-1mjfju1"><label class="svelte-1mjfju1">Wheels</label> <!></div> <div class="field svelte-1mjfju1"><label class="svelte-1mjfju1">Bushings</label> <!></div> <div class="field svelte-1mjfju1"><label class="svelte-1mjfju1">Stats (max 5)</label> <!> <button type="button" class="add-attr-btn svelte-1mjfju1"><span class="svelte-1mjfju1">+ Add Stat</span></button></div> <button type="submit" class="svelte-1mjfju1"><span>Save Build</span></button></form>');function ct(z,C){de(C,!1);const L=[];let g=F(C,"skateboardProducts",8),m=F(C,"rollerskateProducts",8),d=F(C,"prefill",8),j=F(C,"submit",8),x=f(d().name||"");d().slug;let W=d().skater_type,P=f(d().skating_type),B=f(d().deck_slug),S=f(d().griptape_slug),O=f(d().rails_slug),q=f(d().risers_slug),r=f(d().boot_slug),h=f(d().toestops_slug),N=f(d().slideblock_slug),J=f(d().plates_slug),D=f(d().trucks_slug),M=f(d().bearings_slug),R=f(d().wheels_slug),I=f(d().bushings_slug),n=f(d().build_type||"");const Te=["skateboard","rollerskate"];let k=f(d().attributes??[]);_e(()=>{const a=e(r)||e(h)||e(N)||e(J);l(n,a?"rollerskate":"skateboard")});async function Ae(a){a.preventDefault();const u={name:e(x),build_type:e(n),skater_type:W,skating_type:e(P),deck_slug:e(n)==="skateboard"?e(B):void 0,griptape_slug:e(n)==="skateboard"?e(S):void 0,rails_slug:e(n)==="skateboard"?e(O):void 0,risers_slug:e(n)==="skateboard"?e(q):void 0,boot_slug:e(n)==="rollerskate"?e(r):void 0,toestops_slug:e(n)==="rollerskate"?e(h):void 0,slideblock_slug:e(n)==="rollerskate"?e(N):void 0,plates_slug:e(n)==="rollerskate"?e(J):void 0,trucks_slug:e(D),bearings_slug:e(M),wheels_slug:e(R),bushings_slug:e(I),...e(k).length?{attributes:e(k)}:{}},o=await j()({detail:u});o!=null&&o.slug&&o.slug}const fe=()=>e(k).length<5;function Be(){fe()&&l(k,[...e(k),{name:"",value:.5}])}pe();var K=dt(),X=c(K),ge=t(c(X),2);H(ge),i(X);var Z=t(X,2);ue(Z,5,()=>Te,Pe,(a,u)=>{var o=ot(),p=c(o);H(p);var v,b=t(p);i(o),V(_=>{v!==(v=e(u))&&(p.value=(p.__value=e(u))??""),Ne(b,` ${_??""}`)},[()=>e(u).charAt(0).toUpperCase()+e(u).slice(1)],G),Qe(L,[],p,()=>(e(u),e(n)),_=>l(n,_)),T(a,o)}),i(Z);var $=t(Z,2),ee=t(c($),2);V(()=>{e(P),Se(()=>{e(n)})});var te=c(ee);te.value=te.__value="";var Oe=t(te);{var qe=a=>{var u=rt(),o=Y(u);o.value=o.__value="street";var p=t(o,2);p.value=p.__value="vert";var v=t(p,2);v.value=v.__value="freestyle";var b=t(v,2);b.value=b.__value="park";var _=t(b,2);_.value=_.__value="downhill";var y=t(_,2);y.value=y.__value="cruisin",T(a,u)},De=a=>{var u=it(),o=Y(u);o.value=o.__value="artistic skating";var p=t(o,2);p.value=p.__value="roller dance";var v=t(p,2);v.value=v.__value="speed skating";var b=t(v,2);b.value=b.__value="roller derby";var _=t(b,2);_.value=_.__value="park skating";var y=t(_,2);y.value=y.__value="roller hockey",T(a,u)};Q(Oe,a=>{e(n)==="skateboard"?a(qe):a(De,!1)})}i(ee),i($);var be=t($,2);{var Re=a=>{var u=nt(),o=Y(u),p=t(c(o),2);w(p,{get options(){return g().decks},get value(){return e(B)},placeholder:"Choose a deck…",onChange:s=>l(B,s),onSelect:s=>l(B,s)}),i(o);var v=t(o,2),b=t(c(v),2);w(b,{get options(){return g().griptape},get value(){return e(S)},placeholder:"Choose griptape…",onChange:s=>l(S,s),onSelect:s=>l(S,s)}),i(v);var _=t(v,2),y=t(c(_),2);w(y,{get options(){return g().rails},get value(){return e(O)},placeholder:"Choose rails…",onChange:s=>l(O,s),onSelect:s=>l(O,s)}),i(_);var U=t(_,2),re=t(c(U),2);w(re,{get options(){return g().risers},get value(){return e(q)},placeholder:"Choose risers…",onChange:s=>l(q,s),onSelect:s=>l(q,s)}),i(U),T(a,u)};Q(be,a=>{e(n)==="skateboard"&&a(Re)})}var me=t(be,2);{var Ee=a=>{var u=ut(),o=Y(u),p=t(c(o),2);w(p,{get options(){return m().boots},get value(){return e(r)},placeholder:"Choose boot…",onChange:s=>l(r,s),onSelect:s=>l(r,s)}),i(o);var v=t(o,2),b=t(c(v),2);w(b,{get options(){return m().toestops},get value(){return e(h)},placeholder:"Choose toestops…",onChange:s=>l(h,s),onSelect:s=>l(h,s)}),i(v);var _=t(v,2),y=t(c(_),2);w(y,{get options(){return m().slideblocks},get value(){return e(N)},placeholder:"Choose slideblocks…",onChange:s=>l(N,s),onSelect:s=>l(N,s)}),i(_);var U=t(_,2),re=t(c(U),2);w(re,{get options(){return m().plates},get value(){return e(J)},placeholder:"Choose plates…",onChange:s=>l(J,s),onSelect:s=>l(J,s)}),i(U),T(a,u)};Q(me,a=>{e(n)==="rollerskate"&&a(Ee)})}var ae=t(me,2),Le=t(c(ae),2);const Je=G(()=>e(n)==="skateboard"?g().trucks:m().trucks);w(Le,{get options(){return e(Je)},get value(){return e(D)},placeholder:"Choose trucks…",onChange:a=>l(D,a),onSelect:a=>l(D,a)}),i(ae);var le=t(ae,2),Ue=t(c(le),2);const ze=G(()=>e(n)==="skateboard"?g().bearings:m().bearings);w(Ue,{get options(){return e(ze)},get value(){return e(M)},placeholder:"Choose bearings…",onChange:a=>l(M,a),onSelect:a=>l(M,a)}),i(le);var se=t(le,2),Fe=t(c(se),2);const Ie=G(()=>e(n)==="skateboard"?g().wheels:m().wheels);w(Fe,{get options(){return e(Ie)},get value(){return e(R)},placeholder:"Choose wheels…",onChange:a=>l(R,a),onSelect:a=>l(R,a)}),i(se);var oe=t(se,2),Me=t(c(oe),2);const Ge=G(()=>e(n)==="skateboard"?g().bushings:m().bushings);w(Me,{get options(){return e(Ge)},get value(){return e(I)},placeholder:"Choose bushings…",onChange:a=>l(I,a),onSelect:a=>l(I,a)}),i(oe);var je=t(oe,2),ke=t(c(je),2);ue(ke,1,()=>e(k),Pe,(a,u,o)=>{var p=vt(),v=c(p);H(v);var b=t(v,2);H(b);var _=t(b,2);i(p),V(()=>Ke(b,e(u).value)),ve(v,()=>e(u).name,y=>(e(u).name=y,Se(()=>e(k)))),E("input",v,y=>{we(k,e(k)[o].name=y.currentTarget.value),l(k,[...e(k)])}),E("input",b,y=>{const U=+y.currentTarget.value;we(k,e(k)[o].value=U),l(k,[...e(k)])}),E("click",_,()=>{l(k,e(k).filter((y,U)=>U!==o))}),T(a,p)});var he=t(ke,2);i(je),We(2),i(K),V(a=>he.disabled=a,[()=>!fe()],G),ve(ge,()=>e(x),a=>l(x,a)),Xe(ee,()=>e(P),a=>l(P,a)),E("click",he,Be),E("submit",K,Ae),T(z,K),ce()}var pt=A('<h1>Create a New Build</h1> <div class="container"><!></div>',1);function Ot(z,C){de(C,!1);let L=f({}),g=F(C,"data",8);const m=xe(ne);_e(()=>{ne.subscribe(P=>{l(L,P||{})})});async function d(P){const B=P.detail,{token:S}=xe(Ze),O=await fetch("https://3ee.dev/skatebuild/api/builds/save/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"https://skatebuild.pro",Authorization:"Token "+S},mode:"cors",body:JSON.stringify(B)});if(O.ok){const q=await O.json();ne.set(q),await $e(`/builds/${q.owner_username}/${q.slug}`)}else console.error("Save failed",await O.json())}pe();var j=pt(),x=t(Y(j),2),W=c(x);ct(W,Ye(()=>e(L),{get skateboardProducts(){return g().skateboardProducts},get rollerskateProducts(){return g().rollerskateProducts},prefill:m,submit:d})),i(x),T(z,j),ce()}export{Ot as component,Bt as universal};
