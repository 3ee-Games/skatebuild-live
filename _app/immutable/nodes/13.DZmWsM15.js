import{c as ve,a as y,t as z}from"../chunks/DI9w5OQQ.js";import"../chunks/BxUFmY4z.js";import{ak as pe,aq as _2,al as de,j as t,o as _,c as e,am as a,an as l,ao as i,ap as x,ar as J,av as F,aH as T2}from"../chunks/BpViCVQb.js";import{e as A,s as F2}from"../chunks/CPOfcv9_.js";import{i as E}from"../chunks/WmZ9OhnZ.js";import{e as h2,i as k2}from"../chunks/DT_QGUp8.js";import{r as S,s as q,b as ue}from"../chunks/BDn2O-US.js";import{b as H,a as U2}from"../chunks/DJ-rPqZL.js";import{b as V2}from"../chunks/C2ObWKCn.js";import{p as me}from"../chunks/CWmzcjye.js";import{i as fe}from"../chunks/CPZJgrMF.js";import{o as ge}from"../chunks/DVRc__YI.js";import{g as X}from"../chunks/Cko_2ExL.js";import{g as b2}from"../chunks/DD5u_fhF.js";import{a as U}from"../chunks/BWRsyZQo.js";import{s as q2}from"../chunks/D66J3OLF.js";import{m as _e,t as he}from"../chunks/eA2ZOc3M.js";import{h as w2}from"../chunks/CPRV9u04.js";const ke="data:image/svg+xml,%3csvg%20style='height:%20512px;%20width:%20512px;'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M0%200h512v512H0z'%20fill='%23d6e010'%20fill-opacity='0'%3e%3c/path%3e%3cg%20class=''%20style=''%20transform='translate(0,0)'%3e%3cpath%20d='M143.627%2036.361c-2.18%200-16.495%2038.303-18.258%2039.584-1.763%201.281-42.615%203.06-43.289%205.133-.673%202.073%2031.33%2027.523%2032.004%2029.596.674%202.073-10.26%2041.475-8.496%2042.756%201.763%201.28%2035.86-21.291%2038.039-21.291%202.18%200%2036.276%2022.572%2038.039%2021.29%201.763-1.28-9.17-40.682-8.496-42.755.673-2.073%2032.677-27.523%2032.004-29.596-.674-2.073-41.526-3.852-43.29-5.133-1.763-1.28-16.077-39.584-18.257-39.584zm224.746%200c-2.18%200-16.494%2038.303-18.258%2039.584-1.763%201.281-42.615%203.06-43.289%205.133-.673%202.073%2031.33%2027.523%2032.004%2029.596.674%202.073-10.26%2041.475-8.496%2042.756%201.763%201.28%2035.86-21.291%2038.039-21.291%202.18%200%2036.276%2022.572%2038.04%2021.29%201.762-1.28-9.17-40.682-8.497-42.755.674-2.073%2032.677-27.523%2032.004-29.596-.674-2.073-41.526-3.852-43.29-5.133-1.762-1.28-16.077-39.584-18.257-39.584zM256%2039.883c-7.12%200-53.884%20125.123-59.645%20129.308-5.76%204.185-139.211%209.996-141.412%2016.768-2.2%206.772%20102.349%2089.912%20104.55%2096.684%202.2%206.771-33.513%20135.486-27.753%20139.671C137.5%20426.5%20248.88%20352.76%20256%20352.76c7.12%200%20118.5%2073.74%20124.26%2069.554%205.76-4.185-29.952-132.9-27.752-139.671%202.2-6.772%20106.749-89.912%20104.549-96.684-2.2-6.772-135.652-12.583-141.412-16.768-5.76-4.185-52.525-129.308-59.645-129.308zM77.973%20243.102c-2.18%200-16.495%2038.302-18.258%2039.584-1.763%201.28-42.616%203.06-43.29%205.132-.673%202.073%2031.333%2027.523%2032.007%2029.596.673%202.073-10.26%2041.475-8.496%2042.756%201.763%201.281%2035.857-21.291%2038.037-21.291%202.18%200%2036.275%2022.572%2038.039%2021.29%201.763-1.28-9.17-40.682-8.496-42.755.673-2.073%2032.679-27.523%2032.005-29.596-.673-2.073-41.525-3.851-43.289-5.132-1.763-1.282-16.08-39.584-18.26-39.584zm356.054%200c-2.18%200-16.496%2038.302-18.26%2039.584-1.763%201.28-42.615%203.06-43.288%205.132-.674%202.073%2031.332%2027.523%2032.005%2029.596.674%202.073-10.26%2041.475-8.496%2042.756%201.764%201.281%2035.86-21.291%2038.04-21.291%202.179%200%2036.273%2022.572%2038.036%2021.29%201.764-1.28-9.17-40.682-8.496-42.755.674-2.073%2032.68-27.523%2032.006-29.596-.673-2.073-41.526-3.851-43.289-5.132-1.763-1.282-16.078-39.584-18.258-39.584zM256%20369.932c-2.18%200-16.494%2038.302-18.258%2039.584-1.763%201.28-42.615%203.06-43.289%205.132-.673%202.073%2031.33%2027.525%2032.004%2029.598.674%202.073-10.26%2041.475-8.496%2042.756%201.763%201.281%2035.86-21.293%2038.039-21.293%202.18%200%2036.276%2022.574%2038.04%2021.293%201.762-1.281-9.17-40.683-8.497-42.756.673-2.073%2032.677-27.525%2032.004-29.598-.674-2.072-41.526-3.851-43.29-5.132-1.763-1.282-16.077-39.584-18.257-39.584z'%20fill='%23ff7a20'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e",y2="data:image/svg+xml,%3csvg%20style='height:%20512px;%20width:%20512px;'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M0%200h512v512H0z'%20fill='%23d6e010'%20fill-opacity='0'%3e%3c/path%3e%3cg%20class=''%20style=''%20transform='translate(0,0)'%3e%3cpath%20d='M372.48%2031.215c-77.65%200-116.48%2065.73-116.48%2065.73s-38.83-65.72-116.48-65.72c-37.14%200-107.77%2033.72-107.77%20125.13%200%20161.24%20224.25%20324.43%20224.25%20324.43s224.25-163.19%20224.25-324.43c0-91.42-70.63-125.13-107.77-125.14zM146.924%20225.65h220v60.7h-220z'%20fill='rgb(250,%2044,%20202)'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e",be="data:image/svg+xml,%3csvg%20style='height:%20512px;%20width:%20512px;'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M0%200h512v512H0z'%20fill='%23d6e010'%20fill-opacity='0'%3e%3c/path%3e%3cg%20class=''%20style=''%20transform='translate(0,0)'%3e%3cpath%20d='M64%2048c-8.726%200-16%207.274-16%2016v384c0%208.726%207.274%2016%2016%2016h215v-16H64V64h63.375v97.53c0%203.924%203.443%207.095%207.72%207.095h169.81c4.277%200%207.72-3.17%207.72-7.094V64h69.22c.428.318.8.548%201.467%201.094%202.05%201.675%204.962%204.264%208.375%207.406%206.827%206.283%2015.65%2014.837%2024.313%2023.5%208.663%208.663%2017.217%2017.486%2023.5%2024.313%203.142%203.413%205.73%206.324%207.406%208.374.546.668.776%201.04%201.094%201.47V330.25l16%2016V128c0-2.68-.657-3.402-1.03-4.156a15.312%2015.312%200%200%200-1.095-1.844c-.74-1.1-1.575-2.19-2.594-3.438-2.036-2.492-4.768-5.55-8.03-9.093-6.524-7.09-15.155-16-23.938-24.782-8.782-8.783-17.692-17.414-24.78-23.938-3.545-3.262-6.6-5.994-9.094-8.03-1.247-1.02-2.337-1.855-3.438-2.595-.55-.37-1.09-.72-1.844-1.094-.754-.373-1.477-1.03-4.156-1.03H64zm87.72%2016h48.56c4.277%200%207.72%204.425%207.72%209.938v70.124c0%205.513-3.443%209.938-7.72%209.938h-48.56c-4.277%200-7.72-4.425-7.72-9.938V73.938c0-5.512%203.443-9.937%207.72-9.937zM114%20212c-4.432%200-8%203.568-8%208v184c0%204.432%203.568%208%208%208h165v-28h-76.72l15.345-15.375%20128-128L352%20234.28l6.375%206.345L406%20288.25V220c0-4.432-3.568-8-8-8H114zm238%2047.75L245.75%20366H297v128h110V366h51.25L352%20259.75zM448%20384v64h-23v16h23c8.726%200%2016-7.274%2016-16v-64h-16z'%20fill='%23000000'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e";var qe=z("<p>Loading profile…</p>"),we=z('<div class="error-banner svelte-i8q8k2"> </div>'),ye=z('<progress class="progress-bar svelte-i8q8k2" max="100"></progress> <p> </p>',1),Se=z('<div class="field svelte-i8q8k2"><label for="stance" class="svelte-i8q8k2">Stance</label> <select id="stance" class="svelte-i8q8k2"><option>Regular</option><option>Goofy</option></select></div>'),xe=z('<div class="list-row svelte-i8q8k2"><input type="url" placeholder="https://" class="svelte-i8q8k2"> <button class="svelte-i8q8k2"><img alt="Find Skateboard builds" class="svelte-i8q8k2"></button></div>'),ze=z('<div class="list-row svelte-i8q8k2"><input placeholder="Sponsor name" required class="svelte-i8q8k2"> <button class="svelte-i8q8k2"><img alt="Find Skateboard builds" class="svelte-i8q8k2"></button></div>'),Me=z('<div class="contest-header svelte-i8q8k2"><span>Contest Name</span> <span>Division</span> <span>Date</span> <span>Placement</span> <span></span></div>'),Ae=z('<div class="contest-row svelte-i8q8k2"><input class="contest-name svelte-i8q8k2" placeholder="Contest name" required> <input class="contest-division svelte-i8q8k2" placeholder="Division"> <input class="contest-date svelte-i8q8k2" type="date"> <input class="contest-placement svelte-i8q8k2" type="number" placeholder="placement"> <button type="button" class="remove-btn svelte-i8q8k2"><img alt="Find Skateboard builds" class="svelte-i8q8k2"></button></div>'),He=z('<!> <div class="container svelte-i8q8k2"><h1 class="svelte-i8q8k2">Edit Your Profile</h1> <div class="avatar-section svelte-i8q8k2"><img alt="Avatar preview" class="avatar-img svelte-i8q8k2"> <input type="file" accept="image/*" class="svelte-i8q8k2"> <!></div> <form><div class="field svelte-i8q8k2"><label for="name" class="svelte-i8q8k2">Name</label> <input id="name" required class="svelte-i8q8k2"></div> <div class="field svelte-i8q8k2"><label for="hometown" class="svelte-i8q8k2">Location</label> <input id="hometown" class="svelte-i8q8k2"></div> <div class="field-group svelte-i8q8k2"><label class="svelte-i8q8k2"><input type="checkbox" class="svelte-i8q8k2"> Skateboarder</label> <label class="svelte-i8q8k2"><input type="checkbox" class="svelte-i8q8k2"> Roller Skater</label></div> <!> <div class="field svelte-i8q8k2"><label for="status" class="svelte-i8q8k2">Skill Level</label> <select id="status" class="svelte-i8q8k2"><option>Amateur</option><option>Pro</option></select></div> <section class="svelte-i8q8k2"><h2 class="svelte-i8q8k2"><img width="32px" height="32px" alt="social media section" class="svelte-i8q8k2"> Social</h2> <!> <button type="button" class="svelte-i8q8k2"><img alt="Add social media account" class="svelte-i8q8k2"> <span class="svelte-i8q8k2">Add Social Link</span></button></section> <section class="svelte-i8q8k2"><h2 class="svelte-i8q8k2"><img width="32px" height="32px" alt="sponsors section" class="svelte-i8q8k2"> Sponsors</h2> <!> <button type="button" class="svelte-i8q8k2"><img alt="Add sponsor" class="svelte-i8q8k2"> <span class="svelte-i8q8k2">Add Sponsor</span></button></section> <section class="svelte-i8q8k2"><h2 class="svelte-i8q8k2"><img width="32px" height="32px" alt="contest section" class="svelte-i8q8k2"> Contest Results</h2> <!> <!> <button type="button" class="svelte-i8q8k2"><img alt="Add social media account" class="svelte-i8q8k2"> <span class="svelte-i8q8k2">Add Result</span></button></section> <hr class="svelte-i8q8k2"> <button type="submit" class="svelte-i8q8k2"><img alt="Save profile" class="svelte-i8q8k2"> <span class="svelte-i8q8k2">Save Profile</span></button></form></div>',1);function Ge(N2,$2){pe($2,!1);const S2=[];let V=_(""),j="",D="",N=_(""),M=_([]),O=_("regular"),T=_("amateur"),k=_([]),f=_([]),b=_([]),G=_(null),$=_(!1),Y=_(0),x2=_(!0),L=_(null);ge(async()=>{const o=X(q2);t(V,o.name),t(N,o.hometown),t(M,[...o.skater_type]),t(O,o.stance||"regular"),t(T,o.status||"amateur"),t(k,[...o.sponsors||[]]),t(f,[...o.contest_results||[]]),t(b,[...o.social_urls||[]]),j=o.image,D=o.imageSmall,t(G,o.imageSmall);try{const{username:c,token:m}=X(U);if(!c||!m){b2("/login");return}const h=await fetch(`/data/profiles/${c}.json`);if(h.ok){const n=await h.json();t(V,n.name),t(N,n.hometown),t(M,n.skater_type),t(O,n.stance||"regular"),t(T,n.status.toLowerCase()),t(k,n.sponsors||[]),t(f,n.contest_results||[]),t(b,n.social_urls||[]),j=n.image,D=n.imageSmall,t(G,n.imageSmall)}}catch(c){console.error("Failed to load profile JSON, using draft:",c)}finally{t(x2,!1)}});async function I2(o){var I;const c=o.currentTarget;if(!((I=c.files)!=null&&I[0]))return;const m=c.files[0];t(G,URL.createObjectURL(m)),t($,!0),t(Y,0);const{token:h}=X(U),n=new FormData;n.append("file",m),n.append("useDiffusion","false");const d=new XMLHttpRequest;d.open("POST","https://3ee.dev/account/upload/",!0),d.setRequestHeader("Accept","application/json"),d.setRequestHeader("Access-Control-Allow-Origin","https://skatebuild.pro"),d.setRequestHeader("Authorization",`Token ${h}`),d.upload.onprogress=w=>{w.lengthComputable&&t(Y,Math.round(w.loaded/w.total*100))},d.onload=()=>{if(t($,!1),d.status===401){U.set({}),b2("/login");return}if(d.status>=200&&d.status<300){const w=JSON.parse(d.responseText);j=w.image,D=w.imageSmall;const B={...X(U)};B.profile={...B.profile,image:j,imageSmall:D},U.set(B),q2.update(W=>({...W,image:j,imageSmall:D}))}else console.error("Upload failed:",d.statusText),t(L,"Image upload failed")},d.onerror=()=>{t($,!1),console.error("Upload XHR error"),t(L,"Image upload failed")},d.send(n)}function B2(){t(k,[...e(k),""])}function J2(o){t(k,e(k).filter((c,m)=>m!==o))}function E2(){t(f,[...e(f),{name:"",division:"",date:new Date().toISOString().slice(0,10),placement:1}])}function X2(o){t(f,e(f).filter((c,m)=>m!==o))}function G2(){t(b,[...e(b),""])}function Y2(o){t(b,e(b).filter((c,m)=>m!==o))}async function K2(){t(L,null);const{username:o,token:c}=X(U);if(!o||!c){t(L,"Not authenticated");return}const m={name:e(V),hometown:e(N),skater_type:e(M),stance:e(O),status:e(T),sponsors:e(k),contest_results:e(f),image:j,imageSmall:D,social_urls:e(b)};try{const h=await fetch("https://3ee.dev/skatebuild/api/profiles/save/",{method:"POST",headers:{Accept:"application/json","Access-Control-Allow-Origin":"https://skatebuild.pro","Content-Type":"application/json",Authorization:`Token ${c}`},mode:"cors",body:JSON.stringify(m)}),n=await h.json();if(q2.set(n),!h.ok)throw new Error(n.detail||"Save failed");await b2(`/profiles/${o}`)}catch(h){console.error(h),t(L,h.message)}}fe();var z2=ve(),Q2=_2(z2);{var W2=o=>{var c=qe();y(o,c)},Z2=o=>{var c=He(),m=_2(c);{var h=s=>{var r=we(),v=l(r,!0);i(r),J(()=>F2(v,e(L))),y(s,r)};E(m,s=>{e(L)&&s(h)})}var n=a(m,2),d=a(l(n),2),I=l(d),w=a(I,2),B=a(w,2);{var W=s=>{var r=ye(),v=_2(r),p=a(v,2),u=l(p);i(p),J(()=>{ue(v,e(Y)),F2(u,`Uploading… ${e(Y)??""}%`)}),y(s,r)};E(B,s=>{e($)&&s(W)})}i(d);var Z=a(d,2),e2=l(Z),M2=a(l(e2),2);S(M2),i(e2);var t2=a(e2,2),A2=a(l(t2),2);S(A2),i(t2);var a2=a(t2,2),s2=l(a2),K=l(s2);S(K),K.value=K.__value="skateboarder",x(),i(s2);var H2=a(s2,2),Q=l(H2);S(Q),Q.value=Q.__value="roller skater",x(),i(H2),i(a2);var L2=a(a2,2);{var ee=s=>{var r=Se(),v=a(l(r),2);J(()=>{e(O),F(()=>{})});var p=l(v);p.value=p.__value="regular";var u=a(p);u.value=u.__value="goofy",i(v),i(r),V2(v,()=>e(O),g=>t(O,g)),y(s,r)};E(L2,s=>{e(M).includes("skateboarder")&&s(ee)})}var l2=a(L2,2),i2=a(l(l2),2);J(()=>{e(T),F(()=>{})});var o2=l(i2);o2.value=o2.__value="amateur";var C2=a(o2);C2.value=C2.__value="pro",i(i2),i(l2);var r2=a(l2,2),n2=l(r2),te=l(n2);q(te,"src",ke),x(),i(n2);var R2=a(n2,2);h2(R2,1,()=>e(b),k2,(s,r,v)=>{var p=xe(),u=l(p);S(u);var g=a(u,2),C=l(g);q(C,"src",y2),i(g),i(p),H(u,()=>e(b)[v],R=>T2(b,e(b)[v]=R)),A("click",g,()=>Y2(v)),y(s,p)});var c2=a(R2,2),ae=l(c2);q(ae,"src",w2),x(2),i(c2),i(r2);var v2=a(r2,2),p2=l(v2),se=l(p2);q(se,"src",_e),x(),i(p2);var P2=a(p2,2);h2(P2,1,()=>e(k),k2,(s,r,v)=>{var p=ze(),u=l(p);S(u);var g=a(u,2),C=l(g);q(C,"src",y2),i(g),i(p),H(u,()=>e(k)[v],R=>T2(k,e(k)[v]=R)),A("click",g,()=>J2(v)),y(s,p)});var d2=a(P2,2),le=l(d2);q(le,"src",w2),x(2),i(d2),i(v2);var u2=a(v2,2),m2=l(u2),ie=l(m2);q(ie,"src",he),x(),i(m2);var j2=a(m2,2);{var oe=s=>{var r=Me();y(s,r)};E(j2,s=>{typeof e(f)<"u"&&e(f).length>0&&s(oe)})}var D2=a(j2,2);h2(D2,1,()=>e(f),k2,(s,r,v)=>{var p=Ae(),u=l(p);S(u);var g=a(u,2);S(g);var C=a(g,2);S(C);var R=a(C,2);S(R);var g2=a(R,2),ce=l(g2);q(ce,"src",y2),i(g2),i(p),H(u,()=>e(r).name,P=>(e(r).name=P,F(()=>e(f)))),H(g,()=>e(r).division,P=>(e(r).division=P,F(()=>e(f)))),H(C,()=>e(r).date,P=>(e(r).date=P,F(()=>e(f)))),H(R,()=>e(r).placement,P=>(e(r).placement=P,F(()=>e(f)))),A("click",g2,()=>X2(v)),y(s,p)});var f2=a(D2,2),re=l(f2);q(re,"src",w2),x(2),i(f2),i(u2);var O2=a(u2,4),ne=l(O2);q(ne,"src",be),x(2),i(O2),i(Z),i(n),J(()=>{q(I,"src",e(G)||"/default-avatar.png"),w.disabled=e($)}),A("change",w,I2),H(M2,()=>e(V),s=>t(V,s)),H(A2,()=>e(N),s=>t(N,s)),U2(S2,[],K,()=>e(M),s=>t(M,s)),U2(S2,[],Q,()=>e(M),s=>t(M,s)),V2(i2,()=>e(T),s=>t(T,s)),A("click",c2,G2),A("click",d2,B2),A("click",f2,E2),A("submit",Z,me(K2)),y(o,c)};E(Q2,o=>{e(x2)?o(W2):o(Z2,!1)})}y(N2,z2),de()}export{Ge as component};
