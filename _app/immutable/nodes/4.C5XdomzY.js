import{e as We}from"../chunks/CF7ewsPV.js";import{g as Ye}from"../chunks/0ItF74pc.js";import{s as $e}from"../chunks/DHBz13pJ.js";import{t as p,b as _,h as He}from"../chunks/D6lpRjZ0.js";import"../chunks/Dbo0GaMY.js";import{ak as we,as as x,al as je,ao as r,ap as l,an as d,aK as ke,g as a,au as Y,av as Je,A as D,am as Le,v as M,j as Qe,aq as fe,n as ye}from"../chunks/Dc4WGsSd.js";import{e as H,s as h}from"../chunks/BqCtJVv-.js";import{i as T}from"../chunks/NlFxusRD.js";import{e as ue,i as de}from"../chunks/lghtj30-.js";import{r as xe,s as v,a as Xe}from"../chunks/C2dxG4li.js";import{s as Ze}from"../chunks/ChFjY2lJ.js";import{s as Fe}from"../chunks/DXQxOq2q.js";import{i as Pe}from"../chunks/lo1Tk5pU.js";import{p as O}from"../chunks/kt-Q8nrS.js";import{s as es,a as ss}from"../chunks/X-WOwvk_.js";import{a as ts}from"../chunks/YS5glfzG.js";import{g as as}from"../chunks/B72_VOVm.js";import{c as ls}from"../chunks/DWY3zAZ5.js";import{s as rs,r as os}from"../chunks/DqAaAC6z.js";const is=!1,us=!1,ds=async({params:o,fetch:u})=>{const{username:c,slug:$}=o;let m;const i=Ye($e);if(i.slug===$&&i.owner_username===c)m={name:i.name,slug:i.slug,build_type:i.build_type,skating_type:i.skating_type,deck_slug:i.deck_slug||void 0,griptape_slug:i.griptape_slug||void 0,rails_slug:i.rails_slug||void 0,risers_slug:i.risers_slug||void 0,boot_slug:i.boot_slug||void 0,plates_slug:i.plates_slug||void 0,slideblock_slug:i.slideblock_slug||void 0,toestops_slug:i.toestops_slug||void 0,trucks_slug:i.trucks_slug,bearings_slug:i.bearings_slug,wheels_slug:i.wheels_slug,bushings_slug:i.bushings_slug,owner_username:i.owner_username,attributes:i.attributes??[]};else{const e=await u(`/data/builds/${c}/${$}.json`);if(e.ok){const k=await e.json();m={...k,attributes:k.attributes??[]}}else throw We(404,`Build not found: ${c}/${$}`)}const j=ns(m,u),P=await Promise.all(Object.entries(j).filter(([,e])=>e!==null).map(async([e,k])=>{const w=await k;return w.ok?[e,await w.json()]:[e,null]})),N=Object.fromEntries(P);return{build:m,products:N}};function ns(o,u){const c=o.build_type==="skateboard"?"skateboard-products":"rollerskate-products",$={bearings:u(`/data/${c}/bearings/${o.bearings_slug}.json`),bushings:u(`/data/${c}/bushings/${o.bushings_slug}.json`),trucks:u(`/data/${c}/trucks/${o.trucks_slug}.json`),wheels:u(`/data/${c}/wheels/${o.wheels_slug}.json`)},m={decks:o.deck_slug?u(`/data/${c}/decks/${o.deck_slug}.json`):null,griptape:o.griptape_slug?u(`/data/${c}/griptape/${o.griptape_slug}.json`):null,rails:o.rails_slug?u(`/data/${c}/rails/${o.rails_slug}.json`):null,risers:o.risers_slug?u(`/data/${c}/risers/${o.risers_slug}.json`):null},i={boots:o.boot_slug?u(`/data/${c}/boots/${o.boot_slug}.json`):null,slideblocks:o.slideblock_slug?u(`/data/${c}/slideblocks/${o.slideblock_slug}.json`):null,plates:o.plates_slug?u(`/data/${c}/plates/${o.plates_slug}.json`):null,toestops:o.toestops_slug?u(`/data/${c}/toestops/${o.toestops_slug}.json`):null};return{...$,...o.build_type==="skateboard"?m:i}}const Ws=Object.freeze(Object.defineProperty({__proto__:null,load:ds,prerender:is,ssr:us},Symbol.toStringTag,{value:"Module"}));var cs=p('<p class="svelte-11fic08"> </p>'),gs=p('<div class="option-container svelte-11fic08"><article class="main svelte-11fic08"><h4 class="highlight large svelte-11fic08"> </h4> <!></article> <aside class="aside aside-1 svelte-11fic08"><input type="checkbox" class="svelte-11fic08"> <label class="svelte-11fic08"> </label></aside></div>');function _s(o,u){we(u,!1);let c=O(u,"id",8,""),$=O(u,"name",8,""),m=O(u,"label",8,""),i=O(u,"description",8,""),j=O(u,"checked",12,!1),P=O(u,"onChange",8,()=>{});function N(g){P()({id:g.target.id,checked:g.target.checked})}Pe();var e=gs(),k=r(e),w=r(k),E=r(w,!0);l(w);var B=d(w,2);{var J=g=>{var q=cs(),K=r(q,!0);l(q),x(()=>h(K,i())),_(g,q)};T(B,g=>{i()&&g(J)})}l(k);var A=d(k,2),f=r(A);xe(f);var G=d(f,2),I=r(G,!0);l(G),l(A),l(e),x(()=>{h(E,m()),v(f,"id",c()),v(f,"name",$()),v(G,"for",c()),h(I,m())}),ls(f,j),H("change",f,N),_(o,e),je()}var vs=p('<meta name="description">'),ps=p('<img alt="Skateboard build" class="build-icon svelte-54dh2">'),bs=p('<img alt="Rollerskate build" class="build-icon svelte-54dh2">'),hs=p('<div class="edit-container svelte-54dh2"><button class="edit-button svelte-54dh2">Edit Build</button></div>'),ms=p('<div class="edit-container svelte-54dh2"><button class="edit-button svelte-54dh2">Modify Build</button></div>'),ks=p('<div class="attribute-item svelte-54dh2"><span class="attr-name svelte-54dh2"> </span> <div class="attr-bar-container svelte-54dh2"><div class="attr-bar svelte-54dh2"></div></div></div>'),fs=p('<section class="attributes-section svelte-54dh2"><h2 class="svelte-54dh2">Stats</h2> <!></section>'),ys=p('<tr class="svelte-54dh2"><td class="svelte-54dh2"><input type="radio" class="svelte-54dh2"></td><td data-label="Vendor" class="svelte-54dh2"><a target="_blank" rel="noopener" class="svelte-54dh2"> </a></td><td data-label="Price" class="svelte-54dh2"> </td></tr>'),$s=p('<table class="price-table svelte-54dh2"><thead class="svelte-54dh2"><tr class="svelte-54dh2"><th class="svelte-54dh2">Select</th><th class="svelte-54dh2">Vendor</th><th class="svelte-54dh2">Price</th></tr></thead><tbody class="svelte-54dh2"></tbody></table>'),ws=p('<section class="build-section svelte-54dh2"><div class="section-inner svelte-54dh2"><img> <div class="section-info svelte-54dh2"><h2 class="svelte-54dh2"> </h2> <p><a class="svelte-54dh2"><strong> </strong></a> </p> <!></div></div></section>'),js=p(`<section class="build-section svelte-54dh2"><h2 class="svelte-54dh2">Grand Total</h2> <p class="grand-total svelte-54dh2"> </p> <p class="disclaimer svelte-54dh2">Prices are an estimate. Check to make sure all parts are compatible and the correct size
				before purchasing.</p></section>`),xs=p('<div class="container svelte-54dh2"><h1 class="svelte-54dh2"><!> </h1> <p>Created by <a class="svelte-54dh2"> </a></p> <!> <p>This build is designed for <strong><span class="highlight"> </span></strong>.</p> <!> <!> <!> <!></div>');function Ys(o,u){we(u,!1);const[c,$]=es(),m=()=>ss(ts,"$accountData",c),i=D(),j=D(),P=D(),N=D();let e=O(u,"data",8);const k=e().build.owner_username?`${e().build.owner_username}'s custom ${e().build.build_type} build | SkateBuild.pro`:"Build Your Skate",w=new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),E=e().build.attributes??[];let B=D(!1);function J({id:t,checked:s}){M(B,s)}function A(t){const s=Object.keys(t).find(n=>n!=="url"&&n!=="productVendorUrl");return{vendor:s,price:t[s],url:t.url,productVendorUrl:t.productVendorUrl}}function f(t){const s=t.split("-").pop().trim(),n=parseFloat(s.replace(/[^0-9.]/g,""));return isNaN(n)?0:Math.round(n*100)}const I=[{key:"decks",label:"Deck",slug:e().build.deck_slug},{key:"griptape",label:"griptape",slug:e().build.griptape_slug},{key:"boots",label:"Boots",slug:e().build.boot_slug},{key:"plates",label:"Plates",slug:e().build.plates_slug},{key:"trucks",label:"Trucks",slug:e().build.trucks_slug},{key:"slideblocks",label:"SlideBlocks",slug:e().build.slideblock_slug},{key:"wheels",label:"Wheels",slug:e().build.wheels_slug},{key:"bearings",label:"Bearings",slug:e().build.bearings_slug},{key:"toestops",label:"Toestops",slug:e().build.toestops_slug},{key:"rails",label:"rails",slug:e().build.rails_slug},{key:"risers",label:"risers",slug:e().build.risers_slug},{key:"bushings",label:"Bushings",slug:e().build.bushings_slug}].map(t=>{const s=e().products[t.key];if(!s||!t.slug)return null;const n=s.productPrices.map(A);return{key:t.key,label:t.label,slug:t.slug,productName:s.productName,productBrand:s.productBrand,cloudinaryUrl:s.cloudinaryUrl,vendorPrices:n}}).filter(Boolean),g=D({});I.forEach(t=>{t.vendorPrices.length&&ke(g,a(g)[t.key]=f(t.vendorPrices[0].price))});function q(t,s){ke(g,a(g)[t]=s)}function K(){$e.set({slug:e().build.slug,name:e().build.name,skater_type:[],build_type:e().build.build_type,skating_type:e().build.skating_type,stance:e().build.stance??"",deck_slug:e().build.deck_slug??"",griptape_slug:e().build.griptape_slug??"",risers_slug:e().build.risers_slug??"",boot_slug:e().build.boot_slug??"",toestops_slug:e().build.toestops_slug??"",slideblock_slug:e().build.slideblock_slug??"",rails_slug:e().build.rails_slug??"",plates_slug:e().build.plates_slug??"",trucks_slug:e().build.trucks_slug,bearings_slug:e().build.bearings_slug,wheels_slug:e().build.wheels_slug,bushings_slug:e().build.bushings_slug,attributes:E,owner_username:e().build.owner_username??""}),as("/builds/new")}Y(()=>m(),()=>{var t;M(i,(t=m())==null?void 0:t.username)}),Y(()=>Qe(e()),()=>{M(j,e().build.owner_username)}),Y(()=>a(g),()=>{M(P,Object.values(a(g)).reduce((t,s)=>t+s,0))}),Y(()=>a(P),()=>{M(N,`$${w.format(a(P)/100)}`)}),Je(),Pe();var L=xs();He(t=>{var s=vs();Le.title=k,x(()=>v(s,"content",`Check out ${e().build.owner_username??""}'s custom ${e().build.build_type??""} build and prices.`)),_(t,s)});var Q=r(L),ne=r(Q);{var Be=t=>{var s=ps();v(s,"src",rs),_(t,s)},Se=(t,s)=>{{var n=y=>{var b=bs();v(b,"src",os),_(y,b)};T(t,y=>{e().build.build_type==="rollerskate"&&y(n)},s)}};T(ne,t=>{e().build.build_type==="skateboard"?t(Be):t(Se,!1)})}var Ce=d(ne);l(Q);var X=d(Q,2),Z=d(r(X)),Ue=r(Z,!0);l(Z),l(X);var ce=d(X,2);{var Te=t=>{var s=hs(),n=r(s);l(s),H("click",n,K),_(t,s)},Oe=t=>{var s=ms(),n=r(s);l(s),H("click",n,K),_(t,s)};T(ce,t=>{a(i)===a(j)?t(Te):t(Oe,!1)})}var F=d(ce,2),ge=d(r(F)),_e=r(ge),Ne=r(_e,!0);l(_e),l(ge),fe(),l(F);var ve=d(F,2);{var Ve=t=>{var s=fs(),n=d(r(s),2);ue(n,1,()=>E,de,(y,b)=>{var S=ks(),C=r(S),ee=r(C,!0);l(C);var V=d(C,2),U=r(V);l(V),l(S),x((R,se)=>{v(S,"data-value",R),h(ee,a(b).name),v(U,"data-color",a(b).value<=.3?"low":a(b).value<=.7?"medium":"high"),Fe(U,`width: ${se??""}%;`)},[()=>`${Math.round(a(b).value*100)}%`,()=>Math.round(a(b).value*100)],ye),_(y,S)}),l(s),_(t,s)};T(ve,t=>{E.length&&t(Ve)})}var pe=d(ve,2);_s(pe,{id:"toggle_prices",name:"toggle_prices",label:"Show Prices",description:"Compare prices.",onChange:J,get checked(){return a(B)},set checked(t){M(B,t)},$$legacy:!0});var be=d(pe,2);ue(be,1,()=>I,de,(t,s)=>{var n=ws(),y=r(n),b=r(y),S=d(b,2),C=r(S),ee=r(C,!0);l(C);var V=d(C,2),U=r(V),R=r(U),se=r(R,!0);l(R),l(U);var Ee=d(U);l(V);var qe=d(V,2);{var ze=te=>{var ae=$s(),he=d(r(ae));ue(he,5,()=>a(s).vendorPrices,de,(Ae,z)=>{var le=ys(),re=r(le),W=r(re);xe(W),l(re);var oe=d(re),ie=r(oe),Ge=r(ie,!0);l(ie),l(oe);var me=d(oe),Ie=r(me);l(me),l(le),x((Ke,Re)=>{v(W,"name","selected_"+a(s).key),Xe(W,Ke),v(ie,"href",a(z).productVendorUrl),h(Ge,a(z).vendor),h(Ie,`$${Re??""}`)},[()=>a(g)[a(s).key]===f(a(z).price),()=>w.format(a(z).price)],ye),H("change",W,()=>q(a(s).key,f(a(z).price))),_(Ae,le)}),l(he),l(ae),_(te,ae)};T(qe,te=>{a(B)&&te(ze)})}l(S),l(y),l(n),x(()=>{v(b,"src",a(s).cloudinaryUrl),v(b,"alt",a(s).productName),Ze(b,1,`section-image ${a(s).key??""}`,"svelte-54dh2"),h(ee,a(s).label),v(U,"href",`/product/${a(s).key}/${a(s).slug}`),h(se,a(s).productName),h(Ee,`  by ${a(s).productBrand??""}`)}),_(t,n)});var De=d(be,2);{var Me=t=>{var s=js(),n=d(r(s),2),y=r(n,!0);l(n),fe(2),l(s),x(()=>h(y,a(N))),_(t,s)};T(De,t=>{a(B)&&t(Me)})}l(L),x(()=>{h(Ce,` ${e().build.name??""}`),v(Z,"href",`/profiles/${a(j)}`),h(Ue,a(j)),h(Ne,e().build.skating_type)}),_(o,L),je(),$()}export{Ys as component,Ws as universal};
