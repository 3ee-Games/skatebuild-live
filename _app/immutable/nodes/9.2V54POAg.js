import{t as g,a as h}from"../chunks/Cbs2TP5J.js";import"../chunks/DppSS1ZK.js";import{ak as S,c as s,al as q,am as r,an as p,j as o,o as u,ao as l,ap as L,ar as N}from"../chunks/BQECxIka.js";import{e as O,s as P}from"../chunks/D7dhJHJ5.js";import{i as T}from"../chunks/BxIlQOsl.js";import{r as b}from"../chunks/C1JmazWi.js";import{b as _}from"../chunks/BHVgj7FX.js";import{p as C}from"../chunks/CWmzcjye.js";import{i as E}from"../chunks/-1FsuQLY.js";import{a as I}from"../chunks/BMexqwi4.js";import{g as J}from"../chunks/Da9vBApV.js";var U=g('<div class="error"> </div>'),$=g('<form class="container svelte-phi4ww"><h1>Login</h1> <div class="field svelte-phi4ww"><label for="username" class="svelte-phi4ww">Username</label> <input id="username" type="text" placeholder="enter your username" required class="svelte-phi4ww"></div> <div class="field svelte-phi4ww"><label for="password" class="svelte-phi4ww">Password</label> <input id="password" type="password" placeholder="enter your password" required class="svelte-phi4ww"></div> <!> <button type="submit" class="svelte-phi4ww">Login</button></form>');function W(y,k){S(k,!1);let m=u(""),d=u(""),t=u("");async function x(e){e.preventDefault(),o(t,"");try{const a=await fetch("https://3ee.dev/account/login/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:s(m),password:s(d)})}),n=await a.json();a.ok&&n.token?(I.set(n),J("/")):o(t,"Invalid credentials")}catch(a){console.error(a),o(t,"Network error")}}E();var i=$(),v=r(p(i),2),f=r(p(v),2);b(f),l(v);var c=r(v,2),w=r(p(c),2);b(w),l(c);var j=r(c,2);{var D=e=>{var a=U(),n=p(a,!0);l(a),N(()=>P(n,s(t))),h(e,a)};T(j,e=>{s(t)&&e(D)})}L(2),l(i),_(f,()=>s(m),e=>o(m,e)),_(w,()=>s(d),e=>o(d,e)),O("submit",i,C(x)),h(y,i),q()}export{W as component};
