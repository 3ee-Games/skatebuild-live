import{e as Rs}from"../chunks/2wBu3B3O.js";import{g as Ws}from"../chunks/IxWn49b3.js";import{s as fs}from"../chunks/BVyUmpUc.js";import{t as b,a as v}from"../chunks/DRiVrBMz.js";import"../chunks/BLulYnNU.js";import{ak as ws,ar as V,al as ys,an as r,ao as l,am as u,aw as ms,g as a,at as W,au as Hs,A as D,v as E,j as Is,ap as ks,n as hs}from"../chunks/DGYefiCd.js";import{e as H,s as _}from"../chunks/ByZ5mbbd.js";import{i as O}from"../chunks/CWD507PG.js";import{e as os,i as is}from"../chunks/k-lROdaV.js";import{r as $s,s as p,b as Js}from"../chunks/BVgT1Vhj.js";import{s as Ks}from"../chunks/DsOQ9nNt.js";import{s as Ls}from"../chunks/D-mBL8zO.js";import{i as js}from"../chunks/BoHxMQP1.js";import{p as T}from"../chunks/OZP53ftb.js";import{s as Qs,a as Xs}from"../chunks/DavUG9Pm.js";import{a as Ys}from"../chunks/DjSiL-jg.js";import{g as Zs}from"../chunks/Xt4EVaYy.js";import{c as Fs}from"../chunks/DEDQ5tvs.js";import{s as se,r as ee}from"../chunks/DqAaAC6z.js";const te=!1,ae=!1,le=async({params:o,fetch:c})=>{const{username:d,slug:y}=o;let m;const i=Ws(fs);if(i.slug===y&&i.owner_username===d)m={name:i.name,slug:i.slug,build_type:i.build_type,skating_type:i.skating_type,deck_slug:i.deck_slug||void 0,griptape_slug:i.griptape_slug||void 0,rails_slug:i.rails_slug||void 0,risers_slug:i.risers_slug||void 0,boot_slug:i.boot_slug||void 0,plates_slug:i.plates_slug||void 0,slideblock_slug:i.slideblock_slug||void 0,toestops_slug:i.toestops_slug||void 0,trucks_slug:i.trucks_slug,bearings_slug:i.bearings_slug,wheels_slug:i.wheels_slug,bushings_slug:i.bushings_slug,owner_username:i.owner_username,attributes:i.attributes??[]};else{const s=await c(`/data/builds/${d}/${y}.json`);if(s.ok){const k=await s.json();m={...k,attributes:k.attributes??[]}}else throw Rs(404,`Build not found: ${d}/${y}`)}const x=re(m,c),P=await Promise.all(Object.entries(x).filter(([,s])=>s!==null).map(async([s,k])=>{const h=await k;return h.ok?[s,await h.json()]:[s,null]})),N=Object.fromEntries(P);return{build:m,products:N}};function re(o,c){const d=o.build_type==="skateboard"?"skateboard-products":"rollerskate-products",y={bearings:c(`/data/${d}/bearings/${o.bearings_slug}.json`),bushings:c(`/data/${d}/bushings/${o.bushings_slug}.json`),trucks:c(`/data/${d}/trucks/${o.trucks_slug}.json`),wheels:c(`/data/${d}/wheels/${o.wheels_slug}.json`)},m={decks:o.deck_slug?c(`/data/${d}/decks/${o.deck_slug}.json`):null,griptape:o.griptape_slug?c(`/data/${d}/griptape/${o.griptape_slug}.json`):null,rails:o.rails_slug?c(`/data/${d}/rails/${o.rails_slug}.json`):null,risers:o.risers_slug?c(`/data/${d}/risers/${o.risers_slug}.json`):null},i={boots:o.boot_slug?c(`/data/${d}/boots/${o.boot_slug}.json`):null,slideblocks:o.slideblock_slug?c(`/data/${d}/slideblocks/${o.slideblock_slug}.json`):null,plates:o.plates_slug?c(`/data/${d}/plates/${o.plates_slug}.json`):null,toestops:o.toestops_slug?c(`/data/${d}/toestops/${o.toestops_slug}.json`):null};return{...y,...o.build_type==="skateboard"?m:i}}const Ae=Object.freeze(Object.defineProperty({__proto__:null,load:le,prerender:te,ssr:ae},Symbol.toStringTag,{value:"Module"}));var oe=b('<p class="svelte-11fic08"> </p>'),ie=b('<div class="option-container svelte-11fic08"><article class="main svelte-11fic08"><h4 class="highlight large svelte-11fic08"> </h4> <!></article> <aside class="aside aside-1 svelte-11fic08"><input type="checkbox" class="svelte-11fic08"> <label class="svelte-11fic08"> </label></aside></div>');function ce(o,c){ws(c,!1);let d=T(c,"id",8,""),y=T(c,"name",8,""),m=T(c,"label",8,""),i=T(c,"description",8,""),x=T(c,"checked",12,!1),P=T(c,"onChange",8,()=>{});function N(j){P()({id:j.target.id,checked:j.target.checked})}js();var s=ie(),k=r(s),h=r(k),I=r(h,!0);l(h);var J=u(h,2);{var z=j=>{var B=oe(),A=r(B,!0);l(B),V(()=>_(A,i())),v(j,B)};O(J,j=>{i()&&j(z)})}l(k);var K=u(k,2),$=r(K);$s($);var f=u($,2),L=r(f,!0);l(f),l(K),l(s),V(()=>{_(I,m()),p($,"id",d()),p($,"name",y()),p(f,"for",d()),_(L,m())}),Fs($,x),H("change",$,N),v(o,s),ys()}var ue=b('<img alt="Skateboard build" class="build-icon svelte-1cs6wvg">'),ne=b('<img alt="Rollerskate build" class="build-icon svelte-1cs6wvg">'),de=b('<div class="edit-container svelte-1cs6wvg"><button class="edit-button svelte-1cs6wvg">Edit Build</button></div>'),ge=b('<div class="edit-container svelte-1cs6wvg"><button class="edit-button svelte-1cs6wvg">Modify Build</button></div>'),ve=b('<div class="attribute-item svelte-1cs6wvg"><span class="attr-name svelte-1cs6wvg"> </span> <div class="attr-bar-container svelte-1cs6wvg"><div class="attr-bar svelte-1cs6wvg"></div></div></div>'),_e=b('<section class="attributes-section svelte-1cs6wvg"><h2 class="svelte-1cs6wvg">Attributes</h2> <!></section>'),pe=b('<tr class="svelte-1cs6wvg"><td class="svelte-1cs6wvg"><input type="radio" class="svelte-1cs6wvg"></td><td data-label="Vendor" class="svelte-1cs6wvg"><a target="_blank" rel="noopener" class="svelte-1cs6wvg"> </a></td><td data-label="Price" class="svelte-1cs6wvg"> </td></tr>'),be=b('<table class="price-table svelte-1cs6wvg"><thead class="svelte-1cs6wvg"><tr class="svelte-1cs6wvg"><th class="svelte-1cs6wvg">Select</th><th class="svelte-1cs6wvg">Vendor</th><th class="svelte-1cs6wvg">Price</th></tr></thead><tbody class="svelte-1cs6wvg"></tbody></table>'),me=b('<section class="build-section svelte-1cs6wvg"><div class="section-inner svelte-1cs6wvg"><img> <div class="section-info svelte-1cs6wvg"><h2 class="svelte-1cs6wvg"> </h2> <p><a class="svelte-1cs6wvg"><strong> </strong></a> </p> <!></div></div></section>'),ke=b(`<section class="build-section svelte-1cs6wvg"><h2 class="svelte-1cs6wvg">Grand Total</h2> <p class="grand-total svelte-1cs6wvg"> </p> <p class="disclaimer svelte-1cs6wvg">Prices are an estimate. Check to make sure all parts are compatible and the correct size
				before purchasing.</p></section>`),he=b('<div class="container svelte-1cs6wvg"><h1 class="svelte-1cs6wvg"><!> </h1> <p>Created by <a class="svelte-1cs6wvg"> </a></p> <!> <p>This build is designed for <strong><span class="highlight"> </span></strong>.</p> <!> <!> <!> <!></div>');function qe(o,c){ws(c,!1);const[d,y]=Qs(),m=()=>Xs(Ys,"$accountData",d),i=D(),x=D(),P=D(),N=D();let s=T(c,"data",8);const k=s().build.attributes??[];let h=D(!1);function I({id:e,checked:t}){E(h,t)}function J(e){const t=Object.keys(e).find(n=>n!=="url"&&n!=="productVendorUrl");return{vendor:t,price:e[t],url:e.url,productVendorUrl:e.productVendorUrl}}function z(e){const t=e.split("-").pop().trim(),n=parseFloat(t.replace(/[^0-9.]/g,""));return isNaN(n)?0:Math.round(n*100)}const $=[{key:"decks",label:"Deck",slug:s().build.deck_slug},{key:"griptape",label:"griptape",slug:s().build.griptape_slug},{key:"boots",label:"Boots",slug:s().build.boot_slug},{key:"plates",label:"Plates",slug:s().build.plates_slug},{key:"trucks",label:"Trucks",slug:s().build.trucks_slug},{key:"slideblocks",label:"SlideBlocks",slug:s().build.slideblock_slug},{key:"wheels",label:"Wheels",slug:s().build.wheels_slug},{key:"bearings",label:"Bearings",slug:s().build.bearings_slug},{key:"toestops",label:"Toestops",slug:s().build.toestops_slug},{key:"rails",label:"rails",slug:s().build.rails_slug},{key:"risers",label:"risers",slug:s().build.risers_slug},{key:"bushings",label:"Bushings",slug:s().build.bushings_slug}].map(e=>{const t=s().products[e.key];if(!t||!e.slug)return null;const n=t.productPrices.map(J);return{key:e.key,label:e.label,slug:e.slug,productName:t.productName,productBrand:t.productBrand,cloudinaryUrl:t.cloudinaryUrl,vendorPrices:n}}).filter(Boolean),f=D({});$.forEach(e=>{e.vendorPrices.length&&ms(f,a(f)[e.key]=z(e.vendorPrices[0].price))});function L(e,t){ms(f,a(f)[e]=t)}function j(){fs.set({slug:s().build.slug,name:s().build.name,skater_type:[],build_type:s().build.build_type,skating_type:s().build.skating_type,stance:s().build.stance??"",deck_slug:s().build.deck_slug??"",griptape_slug:s().build.griptape_slug??"",risers_slug:s().build.risers_slug??"",boot_slug:s().build.boot_slug??"",toestops_slug:s().build.toestops_slug??"",slideblock_slug:s().build.slideblock_slug??"",rails_slug:s().build.rails_slug??"",plates_slug:s().build.plates_slug??"",trucks_slug:s().build.trucks_slug,bearings_slug:s().build.bearings_slug,wheels_slug:s().build.wheels_slug,bushings_slug:s().build.bushings_slug,attributes:k,owner_username:s().build.owner_username??""}),Zs("/builds/new")}W(()=>m(),()=>{var e;E(i,(e=m())==null?void 0:e.username)}),W(()=>Is(s()),()=>{E(x,s().build.owner_username)}),W(()=>a(f),()=>{E(P,Object.values(a(f)).reduce((e,t)=>e+t,0))}),W(()=>a(P),()=>{E(N,`$${(a(P)/100).toFixed(2)}`)}),Hs(),js();var B=he(),A=r(B),cs=r(A);{var xs=e=>{var t=ue();p(t,"src",se),v(e,t)},Ps=(e,t)=>{{var n=w=>{var g=ne();p(g,"src",ee),v(w,g)};O(e,w=>{s().build.build_type==="rollerskate"&&w(n)},t)}};O(cs,e=>{s().build.build_type==="skateboard"?e(xs):e(Ps,!1)})}var Bs=u(cs);l(A);var Q=u(A,2),X=u(r(Q)),Cs=r(X,!0);l(X),l(Q);var us=u(Q,2);{var Ss=e=>{var t=de(),n=r(t);l(t),H("click",n,j),v(e,t)},Us=e=>{var t=ge(),n=r(t);l(t),H("click",n,j),v(e,t)};O(us,e=>{a(i)===a(x)?e(Ss):e(Us,!1)})}var Y=u(us,2),ns=u(r(Y)),ds=r(ns),Os=r(ds,!0);l(ds),l(ns),ks(),l(Y);var gs=u(Y,2);{var Ts=e=>{var t=_e(),n=u(r(t),2);os(n,1,()=>k,is,(w,g)=>{var C=ve(),S=r(C),Z=r(S,!0);l(S);var M=u(S,2),U=r(M);l(M),l(C),V((G,F)=>{p(C,"data-value",G),_(Z,a(g).name),p(U,"data-color",a(g).value<=.3?"low":a(g).value<=.7?"medium":"high"),Ls(U,`width: ${F??""}%;`)},[()=>`${Math.round(a(g).value*100)}%`,()=>Math.round(a(g).value*100)],hs),v(w,C)}),l(t),v(e,t)};O(gs,e=>{k.length&&e(Ts)})}var vs=u(gs,2);ce(vs,{id:"toggle_prices",name:"toggle_prices",label:"Show Prices",description:"Compare prices.",onChange:I,get checked(){return a(h)},set checked(e){E(h,e)},$$legacy:!0});var _s=u(vs,2);os(_s,1,()=>$,is,(e,t)=>{var n=me(),w=r(n),g=r(w),C=u(g,2),S=r(C),Z=r(S,!0);l(S);var M=u(S,2),U=r(M),G=r(U),F=r(G,!0);l(G),l(U);var Ms=u(U);l(M);var Ds=u(M,2);{var Es=ss=>{var es=be(),ps=u(r(es));os(ps,5,()=>a(t).vendorPrices,is,(zs,q)=>{var ts=pe(),as=r(ts),R=r(as);$s(R),l(as);var ls=u(as),rs=r(ls),As=r(rs,!0);l(rs),l(ls);var bs=u(ls),qs=r(bs,!0);l(bs),l(ts),V(Gs=>{p(R,"name","selected_"+a(t).key),Js(R,Gs),p(rs,"href",a(q).productVendorUrl),_(As,a(q).vendor),_(qs,a(q).price)},[()=>a(f)[a(t).key]===z(a(q).price)],hs),H("change",R,()=>L(a(t).key,z(a(q).price))),v(zs,ts)}),l(ps),l(es),v(ss,es)};O(Ds,ss=>{a(h)&&ss(Es)})}l(C),l(w),l(n),V(()=>{p(g,"src",a(t).cloudinaryUrl),p(g,"alt",a(t).productName),Ks(g,1,`section-image ${a(t).key??""}`,"svelte-1cs6wvg"),_(Z,a(t).label),p(U,"href",`/product/${a(t).key}/${a(t).slug}`),_(F,a(t).productName),_(Ms,`  by ${a(t).productBrand??""}`)}),v(e,n)});var Vs=u(_s,2);{var Ns=e=>{var t=ke(),n=u(r(t),2),w=r(n,!0);l(n),ks(2),l(t),V(()=>_(w,a(N))),v(e,t)};O(Vs,e=>{a(h)&&e(Ns)})}l(B),V(()=>{_(Bs,` ${s().build.name??""}`),p(X,"href",`/profiles/${a(x)}`),_(Cs,a(x)),_(Os,s().build.skating_type)}),v(o,B),ys(),y()}export{qe as component,Ae as universal};
