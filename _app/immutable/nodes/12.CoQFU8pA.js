import{t as x,a as k,n as Ie}from"../chunks/CjWepltc.js";import"../chunks/CTpKGYhS.js";import{al as be,av as $,j as l,c as e,o as v,aw as fe,ao as o,ap as a,an as n,ar as S,am as _e,aq as Pe,b as pe,ai as Ue,aI as Be}from"../chunks/DueBzpoQ.js";import{s as P,e as I}from"../chunks/lHISf35f.js";import{i as V}from"../chunks/D-tWdrT5.js";import{e as q,i as re}from"../chunks/Bws3CwNn.js";import{r as Me,s as B}from"../chunks/Dju2emq_.js";import{s as z}from"../chunks/DzR8BbL1.js";import{t as Oe,f as Ee}from"../chunks/CizEAwrK.js";import{b as qe}from"../chunks/HMpj_zHy.js";import{i as ge}from"../chunks/Cj4OnVxG.js";import{p as me}from"../chunks/ah6MTnGQ.js";import{o as ze}from"../chunks/BlydPtAX.js";import{g as De}from"../chunks/Czk1yrzH.js";import{s as Ge}from"../chunks/rui2Db1X.js";import{n as Le}from"../chunks/C8qMAo0z.js";import{b as Re}from"../chunks/D7vYIUz_.js";const We=!1,Ze=async({fetch:j})=>{const A=await j("/data/skateboard-products/categories.json").then(b=>b.json()),d=await j("/data/rollerskate-products/categories.json").then(b=>b.json());return{skateCats:A,rollerCats:d}},yt=Object.freeze(Object.defineProperty({__proto__:null,load:Ze,prerender:We},Symbol.toStringTag,{value:"Module"}));var Fe=x("<div> </div>"),Je=x('<div class="balance-container svelte-e14myd"><p class="selected-description svelte-e14myd"> </p> <input type="range" min="0" max="1" step="0.01" class="svelte-e14myd"> <div class="slider-labels svelte-e14myd"></div></div>');function Ke(j,A){be(A,!1);const d=v(),b=v(),U=v();let g=v(.5),D=me(A,"onSliderChange",8,()=>{});const f=["Soft (78A–84A)","Hybrid (85A–91A)","Hard (92A–105A)"],c={"Soft (78A–84A)":"Soft – best on rough surfaces.","Hybrid (85A–91A)":"Hybrid – mix of speed & control.","Hard (92A–105A)":"Hard – ideal for street/skatepark."};function C(u){l(g,+u.target.value);const T={value:e(g),bucket:e(b)};D()(T)}$(()=>e(g),()=>{l(d,Math.round(e(g)*(f.length-1)))}),$(()=>e(d),()=>{l(b,f[e(d)].split(" ")[0])}),$(()=>e(d),()=>{l(U,c[f[e(d)]])}),fe(),ge();var m=Je(),h=o(m),H=o(h,!0);a(h);var y=n(h,2);Me(y);var w=n(y,2);q(w,5,()=>f,re,(u,T,M)=>{var N=Fe(),O=o(N,!0);a(N),S(()=>{z(N,1,`label ${M===e(d)?"selected":""}`,"svelte-e14myd"),P(O,e(T))}),k(u,N)}),a(w),a(m),S(()=>P(H,e(U))),Re(y,()=>e(g),u=>l(g,u)),I("input",y,C),k(j,m),_e()}var Qe=x("<button> </button>"),Xe=x('<div class="slider svelte-1llbiw7"><!></div>'),Ye=x('<img class="product-image svelte-1llbiw7">'),et=Ie('<svg viewBox="0 0 64 64" class="placeholder svelte-1llbiw7"><rect width="64" height="64" fill="var(--tertiary-color)"></rect><text x="32" y="36" text-anchor="middle" fill="var(--heading-color)" font-size="12">Image NA</text></svg>'),tt=x('<tr class="svelte-1llbiw7"><td class="svelte-1llbiw7"><a target="_blank" rel="noopener" class="svelte-1llbiw7"> </a></td><td class="svelte-1llbiw7"> </td></tr>'),rt=x('<div class="card svelte-1llbiw7"><div class="product-content svelte-1llbiw7"><!> <p class="name svelte-1llbiw7"> </p></div> <table class="price-table svelte-1llbiw7"><tbody></tbody></table> <!> <div class="buttons svelte-1llbiw7"><button class="build svelte-1llbiw7"><span class="svelte-1llbiw7">Add to Build</span></button> <button class="view svelte-1llbiw7"><span class="svelte-1llbiw7">View</span></button> <!></div> <!></div>'),st=x("<p>Loading…</p>"),at=x('<div class="product-type-nav svelte-1llbiw7"><div class="top-nav svelte-1llbiw7"><button>Skateboard</button> <button>Rollerskate</button></div> <div class="category-nav svelte-1llbiw7"></div> <!></div> <div class="grid svelte-1llbiw7"></div> <div class="sentinel"><!></div>',1);function xt(j,A){be(A,!1);const d=v(),b=v(),U=v();let g=me(A,"data",8);const D=50;let f=v("skateboard"),c=v(""),C=1,m=v([]),h=!0,H=v(!1),y=v(),w,u=v(null);function T(t){l(f,t),M("bearings"),l(u,null),l(m,[]),C=1}async function M(t){l(c,t),l(u,null),l(m,[]),C=1,h=!0,await Be(),N(),O()}function N(){w&&w.disconnect(),w=new IntersectionObserver(([t])=>{t.isIntersecting&&O()},{rootMargin:"200px"}),e(y)&&w.observe(e(y))}async function O(){if(!e(c)||e(H)||!h)return;l(H,!0);const r=`/data/${e(f)==="skateboard"?"skateboard-products":"rollerskate-products"}/${e(c)}-page-${C}.json`;try{const s=await fetch(r);if(s.ok){const i=await s.json();l(m,[...e(m),...i]),C+=1,i.length<D&&(h=!1,w.disconnect())}else h=!1,w.disconnect()}catch(s){console.error("Error loading products:",s),h=!1,w.disconnect()}l(H,!1)}ze(()=>{N()});function we(t){const s={decks:"deck_slug",griptapes:"griptape_slug",risers:"risers_slug",boots:"boot_slug",toestops:"toestops_slug",slideblocks:"slideblock_slug",plates:"plates_slug",trucks:"trucks_slug",bearings:"bearings_slug",wheels:"wheels_slug",bushings:"bushings_slug"}[e(c)];Ge.update(i=>({...i,[s]:t.slug})),Le.send({message:`${t.productName} added to build`,link:"/builds/new",linkText:"see more"})}function ke(t){De(`/product/${e(c)}/${t}`)}function he(t){const r=Object.keys(t).find(s=>s!=="url"&&s!=="productVendorUrl");return{vendor:r,price:t[r],url:t.url,productVendorUrl:t.productVendorUrl}}function G(t){var s;const r=(s=t.productTags)==null?void 0:s.find(i=>i.field==="durometer");return r?parseInt(r.value.replace(/\D/g,""),10):NaN}function ye({bucket:t}){l(u,t)}$(()=>(e(f),Ue(g())),()=>{l(d,e(f)==="skateboard"?g().skateCats:g().rollerCats)}),$(()=>(e(d),e(c)),()=>{e(d).length>0&&!e(c)&&l(c,e(d)[0])}),$(()=>e(m),()=>{l(b,e(m).map(t=>{var r;return{...t,vendorPrices:((r=t.productPrices)==null?void 0:r.map(he))??[],productTags:t.productTags??[]}}))}),$(()=>(e(c),e(b),e(u)),()=>{l(U,e(c)==="wheels"?e(b).filter(t=>{if(!e(u))return!0;const r=G(t);return isNaN(r)?!1:e(u)==="Soft"?r>=78&&r<=84:e(u)==="Hybrid"?r>=85&&r<=91:e(u)==="Hard"?r>=92:!0}).sort((t,r)=>{const s=G(t),i=G(r);return isNaN(s)?1:isNaN(i)?-1:s-i}):e(b))}),fe(),ge();var se=at(),L=Pe(se),R=o(L),W=o(R);let ae;var le=n(W,2);let oe;a(R);var Z=n(R,2);q(Z,5,()=>e(d),re,(t,r)=>{var s=Qe();let i;var E=o(s,!0);a(s),S(K=>{i=z(s,1,"svelte-1llbiw7",null,i,K),P(E,e(r))},[()=>({selected:e(r)===e(c)})],pe),I("click",s,()=>M(e(r))),k(t,s)}),a(Z);var xe=n(Z,2);{var Ae=t=>{var r=Xe(),s=o(r);Ke(s,{onSliderChange:ye}),a(r),k(t,r)};V(xe,t=>{e(c)==="wheels"&&t(Ae)})}a(L);var F=n(L,2);q(F,5,()=>e(U),t=>t.slug,(t,r)=>{var s=rt(),i=o(s),E=o(i);{var K=_=>{var p=Ye();S(()=>{B(p,"src",e(r).cloudinaryUrl),B(p,"alt",e(r).productName),B(p,"width",e(r).imageWidth),B(p,"height",e(r).imageHeight)}),k(_,p)},$e=_=>{var p=et();k(_,p)};V(E,_=>{e(r).cloudinaryUrl?_(K):_($e,!1)})}var ie=n(E,2),je=o(ie,!0);a(ie),a(i);var Q=n(i,2),ne=o(Q);q(ne,5,()=>e(r).vendorPrices,re,(_,p)=>{var Y=tt(),ee=o(Y),te=o(ee),Te=o(te,!0);a(te),a(ee);var ve=n(ee),Ve=o(ve,!0);a(ve),a(Y),S(()=>{B(te,"href",e(p).productVendorUrl||e(p).url),P(Te,e(p).vendor),P(Ve,e(p).price)}),k(_,Y)}),a(ne),a(Q);var de=n(Q,2);V(de,_=>{});var X=n(de,2),ce=o(X),ue=n(ce,2),Ce=n(ue,2);V(Ce,_=>{}),a(X);var He=n(X,2);V(He,_=>{}),a(s),S(()=>P(je,e(r).productName)),I("click",ce,()=>we(e(r))),I("click",ue,()=>ke(e(r).slug)),Oe(1,s,()=>Ee,()=>({duration:200})),k(t,s)}),a(F);var J=n(F,2),Ne=o(J);{var Se=t=>{var r=st();k(t,r)};V(Ne,t=>{e(H)&&t(Se)})}a(J),qe(J,t=>l(y,t),()=>e(y)),S((t,r)=>{ae=z(W,1,"svelte-1llbiw7",null,ae,t),oe=z(le,1,"svelte-1llbiw7",null,oe,r)},[()=>({selected:e(f)==="skateboard"}),()=>({selected:e(f)==="rollerskate"})],pe),I("click",W,()=>T("skateboard")),I("click",le,()=>T("rollerskate")),k(j,se),_e()}export{xt as component,yt as universal};
