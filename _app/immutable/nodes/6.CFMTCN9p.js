import{f as ye}from"../chunks/19TPhq2Y.js";import{t as B,e as A,h as Ge}from"../chunks/D-NZ9KzL.js";import"../chunks/DCITK-8o.js";import{ao as de,ap as we,aq as We,A as f,au as c,ak as G,g as e,as as ce,aw as t,v as l,j as ie,av as n,n as V,az as Se,ay as Ye,ar as Y,aL as xe,ax as He}from"../chunks/e3f4nhTa.js";import{i as pe}from"../chunks/CRf2cdWq.js";import{p as q,s as Ke}from"../chunks/B3wEXMiD.js";import{o as _e}from"../chunks/B-ESMr4Q.js";import{g as Ce}from"../chunks/BvMxNxmo.js";import{d as Qe,e as I,s as Ne}from"../chunks/D5XXxM7T.js";import{i as Q}from"../chunks/FfnKhST-.js";import{e as ue,i as Pe}from"../chunks/4P6XMMIF.js";import{r as H,s as Xe,b as Ze}from"../chunks/BWiI1ZN9.js";import{b as ve,a as $e}from"../chunks/BSCTPwwV.js";import{b as et}from"../chunks/BahgZZN9.js";import{b as tt}from"../chunks/C0WdxZrd.js";import{s as ne}from"../chunks/rQMs5dEI.js";import{a as at}from"../chunks/BAgcxPv8.js";import{g as lt}from"../chunks/s7vDW4Zw.js";const st=!0,ot=async({fetch:g})=>{const u=await ye(g,"skateboard-products/index.json"),x=await ye(g,"rollerskate-products/index.json");return{skateboardProducts:u,rollerskateProducts:x}},Ft=Object.freeze(Object.defineProperty({__proto__:null,load:ot,prerender:st},Symbol.toStringTag,{value:"Module"}));function rt(g,u,x,i,b){l(u,g.target.value),l(x,!0);const r=i().find(E=>E.productName===e(u));b((r==null?void 0:r.slug)||"")}var it=(g,u,x)=>{g.preventDefault(),u(e(x))},nt=(g,u,x)=>{var i,b;g.key==="Enter"?u(e(x)):g.key==="ArrowDown"?(i=g.currentTarget.nextElementSibling)==null||i.focus():g.key==="ArrowUp"&&((b=g.currentTarget.previousElementSibling)==null||b.focus())},ut=B('<li role="option" tabindex="0" class="svelte-1latwr4"> </li>'),vt=B('<ul role="listbox" class="svelte-1latwr4"></ul>'),dt=B('<div class="combobox svelte-1latwr4"><input autocomplete="off" class="svelte-1latwr4"> <!></div>');function N(g,u){de(u,!1);const x=f();let i=q(u,"options",24,()=>[]),b=q(u,"value",12,""),r=q(u,"placeholder",8,"Start typing…"),E=q(u,"onvalue",8,()=>{}),j=f(""),L=f(!1),y=f();_e(()=>{const o=i().find(P=>P.slug===b());o&&l(j,o.productName)});function D(o){b(o),E()(o)}function z(o){l(j,o.productName),D(o.slug),e(y).focus()}we(()=>(ie(i()),ie(b()),e(j),e(y)),()=>{const o=i().find(P=>P.slug===b());o&&o.productName!==e(j)&&document.activeElement!==e(y)&&l(j,o.productName)}),we(()=>(e(j),ie(i())),()=>{l(x,e(j)?i().filter(o=>o.productName.toLowerCase().includes(e(j).toLowerCase())):i())}),We(),pe();var T=dt(),w=c(T);H(w),w.__input=[rt,j,L,i,D],tt(w,o=>l(y,o),()=>e(y));var J=t(w,2);{var M=o=>{var P=vt();ue(P,5,()=>e(x),U=>U.slug,(U,F)=>{var O=ut();O.__mousedown=[it,z,F],O.__keydown=[nt,z,F];var W=c(O,!0);n(O),G(()=>Ne(W,e(F).productName)),A(U,O)}),n(P),A(o,P)};Q(J,o=>{e(L)&&o(M)})}n(T),G(()=>Xe(w,"placeholder",r())),I("focus",w,()=>l(L,!0)),I("blur",w,()=>setTimeout(()=>l(L,!1),150)),ve(w,()=>e(j),o=>l(j,o)),A(g,T),ce()}Qe(["input","mousedown","keydown"]);var ct=B('<label class="svelte-1mjfju1"><input type="radio" required class="svelte-1mjfju1"> </label>'),pt=B("<option>Street</option> <option>Vert</option> <option>Freestyle</option> <option>Park</option> <option>Downhill</option> <option>Cruisin</option>",1),_t=B("<option>Artistic skating</option> <option>Roller dance</option> <option>Speed skating</option> <option>Roller derby</option> <option>Park skating</option> <option>Roller hockey</option>",1),ft=B('<div class="field svelte-1mjfju1"><label class="svelte-1mjfju1">Deck</label> <!></div> <div class="field svelte-1mjfju1"><label class="svelte-1mjfju1">Griptape</label> <!></div> <div class="field svelte-1mjfju1"><label class="svelte-1mjfju1">Rails</label> <!></div> <div class="field svelte-1mjfju1"><label class="svelte-1mjfju1">Risers</label> <!></div>',1),bt=B('<div class="field svelte-1mjfju1"><label class="svelte-1mjfju1">Boot</label> <!></div> <div class="field svelte-1mjfju1"><label class="svelte-1mjfju1">Toestops</label> <!></div> <div class="field svelte-1mjfju1"><label class="svelte-1mjfju1">Slideblocks</label> <!></div> <div class="field svelte-1mjfju1"><label class="svelte-1mjfju1">Plates</label> <!></div>',1),mt=B('<div class="attribute-row svelte-1mjfju1"><input type="text" placeholder="Name" required class="svelte-1mjfju1"> <input class="attribute-slider svelte-1mjfju1" type="range" min="0" max="1" step="0.01"> <button class="removeBtn svelte-1mjfju1" type="button">✕</button></div>'),gt=B('<form class="container svelte-1mjfju1"><div class="field svelte-1mjfju1"><label class="svelte-1mjfju1">Build Name</label> <input required class="svelte-1mjfju1"></div> <div class="field-group svelte-1mjfju1"></div> <div class="field svelte-1mjfju1"><label class="svelte-1mjfju1">Style</label> <select required class="svelte-1mjfju1"><option disabled>Select style</option><!></select></div> <!> <!> <div class="field svelte-1mjfju1"><label class="svelte-1mjfju1">Trucks</label> <!></div> <div class="field svelte-1mjfju1"><label class="svelte-1mjfju1">Bearings</label> <!></div> <div class="field svelte-1mjfju1"><label class="svelte-1mjfju1">Wheels</label> <!></div> <div class="field svelte-1mjfju1"><label class="svelte-1mjfju1">Bushings</label> <!></div> <div class="field svelte-1mjfju1"><label class="svelte-1mjfju1">Stats (max 5)</label> <!> <button type="button" class="add-attr-btn svelte-1mjfju1"><span class="svelte-1mjfju1">+ Add Stat</span></button></div> <button type="submit" class="svelte-1mjfju1"><span>Save Build</span></button></form>');function jt(g,u){de(u,!1);const x=[];let i=q(u,"skateboardProducts",8),b=q(u,"rollerskateProducts",8),r=q(u,"prefill",8),E=q(u,"submit",8),j=f(r().name||"");r().slug;let L=r().skater_type,y=f(r().skating_type),D=f(r().deck_slug),z=f(r().griptape_slug),T=f(r().rails_slug),w=f(r().risers_slug),J=f(r().boot_slug),M=f(r().toestops_slug),o=f(r().slideblock_slug),P=f(r().plates_slug),U=f(r().trucks_slug),F=f(r().bearings_slug),O=f(r().wheels_slug),W=f(r().bushings_slug),m=f(r().build_type||"");const Ae=["skateboard","rollerskate"];let h=f(r().attributes??[]);_e(()=>{const a=e(J)||e(M)||e(o)||e(P);l(m,a?"rollerskate":"skateboard")});async function Be(a){a.preventDefault();const v={name:e(j),build_type:e(m),skater_type:L,skating_type:e(y),deck_slug:e(m)==="skateboard"?e(D):void 0,griptape_slug:e(m)==="skateboard"?e(z):void 0,rails_slug:e(m)==="skateboard"?e(T):void 0,risers_slug:e(m)==="skateboard"?e(w):void 0,boot_slug:e(m)==="rollerskate"?e(J):void 0,toestops_slug:e(m)==="rollerskate"?e(M):void 0,slideblock_slug:e(m)==="rollerskate"?e(o):void 0,plates_slug:e(m)==="rollerskate"?e(P):void 0,trucks_slug:e(U),bearings_slug:e(F),wheels_slug:e(O),bushings_slug:e(W),...e(h).length?{attributes:e(h)}:{}},s=await E()({detail:v});s!=null&&s.slug&&s.slug}const fe=()=>e(h).length<5;function Te(){fe()&&l(h,[...e(h),{name:"",value:.5}])}pe();var K=gt(),X=c(K),be=t(c(X),2);H(be),n(X);var Z=t(X,2);ue(Z,5,()=>Ae,Pe,(a,v)=>{var s=ct(),p=c(s);H(p);var d,k=t(p);n(s),G(_=>{d!==(d=e(v))&&(p.value=(p.__value=e(v))??""),Ne(k,` ${_??""}`)},[()=>e(v).charAt(0).toUpperCase()+e(v).slice(1)],V),$e(x,[],p,()=>(e(v),e(m)),_=>l(m,_)),A(a,s)}),n(Z);var $=t(Z,2),ee=t(c($),2);G(()=>{e(y),Se(()=>{e(m)})});var te=c(ee);te.value=te.__value="";var De=t(te);{var Oe=a=>{var v=pt(),s=Y(v);s.value=s.__value="street";var p=t(s,2);p.value=p.__value="vert";var d=t(p,2);d.value=d.__value="freestyle";var k=t(d,2);k.value=k.__value="park";var _=t(k,2);_.value=_.__value="downhill";var S=t(_,2);S.value=S.__value="cruisin",A(a,v)},Re=a=>{var v=_t(),s=Y(v);s.value=s.__value="artistic skating";var p=t(s,2);p.value=p.__value="roller dance";var d=t(p,2);d.value=d.__value="speed skating";var k=t(d,2);k.value=k.__value="roller derby";var _=t(k,2);_.value=_.__value="park skating";var S=t(_,2);S.value=S.__value="roller hockey",A(a,v)};Q(De,a=>{e(m)==="skateboard"?a(Oe):a(Re,!1)})}n(ee),n($);var me=t($,2);{var qe=a=>{var v=ft(),s=Y(v),p=t(c(s),2);N(p,{get options(){return i().decks},get value(){return e(D)},onvalue:C=>l(D,C),placeholder:"Choose a deck…"}),n(s);var d=t(s,2),k=t(c(d),2);N(k,{get options(){return i().griptape},get value(){return e(z)},onvalue:C=>l(z,C),placeholder:"Choose griptape…"}),n(d);var _=t(d,2),S=t(c(_),2);N(S,{get options(){return i().rails},get value(){return e(T)},onvalue:C=>l(T,C),placeholder:"Choose rails…"}),n(_);var R=t(_,2),re=t(c(R),2);N(re,{get options(){return i().risers},get value(){return e(w)},onvalue:C=>l(w,C),placeholder:"Choose risers…"}),n(R),A(a,v)};Q(me,a=>{e(m)==="skateboard"&&a(qe)})}var ge=t(me,2);{var Ee=a=>{var v=bt(),s=Y(v),p=t(c(s),2);N(p,{get options(){return b().boots},get value(){return e(J)},onvalue:C=>l(J,C),placeholder:"Choose boot…"}),n(s);var d=t(s,2),k=t(c(d),2);N(k,{get options(){return b().toestops},get value(){return e(M)},onvalue:C=>l(M,C),placeholder:"Choose toestops…"}),n(d);var _=t(d,2),S=t(c(_),2);N(S,{get options(){return b().slideblocks},get value(){return e(o)},onvalue:C=>l(o,C),placeholder:"Choose slideblocks…"}),n(_);var R=t(_,2),re=t(c(R),2);N(re,{get options(){return b().plates},get value(){return e(P)},onvalue:C=>l(P,C),placeholder:"Choose plates…"}),n(R),A(a,v)};Q(ge,a=>{e(m)==="rollerskate"&&a(Ee)})}var ae=t(ge,2),Le=t(c(ae),2);const ze=V(()=>e(m)==="skateboard"?i().trucks:b().trucks);N(Le,{get options(){return e(ze)},get value(){return e(U)},onvalue:a=>l(U,a),placeholder:"Choose trucks…"}),n(ae);var le=t(ae,2),Ue=t(c(le),2);const Fe=V(()=>e(m)==="skateboard"?i().bearings:b().bearings);N(Ue,{get options(){return e(Fe)},get value(){return e(F)},onvalue:a=>l(F,a),placeholder:"Choose bearings…"}),n(le);var se=t(le,2),Ie=t(c(se),2);const Je=V(()=>e(m)==="skateboard"?i().wheels:b().wheels);N(Ie,{get options(){return e(Je)},get value(){return e(O)},onvalue:a=>l(O,a),placeholder:"Choose wheels…"}),n(se);var oe=t(se,2),Me=t(c(oe),2);const Ve=V(()=>e(m)==="skateboard"?i().bushings:b().bushings);N(Me,{get options(){return e(Ve)},get value(){return e(W)},onvalue:a=>l(W,a),placeholder:"Choose bushings…"}),n(oe);var je=t(oe,2),ke=t(c(je),2);ue(ke,1,()=>e(h),Pe,(a,v,s)=>{var p=mt(),d=c(p);H(d);var k=t(d,2);H(k);var _=t(k,2);n(p),G(()=>Ze(k,e(v).value)),ve(d,()=>e(v).name,S=>(e(v).name=S,Se(()=>e(h)))),I("input",d,S=>{xe(h,e(h)[s].name=S.currentTarget.value),l(h,[...e(h)])}),I("input",k,S=>{const R=+S.currentTarget.value;xe(h,e(h)[s].value=R),l(h,[...e(h)])}),I("click",_,()=>{l(h,e(h).filter((S,R)=>R!==s))}),A(a,p)});var he=t(ke,2);n(je),Ye(2),n(K),G(a=>he.disabled=a,[()=>!fe()],V),ve(be,()=>e(j),a=>l(j,a)),et(ee,()=>e(y),a=>l(y,a)),I("click",he,Te),I("submit",K,Be),A(g,K),ce()}var kt=B('<meta name="description" content="Start building your own skateboard or rollerskates.">'),ht=B('<h1>Create a New Build</h1> <div class="container"><!></div>',1);function It(g,u){de(u,!1);let x=f({}),i=q(u,"data",8);const b=Ce(ne);_e(()=>{ne.subscribe(y=>{l(x,y||{})})});async function r(y){const D=y.detail,{token:z}=Ce(at),T=await fetch("https://3ee.dev/skatebuild/api/builds/save/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"https://skatebuild.pro",Authorization:"Token "+z},mode:"cors",body:JSON.stringify(D)});if(T.ok){const w=await T.json();ne.set(w),await lt(`/builds/${w.owner_username}/${w.slug}`)}else console.error("Save failed",await T.json())}pe();var E=ht();Ge(y=>{var D=kt();He.title="Build your own Skateboard or Rollerskate",A(y,D)});var j=t(Y(E),2),L=c(j);jt(L,Ke(()=>e(x),{get skateboardProducts(){return i().skateboardProducts},get rollerskateProducts(){return i().rollerskateProducts},prefill:b,submit:r})),n(j),A(g,E),ce()}export{It as component,Ft as universal};
