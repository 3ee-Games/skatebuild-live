import{t as b,b as p,n as Ue,c as De}from"../chunks/DfXK_jSs.js";import"../chunks/DBxjm7Y_.js";import{ak as ye,at as M,v as o,g as e,A as v,au as xe,an as l,am as i,ao as a,ar as $,al as we,aq as fe,j as Ee,n as ae,ap as ke,aO as Fe}from"../chunks/CWOhmV2c.js";import{s as B,e as I}from"../chunks/CwUoD2Kj.js";import{i as A}from"../chunks/DLKYxPPN.js";import{e as oe,i as ge}from"../chunks/CMljKicW.js";import{r as qe,s as V}from"../chunks/C32hVi81.js";import{s as le}from"../chunks/Bde2N4K0.js";import{t as Ge,f as Le}from"../chunks/DbMgvxo3.js";import{b as Re}from"../chunks/D33Jp0k3.js";import{i as Ae}from"../chunks/BtpCMNU_.js";import{p as _e}from"../chunks/BuPKHJej.js";import{o as We}from"../chunks/CA7ktlnG.js";import{g as Ze}from"../chunks/DSm9Ym1j.js";import{s as Je}from"../chunks/D7-f-tgC.js";import{n as Ke}from"../chunks/D9wCr5Al.js";import{h as Qe}from"../chunks/CPRV9u04.js";import{b as Xe}from"../chunks/CAUEGmdr.js";const Ye=!1,et=async({fetch:O})=>{const C=await O("/data/skateboard-products/categories.json").then(_=>_.json()),u=await O("/data/rollerskate-products/categories.json").then(_=>_.json());return{skateCats:C,rollerCats:u}},Pt=Object.freeze(Object.defineProperty({__proto__:null,load:et,prerender:Ye},Symbol.toStringTag,{value:"Module"})),tt="data:image/svg+xml,%3csvg%20style='height:%20512px;%20width:%20512px;'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M0%200h512v512H0z'%20fill='%23d6e010'%20fill-opacity='0'%3e%3c/path%3e%3cg%20class=''%20style=''%20transform='translate(0,0)'%3e%3cpath%20d='M230.844%2047.688c-28.215.083-58.57%202.925-91%208.78C339.666%2041.874%20441.95%20144.504%20495.938%20292.75c0-143.316-92.67-245.57-265.094-245.063zm-2.656%2033.624c-56.703%2022.374-97.407%2081.194-97.407%20150.844%200%2049.006%2020.153%2092.64%2051.845%20122%2022.64%208.588%2046.563%2010.904%2071.406%209.563-26.212-96.096-8.522-185.37%2032.5-271-18.534-6.51-37.96-10.382-58.342-11.407zm-41.844%201.782c-43.318%205.686-90.65%2023.297-142.5%2054.53%2024.987%2097.103%2056.545%20155.038%2092.78%20187.97-15.558-27.26-24.53-59.27-24.53-93.438%200-61.93%2029.422-116.84%2074.25-149.062zm134.156%2025a396.208%20396.208%200%200%201%204.156%2018.844%2028.23%2028.23%200%200%200-5.5-.532c-15.486%200-28.03%2012.55-28.03%2028.03%200%2015.483%2012.544%2028.033%2028.03%2028.033%204.33%200%208.432-.967%2012.094-2.72%203.26%2062.225-9.635%20123.823-41.03%20179.844%2032.597-5.38%2066.42-14.65%20100.78-22.406%2022.463-28.085%2036.094-64.734%2036.094-105.032%200-8.02-.553-15.9-1.594-23.594-31.27-44.417-66.02-78.693-105-100.468zm-301.875%2048.47C36.78%20459.957%20249.36%20479.842%20493.063%20343.717%20306.578%20348.125%20115.88%20532.286%2018.625%20156.56zm427%2082.75c-1.25%2033.993-11.342%2065.633-27.938%2092.28%2023.992-4.595%2048.14-7.793%2072.22-7.813-13.924-30.585-28.636-58.848-44.282-84.467zm41.53%20129.81c-127.06%2079.076-267.344%20111.63-421.03%2039.126%20130.246%20115.856%20342.11%2082.373%20421.03-39.125z'%20fill='%23000000'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e";var st=b("<div> </div>"),rt=b('<div class="balance-container svelte-t04hmu"><button class="close svelte-t04hmu">× Close</button> <p class="selected-description svelte-t04hmu"> </p> <input type="range" min="0" max="1" step="0.01" class="svelte-t04hmu"> <div class="slider-labels svelte-t04hmu"></div></div>');function at(O,C){ye(C,!1);const u=v(),_=v(),q=v();let k=v(.5),ie=_e(C,"onSliderChange",8,()=>{}),U=_e(C,"onClose",8,()=>{});const f=["Soft (78A–84A)","Hybrid (85A–91A)","Hard (92A–105A)"],m={"Soft (78A–84A)":"Soft – best on rough surfaces.","Hybrid (85A–91A)":"Hybrid – mix of speed & control.","Hard (92A–105A)":"Hard – ideal for street/skatepark."};function D(x){o(k,+x.target.value);const w={value:e(k),bucket:e(_)};ie()(w)}M(()=>e(k),()=>{o(u,Math.round(e(k)*(f.length-1)))}),M(()=>e(u),()=>{o(_,f[e(u)].split(" ")[0])}),M(()=>e(u),()=>{o(q,m[f[e(u)]])}),xe(),Ae();var y=rt(),N=l(y),S=i(N,2),E=l(S,!0);a(S);var g=i(S,2);qe(g);var h=i(g,2);oe(h,5,()=>f,ge,(x,w,Q)=>{var j=st(),ne=l(j,!0);a(j),$(()=>{le(j,1,`label ${Q===e(u)?"selected":""}`,"svelte-t04hmu"),B(ne,e(w))}),p(x,j)}),a(h),a(y),$(()=>B(E,e(q))),I("click",N,function(...x){var w;(w=U())==null||w.apply(this,x)}),Xe(g,()=>e(k),x=>o(k,x)),I("input",g,D),p(O,y),we()}var ot=b("<button> </button>"),lt=b('<div class="top-nav svelte-1h6dmsk"><button>Skateboard</button> <button>Rollerskate</button></div> <div class="category-nav svelte-1h6dmsk"></div>',1),it=b('<div class="slider svelte-1h6dmsk"><!></div>'),nt=b('<img class="product-image svelte-1h6dmsk">'),dt=Ue('<svg viewBox="0 0 64 64" class="placeholder svelte-1h6dmsk"><rect width="64" height="64" fill="var(--tertiary-color)"></rect><text x="32" y="36" text-anchor="middle" fill="var(--heading-color)" font-size="12">Image NA</text></svg>'),ct=b('<p class="name svelte-1h6dmsk"><strong>Durometer</strong>: <span class="product-highlight svelte-1h6dmsk"> </span></p>'),ut=b('<tr class="svelte-1h6dmsk"><td class="svelte-1h6dmsk"><a target="_blank" rel="noopener" class="svelte-1h6dmsk"> </a></td><td class="svelte-1h6dmsk"> </td></tr>'),vt=b('<div class="card svelte-1h6dmsk"><div class="product-content svelte-1h6dmsk"><!> <p class="name svelte-1h6dmsk"> </p></div> <!> <table class="price-table svelte-1h6dmsk"><tbody></tbody></table> <!> <div class="buttons svelte-1h6dmsk"><button class="build svelte-1h6dmsk"><img alt="Add to Build" class="svelte-1h6dmsk"> <span class="svelte-1h6dmsk">Add to build</span></button> <button class="view svelte-1h6dmsk"><img alt="View Product" class="svelte-1h6dmsk"> <span class="svelte-1h6dmsk">View</span></button> <!></div> <!></div>'),mt=b("<p>Loading…</p>"),pt=b('<div class="product-type-nav svelte-1h6dmsk"><!> <!></div> <div class="grid svelte-1h6dmsk"></div> <div class="sentinel"><!></div>',1);function Vt(O,C){ye(C,!1);const u=v(),_=v(),q=v();let k=_e(C,"data",8);const ie=50;let U=v(!1),f=v("skateboard"),m=v(""),D=1,y=v([]),N=!0,S=v(!1),E=v(),g,h=v(null);function x(t){o(f,t),e(f)==="skateboard"?w("decks"):w("boots"),o(h,null),o(y,[]),D=1}async function w(t){o(m,t),o(h,null),o(y,[]),D=1,N=!0,o(U,t==="wheels"),await Fe(),Q(),j()}function Q(){g&&g.disconnect(),g=new IntersectionObserver(([t])=>{t.isIntersecting&&j()},{rootMargin:"200px"}),e(E)&&g.observe(e(E))}async function j(){if(!e(m)||e(S)||!N)return;o(S,!0);const s=`/data/${e(f)==="skateboard"?"skateboard-products":"rollerskate-products"}/${e(m)}-page-${D}.json`;try{const r=await fetch(s);if(r.ok){const n=await r.json();o(y,[...e(y),...n]),D+=1,n.length<ie&&(N=!1,g.disconnect())}else N=!1,g.disconnect()}catch(r){console.error("Error loading products:",r),N=!1,g.disconnect()}o(S,!1)}We(()=>{Q()});const ne=new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2});function Ce(t){const r={decks:"deck_slug",griptapes:"griptape_slug",risers:"risers_slug",rails:"rails_slug",boots:"boot_slug",toestops:"toestops_slug",slideblocks:"slideblock_slug",plates:"plates_slug",trucks:"trucks_slug",bearings:"bearings_slug",wheels:"wheels_slug",bushings:"bushings_slug"}[e(m)];Je.update(n=>({...n,[r]:t.slug})),Ke.send({message:`${t.productName} added to build`,link:"/builds/new",linkText:"Preview Build"})}function Ne(t){Ze(`/product/${e(m)}/${t}`)}function Se(t){const s=Object.keys(t).find(r=>r!=="url"&&r!=="productVendorUrl");return{vendor:s,price:t[s],url:t.url,productVendorUrl:t.productVendorUrl}}function de(t){var r;const s=(r=t.productTags)==null?void 0:r.find(n=>n.field==="durometer");return s?parseInt(s.value.replace(/\D/g,""),10):NaN}function Te({bucket:t}){o(h,t)}function $e(){o(U,!1)}M(()=>(e(f),Ee(k())),()=>{o(u,e(f)==="skateboard"?k().skateCats:k().rollerCats)}),M(()=>(e(u),e(m)),()=>{e(u).length>0&&!e(m)&&o(m,e(u)[0])}),M(()=>e(y),()=>{o(_,e(y).map(t=>{var s;return{...t,vendorPrices:((s=t.productPrices)==null?void 0:s.map(Se))??[],productTags:t.productTags??[]}}))}),M(()=>(e(m),e(_),e(h)),()=>{o(q,e(m)==="wheels"?e(_).filter(t=>{if(!e(h))return!0;const s=de(t);return isNaN(s)?!1:e(h)==="Soft"?s>=78&&s<=84:e(h)==="Hybrid"?s>=85&&s<=91:e(h)==="Hard"?s>=92:!0}).sort((t,s)=>{const r=de(t),n=de(s);return isNaN(r)?1:isNaN(n)?-1:r-n}):e(_))}),xe(),Ae();var he=pt(),ce=fe(he),be=l(ce);{var je=t=>{var s=lt(),r=fe(s),n=l(r);let G;var X=i(n,2);let Y;a(r);var L=i(r,2);oe(L,5,()=>e(u),ge,(R,T)=>{var z=ot();let F;var ee=l(z,!0);a(z),$(te=>{F=le(z,1,"svelte-1h6dmsk",null,F,te),B(ee,e(T))},[()=>({selected:e(T)===e(m)})],ae),I("click",z,()=>w(e(T))),p(R,z)}),a(L),$((R,T)=>{G=le(n,1,"svelte-1h6dmsk",null,G,R),Y=le(X,1,"svelte-1h6dmsk",null,Y,T)},[()=>({selected:e(f)==="skateboard"}),()=>({selected:e(f)==="rollerskate"})],ae),I("click",n,()=>x("skateboard")),I("click",X,()=>x("rollerskate")),p(t,s)};A(be,t=>{e(U)||t(je)})}var ze=i(be,2);{var He=t=>{var s=it(),r=l(s);at(r,{onSliderChange:Te,onClose:$e}),a(s),p(t,s)};A(ze,t=>{e(U)&&t(He)})}a(ce);var ue=i(ce,2);oe(ue,5,()=>e(q),t=>t.slug,(t,s)=>{var r=vt(),n=l(r),G=l(n);{var X=d=>{var c=nt();$(()=>{V(c,"src",e(s).cloudinaryUrl),V(c,"alt",e(s).productName),V(c,"width",e(s).imageWidth),V(c,"height",e(s).imageHeight)}),p(d,c)},Y=d=>{var c=dt();p(d,c)};A(G,d=>{e(s).cloudinaryUrl?d(X):d(Y,!1)})}var L=i(G,2),R=l(L,!0);a(L),a(n);var T=i(n,2);{var z=d=>{var c=De(),W=fe(c);{var Z=H=>{var P=ct(),J=i(l(P),2),pe=l(J,!0);a(J),a(P),$(K=>B(pe,K),[()=>e(s).productTags.find(K=>K.field==="durometer").value],ae),p(H,P)};A(W,H=>{e(s).productTags.find(P=>P.field==="durometer")&&H(Z)})}p(d,c)};A(T,d=>{e(s).productTags&&d(z)})}var F=i(T,2),ee=l(F);oe(ee,5,()=>e(s).vendorPrices,ge,(d,c)=>{var W=ut(),Z=l(W),H=l(Z),P=l(H,!0);a(H),a(Z);var J=i(Z),pe=l(J);a(J),a(W),$(K=>{V(H,"href",e(c).productVendorUrl||e(c).url),B(P,e(c).vendor),B(pe,`$${K??""}`)},[()=>ne.format(e(c).price)],ae),p(d,W)}),a(ee),a(F);var te=i(F,2);A(te,d=>{});var me=i(te,2),se=l(me),Be=l(se);V(Be,"src",Qe),ke(2),a(se);var re=i(se,2),Ie=l(re);V(Ie,"src",tt),ke(2),a(re);var Me=i(re,2);A(Me,d=>{}),a(me);var Oe=i(me,2);A(Oe,d=>{}),a(r),$(()=>B(R,e(s).productName)),I("click",se,()=>Ce(e(s))),I("click",re,()=>Ne(e(s).slug)),Ge(1,r,()=>Le,()=>({duration:200})),p(t,r)}),a(ue);var ve=i(ue,2),Pe=l(ve);{var Ve=t=>{var s=mt();p(t,s)};A(Pe,t=>{e(S)&&t(Ve)})}a(ve),Re(ve,t=>o(E,t),()=>e(E)),p(O,he),we()}export{Vt as component,Pt as universal};
