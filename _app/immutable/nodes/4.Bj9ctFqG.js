import{e as Vs}from"../chunks/BDMgGSQe.js";import{g as Ns}from"../chunks/CVqalLBP.js";import{s as ps}from"../chunks/DLr8yegO.js";import{t as $,a as y}from"../chunks/BQoy3Ge-.js";import"../chunks/B7M6h1YL.js";import{ak as vs,ar as U,al as bs,an as i,ao as a,am as c,at as cs,c as t,av as M,aw as Ds,o as B,j as C,ai as Es,ap as ds,b as zs}from"../chunks/DMDxMJuI.js";import{e as ss,s as p}from"../chunks/Cu89BeFu.js";import{i as q}from"../chunks/Don0ab7i.js";import{e as gs,i as _s}from"../chunks/DvU_Ow3H.js";import{r as ks,s as m,b as Ms}from"../chunks/BKRRD-CL.js";import{s as qs}from"../chunks/B1Q4zUy7.js";import{i as ms}from"../chunks/BPuRey6b.js";import{p as x}from"../chunks/CEw7LY8T.js";import{s as Gs,a as Ws}from"../chunks/Ctl3FEfK.js";import{a as As}from"../chunks/C7CmiQTy.js";import{g as Hs}from"../chunks/BfzroPM_.js";import{c as Is}from"../chunks/B_mvQ6aQ.js";const Js=!1,Ks=!1,Ls=async({params:r,fetch:u})=>{const{username:n,slug:k}=r;let _;const o=Ns(ps);if(o.slug===k&&o.owner_username===n)_={name:o.name,slug:o.slug,build_type:o.build_type,skating_type:o.skating_type,deck_slug:o.deck_slug||void 0,griptape_slug:o.griptape_slug||void 0,rails_slug:o.rails_slug||void 0,risers_slug:o.risers_slug||void 0,boot_slug:o.boot_slug||void 0,plates_slug:o.plates_slug||void 0,slideblock_slug:o.slideblock_slug||void 0,toestops_slug:o.toestops_slug||void 0,trucks_slug:o.trucks_slug,bearings_slug:o.bearings_slug,wheels_slug:o.wheels_slug,bushings_slug:o.bushings_slug,owner_username:o.owner_username};else{const s=await u(`/data/builds/${n}/${k}.json`);if(s.ok)_=await s.json();else throw Vs(404,`Build not found: ${n}/${k}`)}const h=Qs(_,u),w=await Promise.all(Object.entries(h).filter(([,s])=>s!==null).map(async([s,v])=>{const f=await v;return f.ok?[s,await f.json()]:[s,null]})),P=Object.fromEntries(w);return{build:_,products:P}};function Qs(r,u){const n=r.build_type==="skateboard"?"skateboard-products":"rollerskate-products",k={bearings:u(`/data/${n}/bearings/${r.bearings_slug}.json`),bushings:u(`/data/${n}/bushings/${r.bushings_slug}.json`),trucks:u(`/data/${n}/trucks/${r.trucks_slug}.json`),wheels:u(`/data/${n}/wheels/${r.wheels_slug}.json`)},_={decks:r.deck_slug?u(`/data/${n}/decks/${r.deck_slug}.json`):null,griptape:r.griptape_slug?u(`/data/${n}/griptape/${r.griptape_slug}.json`):null,rails:r.rails_slug?u(`/data/${n}/rails/${r.rails_slug}.json`):null,risers:r.risers_slug?u(`/data/${n}/risers/${r.risers_slug}.json`):null},o={boots:r.boot_slug?u(`/data/${n}/boots/${r.boot_slug}.json`):null,slideblocks:r.slideblock_slug?u(`/data/${n}/slideblocks/${r.slideblock_slug}.json`):null,plates:r.plates_slug?u(`/data/${n}/plates/${r.plates_slug}.json`):null,toestops:r.toestops_slug?u(`/data/${n}/toestops/${r.toestops_slug}.json`):null};return{...k,...r.build_type==="skateboard"?_:o}}const ye=Object.freeze(Object.defineProperty({__proto__:null,load:Ls,prerender:Js,ssr:Ks},Symbol.toStringTag,{value:"Module"}));var Rs=$('<p class="svelte-11fic08"> </p>'),Xs=$('<div class="option-container svelte-11fic08"><article class="main svelte-11fic08"><h4 class="highlight large svelte-11fic08"> </h4> <!></article> <aside class="aside aside-1 svelte-11fic08"><input type="checkbox" class="svelte-11fic08"> <label class="svelte-11fic08"> </label></aside></div>');function Ys(r,u){vs(u,!1);let n=x(u,"id",8,""),k=x(u,"name",8,""),_=x(u,"label",8,""),o=x(u,"description",8,""),h=x(u,"checked",12,!1),w=x(u,"onChange",8,()=>{});function P(b){w()({id:b.target.id,checked:b.target.checked})}ms();var s=Xs(),v=i(s),f=i(v),G=i(f,!0);a(f);var O=c(f,2);{var es=b=>{var j=Rs(),A=i(j,!0);a(j),U(()=>p(A,o())),y(b,j)};q(O,b=>{o()&&b(es)})}a(v);var S=c(v,2),g=i(S);ks(g);var T=c(g,2),W=i(T,!0);a(T),a(S),a(s),U(()=>{p(G,_()),m(g,"id",n()),m(g,"name",k()),m(T,"for",n()),p(W,_())}),Is(g,h),ss("change",g,P),y(r,s),bs()}var Zs=$('<div class="edit-container svelte-1lii8s4"><button class="edit-button svelte-1lii8s4">Edit Build</button></div>'),Fs=$('<tr class="svelte-1lii8s4"><td class="svelte-1lii8s4"><input type="radio" class="svelte-1lii8s4"></td><td data-label="Vendor" class="svelte-1lii8s4"><a target="_blank" rel="noopener" class="svelte-1lii8s4"> </a></td><td data-label="Price" class="svelte-1lii8s4"> </td></tr>'),se=$('<table class="price-table svelte-1lii8s4"><thead class="svelte-1lii8s4"><tr class="svelte-1lii8s4"><th class="svelte-1lii8s4">Select</th><th class="svelte-1lii8s4">Vendor</th><th class="svelte-1lii8s4">Price</th></tr></thead><tbody class="svelte-1lii8s4"></tbody></table>'),ee=$('<section class="build-section svelte-1lii8s4"><div class="section-inner svelte-1lii8s4"><img> <div class="section-info svelte-1lii8s4"><h2 class="svelte-1lii8s4"> </h2> <p><a class="svelte-1lii8s4"><strong> </strong></a> </p> <!></div></div></section>'),le=$('<section class="build-section svelte-1lii8s4"><h2 class="svelte-1lii8s4">Grand Total</h2> <p class="grand-total svelte-1lii8s4"> </p> <p class="disclaimer svelte-1lii8s4">Prices are an estimate.  Check to make sure all parts are compatible and the correct size before purchasing.</p></section>'),te=$('<div class="container svelte-1lii8s4"><h1 class="svelte-1lii8s4"> </h1> <p>Created by: <a class="svelte-1lii8s4"> </a></p> <!> <p>This build is designed for <strong> </strong>.</p> <!> <!> <!></div>');function $e(r,u){vs(u,!1);const[n,k]=Gs(),_=()=>Ws(As,"$accountData",n),o=B(),h=B(),w=B(),P=B();let s=x(u,"data",8),v=B(!1);function f({id:l,checked:e}){C(v,e)}function G(l){const e=Object.keys(l).find(d=>d!=="url"&&d!=="productVendorUrl");return{vendor:e,price:l[e],url:l.url,productVendorUrl:l.productVendorUrl}}function O(l){const e=l.split("-").pop().trim(),d=parseFloat(e.replace(/[^0-9.]/g,""));return isNaN(d)?0:Math.round(d*100)}const S=[{key:"decks",label:"Deck",slug:s().build.deck_slug},{key:"griptape",label:"griptape",slug:s().build.griptape_slug},{key:"boots",label:"Boots",slug:s().build.boot_slug},{key:"plates",label:"Plates",slug:s().build.plates_slug},{key:"trucks",label:"Trucks",slug:s().build.trucks_slug},{key:"slideblocks",label:"SlideBlocks",slug:s().build.slideblock_slug},{key:"wheels",label:"Wheels",slug:s().build.wheels_slug},{key:"bearings",label:"Bearings",slug:s().build.bearings_slug},{key:"toestops",label:"Toestops",slug:s().build.toestops_slug},{key:"rails",label:"rails",slug:s().build.rails_slug},{key:"risers",label:"risers",slug:s().build.risers_slug},{key:"bushings",label:"Bushings",slug:s().build.bushings_slug}].map(l=>{const e=s().products[l.key];if(!e||!l.slug)return null;const d=e.productPrices.map(G);return{key:l.key,label:l.label,slug:l.slug,productName:e.productName,productBrand:e.productBrand,cloudinaryUrl:e.cloudinaryUrl,vendorPrices:d}}).filter(Boolean),g=B({});S.forEach(l=>{l.vendorPrices.length&&cs(g,t(g)[l.key]=O(l.vendorPrices[0].price))});function T(l,e){cs(g,t(g)[l]=e)}function W(){ps.set({slug:s().build.slug,name:s().build.name,skater_type:[],build_type:[],skating_type:s().build.skating_type,stance:s().build.stance??"",deck_slug:s().build.deck_slug??"",griptape_slug:s().build.griptape_slug??"",risers_slug:s().build.risers_slug??"",boot_slug:s().build.boot_slug??"",toestops_slug:s().build.toestops_slug??"",slideblock_slug:s().build.slideblock_slug??"",rails_slug:s().build.rails_slug??"",plates_slug:s().build.plates_slug??"",trucks_slug:s().build.trucks_slug,bearings_slug:s().build.bearings_slug,wheels_slug:s().build.wheels_slug,bushings_slug:s().build.bushings_slug}),Hs("/builds/new")}M(()=>_(),()=>{var l;C(o,(l=_())==null?void 0:l.username)}),M(()=>Es(s()),()=>{C(h,s().build.owner_username)}),M(()=>t(g),()=>{C(w,Object.values(t(g)).reduce((l,e)=>l+e,0))}),M(()=>t(w),()=>{C(P,`$${(t(w)/100).toFixed(2)}`)}),Ds(),ms();var b=te(),j=i(b),A=i(j);a(j);var H=c(j,2),I=c(i(H)),hs=i(I,!0);a(I),a(H);var ls=c(H,2);{var fs=l=>{var e=Zs(),d=i(e);a(e),ss("click",d,W),y(l,e)};q(ls,l=>{t(o)===t(h)&&l(fs)})}var J=c(ls,2),ts=c(i(J)),ys=i(ts,!0);a(ts),ds(),a(J);var as=c(J,2);Ys(as,{id:"toggle_prices",name:"toggle_prices",label:"Show Prices",description:"Compare prices.",onChange:f,get checked(){return t(v)},set checked(l){C(v,l)},$$legacy:!0});var rs=c(as,2);gs(rs,1,()=>S,_s,(l,e)=>{var d=ee(),N=i(d),D=i(N),is=c(D,2),K=i(is),js=i(K,!0);a(K);var L=c(K,2),E=i(L),os=i(E),xs=i(os,!0);a(os),a(E);var Ps=c(E);a(L);var Bs=c(L,2);{var Cs=Q=>{var R=se(),us=c(i(R));gs(us,5,()=>t(e).vendorPrices,_s,(Us,V)=>{var X=Fs(),Y=i(X),z=i(Y);ks(z),a(Y);var Z=c(Y),F=i(Z),Os=i(F,!0);a(F),a(Z);var ns=c(Z),Ss=i(ns,!0);a(ns),a(X),U(Ts=>{m(z,"name","selected_"+t(e).key),Ms(z,Ts),m(F,"href",t(V).productVendorUrl),p(Os,t(V).vendor),p(Ss,t(V).price)},[()=>t(g)[t(e).key]===O(t(V).price)],zs),ss("change",z,()=>T(t(e).key,O(t(V).price))),y(Us,X)}),a(us),a(R),y(Q,R)};q(Bs,Q=>{t(v)&&Q(Cs)})}a(is),a(N),a(d),U(()=>{m(D,"src",t(e).cloudinaryUrl),m(D,"alt",t(e).productName),qs(D,1,`section-image ${t(e).key??""}`,"svelte-1lii8s4"),p(js,t(e).label),m(E,"href",`/product/${t(e).key}/${t(e).slug}`),p(xs,t(e).productName),p(Ps,`  by ${t(e).productBrand??""}`)}),y(l,d)});var $s=c(rs,2);{var ws=l=>{var e=le(),d=c(i(e),2),N=i(d,!0);a(d),ds(2),a(e),U(()=>p(N,t(P))),y(l,e)};q($s,l=>{t(v)&&l(ws)})}a(b),U(()=>{p(A,`Build: ${s().build.name??""}`),m(I,"href",`/profiles/${t(h)}`),p(hs,t(h)),p(ys,s().build.skating_type)}),y(r,b),bs(),k()}export{$e as component,ye as universal};
