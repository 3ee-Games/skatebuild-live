import{t as $,a as y}from"../chunks/Cbs2TP5J.js";import"../chunks/DppSS1ZK.js";import{ak as ve,ar as O,al as be,am as c,an as r,ao as l,at as ue,c as a,av as q,aw as Te,o as B,j as C,ai as Ne,ap as De,b as Ue}from"../chunks/BQECxIka.js";import{e as ee,s as d}from"../chunks/D7dhJHJ5.js";import{i as z}from"../chunks/BxIlQOsl.js";import{e as ge,i as de}from"../chunks/_x8JZXJS.js";import{r as _e,s as h,b as Ee}from"../chunks/C1JmazWi.js";import{i as pe}from"../chunks/-1FsuQLY.js";import{p as x}from"../chunks/Ct2zQ0GF.js";import{s as Ve,a as Me}from"../chunks/B_XqU4jY.js";import{a as qe}from"../chunks/BMexqwi4.js";import{g as ze}from"../chunks/CR6TSKda.js";import{s as Ge}from"../chunks/CF6V_E0z.js";import{c as We}from"../chunks/BHVgj7FX.js";const Ae=!1,He=async({params:o,fetch:i})=>{const{username:n,slug:k}=o,b=await i(`/data/builds/${n}/${k}.json`);if(!b.ok)throw new Error(`Build not found: ${n}/${k}`);const _=await b.json(),m=Ie(_,i),j=await Promise.all(Object.entries(m).filter(([,e])=>e!==null).map(async([e,v])=>{const f=await v;if(!f.ok)return[e,null];const S=await f.json();return[e,S]})),P=Object.fromEntries(j);return{build:_,products:P}};function Ie(o,i){const n=o.build_type==="skateboard"?"skateboard-products":"rollerskate-products",k={bearings:i(`/data/${n}/bearings/${o.bearings_slug}.json`),bushings:i(`/data/${n}/bushings/${o.bushings_slug}.json`),trucks:i(`/data/${n}/trucks/${o.trucks_slug}.json`),wheels:i(`/data/${n}/wheels/${o.wheels_slug}.json`)},b={decks:o.deck_slug?i(`/data/${n}/decks/${o.deck_slug}.json`):null,griptape:o.griptape_slug?i(`/data/${n}/griptape/${o.griptape_slug}.json`):null,rails:o.rails_slug?i(`/data/${n}/rails/${o.rails_slug}.json`):null,risers:o.risers_slug?i(`/data/${n}/risers/${o.risers_slug}.json`):null},_={boots:o.boot_slug?i(`/data/${n}/boots/${o.boot_slug}.json`):null,slideblocks:o.slideblock_slug?i(`/data/${n}/slideblocks/${o.slideblock_slug}.json`):null,toestops:o.toestops_slug?i(`/data/${n}/toestops/${o.toestops_slug}.json`):null};return{...k,...o.build_type==="skateboard"?b:_}}const bs=Object.freeze(Object.defineProperty({__proto__:null,load:He,prerender:Ae},Symbol.toStringTag,{value:"Module"}));var Je=$('<p class="svelte-11fic08"> </p>'),Ke=$('<div class="option-container svelte-11fic08"><article class="main svelte-11fic08"><h4 class="highlight large svelte-11fic08"> </h4> <!></article> <aside class="aside aside-1 svelte-11fic08"><input type="checkbox" class="svelte-11fic08"> <label class="svelte-11fic08"> </label></aside></div>');function Le(o,i){ve(i,!1);let n=x(i,"id",8,""),k=x(i,"name",8,""),b=x(i,"label",8,""),_=x(i,"description",8,""),m=x(i,"checked",12,!1),j=x(i,"onChange",8,()=>{});function P(p){j()({id:p.target.id,checked:p.target.checked})}pe();var e=Ke(),v=r(e),f=r(v),S=r(f,!0);l(f);var T=c(f,2);{var se=p=>{var w=Je(),W=r(w,!0);l(w),O(()=>d(W,_())),y(p,w)};z(T,p=>{_()&&p(se)})}l(v);var N=c(v,2),g=r(N);_e(g);var D=c(g,2),G=r(D,!0);l(D),l(N),l(e),O(()=>{d(S,b()),h(g,"id",n()),h(g,"name",k()),h(D,"for",n()),d(G,b())}),We(g,m),ee("change",g,P),y(o,e),be()}var Qe=$('<div class="edit-container svelte-hggv5b"><button class="edit-button svelte-hggv5b">Edit Build</button></div>'),Re=$('<tr class="svelte-hggv5b"><td class="svelte-hggv5b"><input type="radio"></td><td data-label="Vendor" class="svelte-hggv5b"><a target="_blank" rel="noopener" class="svelte-hggv5b"> </a></td><td data-label="Price" class="svelte-hggv5b"> </td></tr>'),Xe=$('<table class="price-table svelte-hggv5b"><thead class="svelte-hggv5b"><tr class="svelte-hggv5b"><th class="svelte-hggv5b">Select</th><th class="svelte-hggv5b">Vendor</th><th class="svelte-hggv5b">Price</th></tr></thead><tbody class="svelte-hggv5b"></tbody></table>'),Ye=$('<section class="build-section svelte-hggv5b"><div class="section-inner svelte-hggv5b"><img class="section-image svelte-hggv5b"> <div class="section-info svelte-hggv5b"><h2 class="svelte-hggv5b"> </h2> <p><a class="svelte-hggv5b"><strong> </strong></a> </p> <!></div></div></section>'),Ze=$('<section class="build-section svelte-hggv5b"><h2 class="svelte-hggv5b">Grand Total</h2> <p class="grand-total svelte-hggv5b"> </p></section>'),Fe=$('<div class="container svelte-hggv5b"><h1 class="svelte-hggv5b"> </h1> <p>Created by: <a class="svelte-hggv5b"> </a></p> <!> <!> <p>This build is designed for <strong> </strong>.</p> <!> <!></div>');function _s(o,i){ve(i,!1);const[n,k]=Ve(),b=()=>Me(qe,"$accountData",n),_=B(),m=B(),j=B(),P=B();let e=x(i,"data",8),v=B(!1);function f({id:t,checked:s}){C(v,s)}function S(t){const s=Object.keys(t).find(u=>u!=="url");return{vendor:s,price:t[s],url:t.url}}function T(t){const s=t.split("-").pop().trim(),u=parseFloat(s.replace(/[^0-9.]/g,""));return isNaN(u)?0:Math.round(u*100)}const N=[{key:"decks",label:"Deck",slug:e().build.deck_slug},{key:"boots",label:"Boots",slug:e().build.boot_slug},{key:"trucks",label:"Trucks",slug:e().build.trucks_slug},{key:"wheels",label:"Wheels",slug:e().build.wheels_slug},{key:"bearings",label:"Bearings",slug:e().build.bearings_slug},{key:"bushings",label:"Bushings",slug:e().build.bushings_slug},{key:"plates",label:"Plates",slug:e().build.plates_slug},{key:"toestops",label:"Toestops",slug:e().build.toestops_slug},{key:"slideblocks",label:"SlideBlocks",slug:e().build.slideblock_slug},{key:"rails",label:"rails",slug:e().build.rails_slug}].map(t=>{const s=e().products[t.key];if(!s||!t.slug)return null;const u=s.productPrices.map(S);return{key:t.key,label:t.label,slug:t.slug,productName:s.productName,productBrand:s.productBrand,cloudinaryUrl:s.cloudinaryUrl,vendorPrices:u}}).filter(Boolean),g=B({});N.forEach(t=>{t.vendorPrices.length&&ue(g,a(g)[t.key]=T(t.vendorPrices[0].price))});function D(t,s){ue(g,a(g)[t]=s)}function G(){Ge.set({slug:e().build.slug,name:e().build.name,skater_type:[],build_type:[],skating_type:e().build.skating_type,stance:e().build.stance??"",deck_slug:e().build.deck_slug??"",griptape_slug:e().build.griptape_slug??"",risers_slug:e().build.risers_slug??"",boot_slug:e().build.boot_slug??"",toestops_slug:e().build.toestops_slug??"",slideblock_slug:e().build.slideblock_slug??"",rails_slug:e().build.rails_slug??"",plates_slug:e().build.plates_slug??"",trucks_slug:e().build.trucks_slug,bearings_slug:e().build.bearings_slug,wheels_slug:e().build.wheels_slug,bushings_slug:e().build.bushings_slug}),ze("/builds/new")}q(()=>b(),()=>{var t;C(_,(t=b())==null?void 0:t.username)}),q(()=>Ne(e()),()=>{C(m,e().build.owner_username)}),q(()=>a(g),()=>{C(j,Object.values(a(g)).reduce((t,s)=>t+s,0))}),q(()=>a(j),()=>{C(P,`$${(a(j)/100).toFixed(2)}`)}),Te(),pe();var p=Fe(),w=r(p),W=r(w);l(w);var A=c(w,2),H=c(r(A)),he=r(H,!0);l(H),l(A);var te=c(A,2);{var ke=t=>{var s=Qe(),u=r(s);l(s),ee("click",u,G),y(t,s)};z(te,t=>{a(_)===a(m)&&t(ke)})}var ae=c(te,2);Le(ae,{id:"toggle_prices",name:"toggle_prices",label:"Show Prices",description:"Compare prices.",onChange:f,get checked(){return a(v)},set checked(t){C(v,t)},$$legacy:!0});var I=c(ae,2),le=c(r(I)),me=r(le,!0);l(le),De(),l(I);var re=c(I,2);ge(re,1,()=>N,de,(t,s)=>{var u=Ye(),E=r(u),J=r(E),oe=c(J,2),K=r(oe),$e=r(K,!0);l(K);var L=c(K,2),V=r(L),ie=r(V),je=r(ie,!0);l(ie),l(V);var we=c(V);l(L);var xe=c(L,2);{var Pe=Q=>{var R=Xe(),ne=c(r(R));ge(ne,5,()=>a(s).vendorPrices,de,(Be,U)=>{var X=Re(),Y=r(X),M=r(Y);_e(M),l(Y);var Z=c(Y),F=r(Z),Ce=r(F,!0);l(F),l(Z);var ce=c(Z),Oe=r(ce,!0);l(ce),l(X),O(Se=>{h(M,"name","selected_"+a(s).key),Ee(M,Se),h(F,"href",a(U).url),d(Ce,a(U).vendor),d(Oe,a(U).price)},[()=>a(g)[a(s).key]===T(a(U).price)],Ue),ee("change",M,()=>D(a(s).key,T(a(U).price))),y(Be,X)}),l(ne),l(R),y(Q,R)};z(xe,Q=>{a(v)&&Q(Pe)})}l(oe),l(E),l(u),O(()=>{h(J,"src",a(s).cloudinaryUrl),h(J,"alt",a(s).productName),d($e,a(s).label),h(V,"href",`/product/${a(s).key}/${a(s).slug}`),d(je,a(s).productName),d(we,`  by ${a(s).productBrand??""}`)}),y(t,u)});var fe=c(re,2);{var ye=t=>{var s=Ze(),u=c(r(s),2),E=r(u,!0);l(u),l(s),O(()=>d(E,a(P))),y(t,s)};z(fe,t=>{a(v)&&t(ye)})}l(p),O(()=>{d(W,`Build: ${e().build.name??""}`),h(H,"href",`/profiles/${a(m)}`),d(he,a(m)),d(me,e().build.skating_type)}),y(o,p),be(),k()}export{_s as component,bs as universal};
