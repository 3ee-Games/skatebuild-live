import{t as k,b as m,h as Ge,n as Re}from"../chunks/D1cZUMdF.js";import"../chunks/D6TNQf53.js";import{al as Ce,au as M,v as r,g as e,A as b,av as $e,ap as l,ar as i,aq as o,an as V,ao as je,am as we,as as We,j as Ze,n as re,at as ve,aN as xe}from"../chunks/B4cbvUoc.js";import{s as D,e as K}from"../chunks/A0i425p3.js";import{i as T}from"../chunks/DRCw5_vY.js";import{e as oe,i as pe}from"../chunks/DwaW1LnN.js";import{r as Je,s as J}from"../chunks/D4cNyY6U.js";import{s as le}from"../chunks/CUC9L1c6.js";import{t as Ke,f as Qe}from"../chunks/DRJhL_k5.js";import{b as Xe}from"../chunks/2RKnmeKl.js";import{i as Ae}from"../chunks/BmqVuqWk.js";import{p as be}from"../chunks/LEAZ8age.js";import{s as Ye,a as et}from"../chunks/DzqKT2m8.js";import{o as tt}from"../chunks/DRNR6yPJ.js";import{g as st}from"../chunks/DjkbxQbJ.js";import{p as at}from"../chunks/CUsq8EGT.js";import{s as rt}from"../chunks/C8OrEXdx.js";import{n as ot}from"../chunks/CvkXPAuN.js";import{h as lt}from"../chunks/CPRV9u04.js";import{b as nt}from"../chunks/CQl3pa22.js";const it=!0,ct=async({fetch:E})=>{const U=await E("/data/skateboard-products/categories.json").then(x=>x.json()),A=await E("/data/rollerskate-products/categories.json").then(x=>x.json()),Q=await E("/data/pageCounts.json").then(x=>{if(!x.ok)throw new Error("Could not load pageCounts.json");return x.json()});return{skateCats:U,rollerCats:A,pageCounts:Q}},Wt=Object.freeze(Object.defineProperty({__proto__:null,load:ct,prerender:it},Symbol.toStringTag,{value:"Module"})),dt="data:image/svg+xml,%3csvg%20style='height:%20512px;%20width:%20512px;'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M0%200h512v512H0z'%20fill='%23d6e010'%20fill-opacity='0'%3e%3c/path%3e%3cg%20class=''%20style=''%20transform='translate(0,0)'%3e%3cpath%20d='M230.844%2047.688c-28.215.083-58.57%202.925-91%208.78C339.666%2041.874%20441.95%20144.504%20495.938%20292.75c0-143.316-92.67-245.57-265.094-245.063zm-2.656%2033.624c-56.703%2022.374-97.407%2081.194-97.407%20150.844%200%2049.006%2020.153%2092.64%2051.845%20122%2022.64%208.588%2046.563%2010.904%2071.406%209.563-26.212-96.096-8.522-185.37%2032.5-271-18.534-6.51-37.96-10.382-58.342-11.407zm-41.844%201.782c-43.318%205.686-90.65%2023.297-142.5%2054.53%2024.987%2097.103%2056.545%20155.038%2092.78%20187.97-15.558-27.26-24.53-59.27-24.53-93.438%200-61.93%2029.422-116.84%2074.25-149.062zm134.156%2025a396.208%20396.208%200%200%201%204.156%2018.844%2028.23%2028.23%200%200%200-5.5-.532c-15.486%200-28.03%2012.55-28.03%2028.03%200%2015.483%2012.544%2028.033%2028.03%2028.033%204.33%200%208.432-.967%2012.094-2.72%203.26%2062.225-9.635%20123.823-41.03%20179.844%2032.597-5.38%2066.42-14.65%20100.78-22.406%2022.463-28.085%2036.094-64.734%2036.094-105.032%200-8.02-.553-15.9-1.594-23.594-31.27-44.417-66.02-78.693-105-100.468zm-301.875%2048.47C36.78%20459.957%20249.36%20479.842%20493.063%20343.717%20306.578%20348.125%20115.88%20532.286%2018.625%20156.56zm427%2082.75c-1.25%2033.993-11.342%2065.633-27.938%2092.28%2023.992-4.595%2048.14-7.793%2072.22-7.813-13.924-30.585-28.636-58.848-44.282-84.467zm41.53%20129.81c-127.06%2079.076-267.344%20111.63-421.03%2039.126%20130.246%20115.856%20342.11%2082.373%20421.03-39.125z'%20fill='%23000000'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e";var ut=k("<div> </div>"),vt=k('<div class="balance-container svelte-t04hmu"><button class="close svelte-t04hmu">× Close</button> <p class="selected-description svelte-t04hmu"> </p> <input type="range" min="0" max="1" step="0.01" class="svelte-t04hmu"> <div class="slider-labels svelte-t04hmu"></div></div>');function pt(E,U){Ce(U,!1);const A=b(),Q=b(),x=b();let p=b(.5),L=be(U,"onSliderChange",8,()=>{}),F=be(U,"onClose",8,()=>{});const q=["Soft (78A–84A)","Hybrid (85A–91A)","Hard (92A–105A)"],I={"Soft (78A–84A)":"Soft – best on rough surfaces.","Hybrid (85A–91A)":"Hybrid – mix of speed & control.","Hard (92A–105A)":"Hard – ideal for street/skatepark."};function ae(f){r(p,+f.target.value);const B={value:e(p),bucket:e(Q)};L()(B)}M(()=>e(p),()=>{r(A,Math.round(e(p)*(q.length-1)))}),M(()=>e(A),()=>{r(Q,q[e(A)].split(" ")[0])}),M(()=>e(A),()=>{r(x,I[q[e(A)]])}),$e(),Ae();var C=vt(),z=l(C),v=i(z,2),$=l(v,!0);o(v);var j=i(v,2);Je(j);var N=i(j,2);oe(N,5,()=>q,pe,(f,B,G)=>{var h=ut(),R=l(h,!0);o(h),V(()=>{le(h,1,`label ${G===e(A)?"selected":""}`,"svelte-t04hmu"),D(R,e(B))}),m(f,h)}),o(N),o(C),V(()=>D($,e(x))),K("click",z,function(...f){var B;(B=F())==null||B.apply(this,f)}),nt(j,()=>e(p),f=>r(p,f)),K("input",j,ae),m(E,C),je()}var bt=k('<meta name="description" content="Browse and price products, from skateboards to rollerskates.">'),ft=k('<p class="brand-banner svelte-betbke">Showing all <span class="highlight svelte-betbke"> </span> products</p>'),gt=k("<button> </button>"),mt=k('<div class="category-nav svelte-betbke"></div>'),_t=k('<div class="top-nav svelte-betbke"><button>Skateboard</button> <button>Rollerskate</button></div> <!>',1),kt=k('<div class="slider svelte-betbke"><!></div>'),ht=k('<img class="product-image svelte-betbke">'),yt=Re('<svg viewBox="0 0 64 64" class="placeholder svelte-betbke"><rect width="64" height="64" fill="var(--tertiary-color)"></rect><text x="32" y="36" text-anchor="middle" fill="var(--heading-color)" font-size="12">Image NA</text></svg>'),wt=k('<p class="name svelte-betbke"><strong>Durometer</strong>: <span class="product-highlight svelte-betbke"> </span></p>'),xt=k('<tr class="svelte-betbke"><td class="svelte-betbke"><a target="_blank" rel="noopener" class="svelte-betbke"> </a></td><td class="svelte-betbke"> </td></tr>'),Ct=k('<div class="card svelte-betbke"><div class="product-content svelte-betbke"><!> <p class="name svelte-betbke"> </p></div> <!> <table class="price-table svelte-betbke"><tbody></tbody></table> <!> <div class="buttons svelte-betbke"><button class="build svelte-betbke"><img alt="Add to Build" class="svelte-betbke"><span class="svelte-betbke">Add to build</span></button> <button class="view svelte-betbke"><img alt="View Product" class="svelte-betbke"><span class="svelte-betbke">View</span></button> <!></div> <!></div>'),$t=k("<p>Loading…</p>"),jt=k('<div class="product-type-nav svelte-betbke"><!> <!></div> <div class="grid svelte-betbke"></div> <div class="sentinel"><!></div>',1);function Zt(E,U){Ce(U,!1);const[A,Q]=Ye(),x=()=>et(at,"$page",A),p=b(),L=b(),F=b(),q=b();let I=be(U,"data",8);const ae=50;let C=b(null),z=b("skateboard"),v=b(""),$=b([]),j=1,N=!0,f=b(!1),B=b(),G,h=b(null),R=b(!1);function ne(t){var a;const s=(a=t.productTags)==null?void 0:a.find(c=>c.field==="durometer");return s?+s.value.replace(/\D/g,""):NaN}function Ne(t){const s=Object.keys(t).find(a=>a!=="url"&&a!=="productVendorUrl");return{vendor:s,price:t[s],url:t.url,productVendorUrl:t.productVendorUrl}}const Be=new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2});tt(()=>{e(p)?Pe():fe()});async function Pe(){var a,c,y,W;r(f,!0);const t=[],s=[{type:"skateboard-products",cats:I().skateCats},{type:"rollerskate-products",cats:I().rollerCats}];for(const{type:O,cats:X}of s)for(const H of X){const Y=`/data/${O}/${H}-page-1.json`;let _;try{const n=await fetch(Y);if(!n.ok)continue;_=await n.json()}catch{continue}for(const n of _)((a=n.productBrand)==null?void 0:a.toLowerCase())===e(C)&&t.push({...n,category:H});if(_.length===ae){const n=((y=(c=I().pageCounts)==null?void 0:c[`${O}`])==null?void 0:y[H])??1;if(n>1){const P=[];for(let d=2;d<=n;d++)P.push(`/data/${O}/${H}-page-${d}.json`);const S=await Promise.all(P.map(d=>fetch(d).then(w=>w.ok?w.json():null).catch(()=>null)));for(const d of S)if(d)for(const w of d)((W=w.productBrand)==null?void 0:W.toLowerCase())===e(C)&&t.push({...w,category:H})}}}r($,t),r(f,!1)}function fe(){G==null||G.disconnect(),G=new IntersectionObserver(([t])=>t.isIntersecting&&ge(),{rootMargin:"200px"}),G.observe(e(B))}async function ge(){if(!e(v)||e(f)||!N)return;r(f,!0);const t=e(z)==="skateboard"?"skateboard-products":"rollerskate-products",s=await fetch(`/data/${t}/${e(v)}-page-${j}.json`);if(!s.ok){N=!1,r(f,!1);return}const a=await s.json();r($,[...e($),...a]),N=a.length===ae,j++,r(f,!1)}async function me(t){e(p)&&(r(C,null),r($,[]),j=1,N=!0,r(R,!1)),r(z,t),r(v,""),r(h,null),r($,[]),j=1,N=!0,await xe(),_e(t==="skateboard"?"decks":"boots")}async function _e(t){e(p)&&(r(C,null),r($,[]),j=1,N=!0),r(v,t),r(h,null),r($,[]),j=1,N=!0,r(R,t==="wheels"),await xe(),fe(),ge()}function Se({bucket:t}){r(h,t)}function ze(t){const s={decks:"deck_slug",griptapes:"griptape_slug",risers:"risers_slug",rails:"rails_slug",boots:"boot_slug",toestops:"toestops_slug",slideblocks:"slideblock_slug",plates:"plates_slug",trucks:"trucks_slug",bearings:"bearings_slug",wheels:"wheels_slug",bushings:"bushings_slug"},a=e(v)||t.category,c=s[a];c?(rt.update(y=>({...y,[c]:t.slug})),ot.send({message:`${t.productName} added to build`,link:"/builds/new",linkText:"Preview Build"})):console.warn(`Unknown category for build slot: "${a}"`)}function He(t){const s=t.category??e(v);st(`/product/${s}/${t.slug}`)}M(()=>x(),()=>{var t;r(C,((t=x().url.searchParams.get("brand"))==null?void 0:t.trim().toLowerCase())??null)}),M(()=>e(C),()=>{r(p,!!e(C))}),M(()=>(e(z),Ze(I())),()=>{r(L,e(z)==="skateboard"?I().skateCats:I().rollerCats)}),M(()=>(e(p),e(L),e(v)),()=>{!e(p)&&e(L).length&&!e(v)&&r(v,e(L)[0])}),M(()=>e($),()=>{r(F,e($).map(t=>({...t,vendorPrices:(t.productPrices??[]).map(Ne).sort((s,a)=>s.price-a.price),productTags:t.productTags??[]})))}),M(()=>(e(p),e(F),e(v),e(h)),()=>{r(q,e(p)?e(F):e(v)==="wheels"?e(F).filter(s=>{if(!e(h))return!0;const a=ne(s);return isNaN(a)?!1:e(h)==="Soft"?a>=78&&a<=84:e(h)==="Hybrid"?a>=85&&a<=91:e(h)==="Hard"?a>=92:!0}).sort((s,a)=>{const c=ne(s),y=ne(a);return isNaN(c)?1:isNaN(y)?-1:c-y}):e(F))}),$e(),Ae();var ke=jt();Ge(t=>{var s=bt();We.title="Browse products to build skateboards and rollerskates with.",m(t,s)});var ie=we(ke),he=l(ie);{var Te=t=>{var s=_t(),a=we(s),c=l(a);let y;var W=i(c,2);let O;o(a);var X=i(a,2);{var H=_=>{var n=ft(),P=i(l(n)),S=l(P,!0);o(P),ve(),o(n),V(()=>D(S,e(C))),m(_,n)},Y=_=>{var n=mt();oe(n,5,()=>e(L),pe,(P,S)=>{var d=gt();let w;var ue=l(d,!0);o(d),V(ee=>{w=le(d,1,"svelte-betbke",null,w,ee),D(ue,e(S))},[()=>({selected:e(S)===e(v)})],re),K("click",d,()=>_e(e(S))),m(P,d)}),o(n),m(_,n)};T(X,_=>{e(p)?_(H):_(Y,!1)})}V((_,n)=>{y=le(c,1,"svelte-betbke",null,y,_),O=le(W,1,"svelte-betbke",null,O,n)},[()=>({selected:e(z)==="skateboard"}),()=>({selected:e(z)==="rollerskate"})],re),K("click",c,()=>me("skateboard")),K("click",W,()=>me("rollerskate")),m(t,s)};T(he,t=>{e(R)||t(Te)})}var Ve=i(he,2);{var Me=t=>{var s=kt(),a=l(s);pt(a,{onSliderChange:Se,onClose:()=>r(R,!1)}),o(s),m(t,s)};T(Ve,t=>{e(R)&&t(Me)})}o(ie);var ce=i(ie,2);oe(ce,5,()=>e(q),t=>t.slug,(t,s)=>{var a=Ct(),c=l(a),y=l(c);{var W=g=>{var u=ht();V(()=>{J(u,"src",e(s).cloudinaryUrl),J(u,"alt",e(s).productName),J(u,"width",e(s).imageWidth),J(u,"height",e(s).imageHeight)}),m(g,u)},O=g=>{var u=yt();m(g,u)};T(y,g=>{e(s).cloudinaryUrl?g(W):g(O,!1)})}var X=i(y,2),H=l(X,!0);o(X),o(c);var Y=i(c,2);{var _=g=>{var u=wt(),te=i(l(u),2),se=l(te,!0);o(te),o(u),V(Z=>D(se,Z),[()=>e(s).productTags.find(Z=>Z.field==="durometer").value],re),m(g,u)};T(Y,g=>{e(v)==="wheels"&&e(s).productTags.find(u=>u.field==="durometer")&&g(_)})}var n=i(Y,2),P=l(n);oe(P,5,()=>e(s).vendorPrices,pe,(g,u)=>{var te=xt(),se=l(te),Z=l(se),Le=l(Z,!0);o(Z),o(se);var ye=i(se),Fe=l(ye);o(ye),o(te),V(qe=>{J(Z,"href",e(u).productVendorUrl||e(u).url),D(Le,e(u).vendor),D(Fe,`$${qe??""}`)},[()=>Be.format(e(u).price)],re),m(g,te)}),o(P),o(n);var S=i(n,2);T(S,g=>{});var d=i(S,2),w=l(d),ue=l(w);J(ue,"src",lt),ve(),o(w);var ee=i(w,2),Oe=l(ee);J(Oe,"src",dt),ve(),o(ee);var De=i(ee,2);T(De,g=>{}),o(d);var Ee=i(d,2);T(Ee,g=>{}),o(a),V(()=>D(H,e(s).productName)),K("click",w,()=>ze(e(s))),K("click",ee,()=>He(e(s))),Ke(1,a,()=>Qe,()=>({duration:200})),m(t,a)}),o(ce);var de=i(ce,2),Ue=l(de);{var Ie=t=>{var s=$t();m(t,s)};T(Ue,t=>{e(f)&&t(Ie)})}o(de),Xe(de,t=>r(B,t),()=>e(B)),m(E,ke),je(),Q()}export{Zt as component,Wt as universal};
