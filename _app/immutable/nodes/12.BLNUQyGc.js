import{t as x,b as h,n as Je,c as Ke}from"../chunks/CtZTu4By.js";import"../chunks/CDWt5krY.js";import{ak as Se,at as y,v as a,g as e,A as u,au as Be,an as l,am as i,ao as o,ar as z,al as Ne,aq as _e,j as Qe,n as ne,ap as Pe,aN as Xe}from"../chunks/CJKD5S76.js";import{s as R,e as E}from"../chunks/BbLPYoYc.js";import{i as B}from"../chunks/C8kyZyQg.js";import{e as ie,i as be}from"../chunks/DvTTU5Xd.js";import{r as Ye,s as D}from"../chunks/Cxroz1Nw.js";import{s as de}from"../chunks/DCAjMP5H.js";import{t as et,f as tt}from"../chunks/Bm_VF_Qj.js";import{b as rt}from"../chunks/Br2u3710.js";import{i as je}from"../chunks/Bx-_Ia0P.js";import{p as ke}from"../chunks/Ci853rAn.js";import{s as st,a as at}from"../chunks/JtTExv-t.js";import{o as ot}from"../chunks/CIK-4wyV.js";import{g as ee}from"../chunks/ys-a5J0w.js";import{s as lt}from"../chunks/D7A9f9vv.js";import{n as nt}from"../chunks/ENKgCf05.js";import{p as it}from"../chunks/a3sYF6y4.js";import{h as dt}from"../chunks/CPRV9u04.js";import{b as ct}from"../chunks/D373IDgI.js";const ut=!1,vt=async({fetch:F})=>{const N=await F("/data/skateboard-products/categories.json").then(j=>j.json()),$=await F("/data/rollerskate-products/categories.json").then(j=>j.json());return{skateCats:N,rollerCats:$}},Wt=Object.freeze(Object.defineProperty({__proto__:null,load:vt,prerender:ut},Symbol.toStringTag,{value:"Module"})),mt="data:image/svg+xml,%3csvg%20style='height:%20512px;%20width:%20512px;'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M0%200h512v512H0z'%20fill='%23d6e010'%20fill-opacity='0'%3e%3c/path%3e%3cg%20class=''%20style=''%20transform='translate(0,0)'%3e%3cpath%20d='M230.844%2047.688c-28.215.083-58.57%202.925-91%208.78C339.666%2041.874%20441.95%20144.504%20495.938%20292.75c0-143.316-92.67-245.57-265.094-245.063zm-2.656%2033.624c-56.703%2022.374-97.407%2081.194-97.407%20150.844%200%2049.006%2020.153%2092.64%2051.845%20122%2022.64%208.588%2046.563%2010.904%2071.406%209.563-26.212-96.096-8.522-185.37%2032.5-271-18.534-6.51-37.96-10.382-58.342-11.407zm-41.844%201.782c-43.318%205.686-90.65%2023.297-142.5%2054.53%2024.987%2097.103%2056.545%20155.038%2092.78%20187.97-15.558-27.26-24.53-59.27-24.53-93.438%200-61.93%2029.422-116.84%2074.25-149.062zm134.156%2025a396.208%20396.208%200%200%201%204.156%2018.844%2028.23%2028.23%200%200%200-5.5-.532c-15.486%200-28.03%2012.55-28.03%2028.03%200%2015.483%2012.544%2028.033%2028.03%2028.033%204.33%200%208.432-.967%2012.094-2.72%203.26%2062.225-9.635%20123.823-41.03%20179.844%2032.597-5.38%2066.42-14.65%20100.78-22.406%2022.463-28.085%2036.094-64.734%2036.094-105.032%200-8.02-.553-15.9-1.594-23.594-31.27-44.417-66.02-78.693-105-100.468zm-301.875%2048.47C36.78%20459.957%20249.36%20479.842%20493.063%20343.717%20306.578%20348.125%20115.88%20532.286%2018.625%20156.56zm427%2082.75c-1.25%2033.993-11.342%2065.633-27.938%2092.28%2023.992-4.595%2048.14-7.793%2072.22-7.813-13.924-30.585-28.636-58.848-44.282-84.467zm41.53%20129.81c-127.06%2079.076-267.344%20111.63-421.03%2039.126%20130.246%20115.856%20342.11%2082.373%20421.03-39.125z'%20fill='%23000000'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e";var pt=x("<div> </div>"),ft=x('<div class="balance-container svelte-t04hmu"><button class="close svelte-t04hmu">× Close</button> <p class="selected-description svelte-t04hmu"> </p> <input type="range" min="0" max="1" step="0.01" class="svelte-t04hmu"> <div class="slider-labels svelte-t04hmu"></div></div>');function gt(F,N){Se(N,!1);const $=u(),j=u(),H=u();let d=u(.5),q=ke(N,"onSliderChange",8,()=>{}),te=ke(N,"onClose",8,()=>{});const C=["Soft (78A–84A)","Hybrid (85A–91A)","Hard (92A–105A)"],J={"Soft (78A–84A)":"Soft – best on rough surfaces.","Hybrid (85A–91A)":"Hybrid – mix of speed & control.","Hard (92A–105A)":"Hard – ideal for street/skatepark."};function re(f){a(d,+f.target.value);const g={value:e(d),bucket:e(j)};q()(g)}y(()=>e(d),()=>{a($,Math.round(e(d)*(C.length-1)))}),y(()=>e($),()=>{a(j,C[e($)].split(" ")[0])}),y(()=>e($),()=>{a(H,J[C[e($)]])}),Be(),je();var c=ft(),L=l(c),_=i(L,2),p=l(_,!0);o(_);var P=i(_,2);Ye(P);var k=i(P,2);ie(k,5,()=>C,be,(f,g,G)=>{var b=pt(),A=l(b,!0);o(b),z(()=>{de(b,1,`label ${G===e($)?"selected":""}`,"svelte-t04hmu"),R(A,e(g))}),h(f,b)}),o(k),o(c),z(()=>R(p,e(H))),E("click",L,function(...f){var g;(g=te())==null||g.apply(this,f)}),ct(P,()=>e(d),f=>a(d,f)),E("input",P,re),h(F,c),Ne()}var ht=x("<button> </button>"),_t=x('<div class="top-nav svelte-1h6dmsk"><button>Skateboard</button> <button>Rollerskate</button></div> <div class="category-nav svelte-1h6dmsk"></div>',1),bt=x('<div class="slider svelte-1h6dmsk"><!></div>'),kt=x('<img class="product-image svelte-1h6dmsk">'),wt=Je('<svg viewBox="0 0 64 64" class="placeholder svelte-1h6dmsk"><rect width="64" height="64" fill="var(--tertiary-color)"></rect><text x="32" y="36" text-anchor="middle" fill="var(--heading-color)" font-size="12">Image NA</text></svg>'),yt=x('<p class="name svelte-1h6dmsk"><strong>Durometer</strong>: <span class="product-highlight svelte-1h6dmsk"> </span></p>'),xt=x('<tr class="svelte-1h6dmsk"><td class="svelte-1h6dmsk"><a target="_blank" rel="noopener" class="svelte-1h6dmsk"> </a></td><td class="svelte-1h6dmsk"> </td></tr>'),$t=x('<div class="card svelte-1h6dmsk"><div class="product-content svelte-1h6dmsk"><!> <p class="name svelte-1h6dmsk"> </p></div> <!> <table class="price-table svelte-1h6dmsk"><tbody></tbody></table> <!> <div class="buttons svelte-1h6dmsk"><button class="build svelte-1h6dmsk"><img alt="Add to Build" class="svelte-1h6dmsk"> <span class="svelte-1h6dmsk">Add to build</span></button> <button class="view svelte-1h6dmsk"><img alt="View Product" class="svelte-1h6dmsk"> <span class="svelte-1h6dmsk">View</span></button> <!></div> <!></div>'),Ct=x("<p>Loading…</p>"),At=x('<div class="product-type-nav svelte-1h6dmsk"><!> <!></div> <div class="grid svelte-1h6dmsk"></div> <div class="sentinel"><!></div>',1);function Zt(F,N){Se(N,!1);const[$,j]=st(),H=()=>at(it,"$page",$),d=u(),q=u(),te=u(),C=u();let J=ke(N,"data",8);const re=50;let c=u(null),L=u(!1),_=u("skateboard"),p=u(""),P=1,k=u([]),f=!0,g=u(!1),G=u(),b,A=u(null);function Te(t){if(e(C)){const r=new URL(window.location.href);r.searchParams.delete("brand"),ee(r.pathname+r.search);return}a(_,t),e(_)==="skateboard"?ce("decks"):ce("boots"),a(A,null),a(k,[]),P=1}async function ce(t){if(e(C)){const r=new URL(window.location.href);r.searchParams.delete("brand"),ee(r.pathname+r.search);return}a(p,t),a(A,null),a(k,[]),P=1,f=!0,a(L,t==="wheels"),await Xe(),we(),ye()}function we(){b&&b.disconnect(),b=new IntersectionObserver(([t])=>{t.isIntersecting&&ye()},{rootMargin:"200px"}),e(G)&&b.observe(e(G))}async function ye(){if(!e(p)||e(g)||!f)return;a(g,!0);const r=`/data/${e(_)==="skateboard"?"skateboard-products":"rollerskate-products"}/${e(p)}-page-${P}.json`;try{const s=await fetch(r);if(s.ok){const n=await s.json();a(k,[...e(k),...n]),P+=1,n.length<re&&(f=!1,b.disconnect())}else f=!1,b.disconnect()}catch(s){console.error("Error loading products:",s),f=!1,b.disconnect()}a(g,!1)}ot(()=>{we()});async function xe(){a(g,!0);let t=[];const r=e(_)==="skateboard"?"skateboard-products":"rollerskate-products";for(const s of e(d)){let n=1,w=!0;for(;w;){const W=`/data/${r}/${s}-page-${n}.json`,M=await fetch(W);if(!M.ok)break;const T=await M.json();T.length<re&&(w=!1);for(const S of T)typeof S.productBrand=="string"&&e(c)&&S.productBrand.trim().toLowerCase()===e(c)&&t.push(S);n++}}a(k,t),a(g,!1),console.log("Loaded products for brand:",e(c),e(k).length)}const Ue=new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2});function ze(t){const s={decks:"deck_slug",griptapes:"griptape_slug",risers:"risers_slug",rails:"rails_slug",boots:"boot_slug",toestops:"toestops_slug",slideblocks:"slideblock_slug",plates:"plates_slug",trucks:"trucks_slug",bearings:"bearings_slug",wheels:"wheels_slug",bushings:"bushings_slug"}[e(p)];lt.update(n=>({...n,[s]:t.slug})),nt.send({message:`${t.productName} added to build`,link:"/builds/new",linkText:"Preview Build"})}function He(t){ee(`/product/${e(p)}/${t}`)}function Le(t){const r=Object.keys(t).find(s=>s!=="url"&&s!=="productVendorUrl");return{vendor:r,price:t[r],url:t.url,productVendorUrl:t.productVendorUrl}}function ue(t){var s;const r=(s=t.productTags)==null?void 0:s.find(n=>n.field==="durometer");return r?parseInt(r.value.replace(/\D/g,""),10):NaN}let ve=u(!1);function Me({bucket:t}){a(A,t)}function Ve(){a(L,!1)}function $e(t){if(e(C)){const r=new URL(H().url.href);r.searchParams.delete("brand"),ee(`${r.pathname}${r.search}`,{replaceState:!0});return}Te(t)}function Ie(t){if(e(C)){const r=new URL(H().url.href);r.searchParams.delete("brand"),ee(`${r.pathname}${r.search}`,{replaceState:!0});return}ce(t)}y(()=>H(),()=>{var t;a(c,((t=H().url.searchParams.get("brand"))==null?void 0:t.trim().toLowerCase())??null)}),y(()=>(e(_),Qe(J())),()=>{a(d,e(_)==="skateboard"?J().skateCats:J().rollerCats)}),y(()=>(e(d),e(p)),()=>{e(d).length>0&&!e(p)&&a(p,e(d)[0])}),y(()=>e(k),()=>{a(q,e(k).map(t=>({...t,vendorPrices:(t.productPrices??[]).map(Le).sort((r,s)=>r.price-s.price),productTags:t.productTags??[]})))}),y(()=>(e(p),e(q),e(A),e(c)),()=>{a(te,(()=>{let t=e(p)==="wheels"?e(q).filter(r=>{if(!e(A))return!0;const s=ue(r);return isNaN(s)?!1:e(A)==="Soft"?s>=78&&s<=84:e(A)==="Hybrid"?s>=85&&s<=91:e(A)==="Hard"?s>=92:!0}).sort((r,s)=>{const n=ue(r),w=ue(s);return isNaN(n)?1:isNaN(w)?-1:n-w}):e(q);return e(c)&&(t=t.filter(r=>typeof r.productBrand=="string"&&r.productBrand.trim().toLowerCase()===e(c))),t})())}),y(()=>e(c),()=>{a(C,!!e(c))}),y(()=>(e(c),e(d)),()=>{e(c)&&e(d).length>0&&xe()}),y(()=>(e(ve),e(c),e(d)),()=>{!e(ve)&&e(c)&&e(d).length>0&&(a(ve,!0),xe())}),Be(),je();var Ce=At(),me=_e(Ce),Ae=l(me);{var Oe=t=>{var r=_t(),s=_e(r),n=l(s);let w;var W=i(n,2);let M;o(s);var T=i(s,2);ie(T,5,()=>e(d),be,(S,U)=>{var V=ht();let Z;var se=l(V,!0);o(V),z(ae=>{Z=de(V,1,"svelte-1h6dmsk",null,Z,ae),R(se,e(U))},[()=>({selected:e(U)===e(p)})],ne),E("click",V,()=>Ie(e(U))),h(S,V)}),o(T),z((S,U)=>{w=de(n,1,"svelte-1h6dmsk",null,w,S),M=de(W,1,"svelte-1h6dmsk",null,M,U)},[()=>({selected:e(_)==="skateboard"}),()=>({selected:e(_)==="rollerskate"})],ne),E("click",n,()=>$e("skateboard")),E("click",W,()=>$e("rollerskate")),h(t,r)};B(Ae,t=>{e(L)||t(Oe)})}var De=i(Ae,2);{var Re=t=>{var r=bt(),s=l(r);gt(s,{onSliderChange:Me,onClose:Ve}),o(r),h(t,r)};B(De,t=>{e(L)&&t(Re)})}o(me);var pe=i(me,2);ie(pe,5,()=>e(te),t=>t.slug,(t,r)=>{var s=$t(),n=l(s),w=l(n);{var W=v=>{var m=kt();z(()=>{D(m,"src",e(r).cloudinaryUrl),D(m,"alt",e(r).productName),D(m,"width",e(r).imageWidth),D(m,"height",e(r).imageHeight)}),h(v,m)},M=v=>{var m=wt();h(v,m)};B(w,v=>{e(r).cloudinaryUrl?v(W):v(M,!1)})}var T=i(w,2),S=l(T,!0);o(T),o(n);var U=i(n,2);{var V=v=>{var m=Ke(),K=_e(m);{var Q=I=>{var O=yt(),X=i(l(O),2),he=l(X,!0);o(X),o(O),z(Y=>R(he,Y),[()=>e(r).productTags.find(Y=>Y.field==="durometer").value],ne),h(I,O)};B(K,I=>{e(r).productTags.find(O=>O.field==="durometer")&&I(Q)})}h(v,m)};B(U,v=>{e(r).productTags&&v(V)})}var Z=i(U,2),se=l(Z);ie(se,5,()=>e(r).vendorPrices,be,(v,m)=>{var K=xt(),Q=l(K),I=l(Q),O=l(I,!0);o(I),o(Q);var X=i(Q),he=l(X);o(X),o(K),z(Y=>{D(I,"href",e(m).productVendorUrl||e(m).url),R(O,e(m).vendor),R(he,`$${Y??""}`)},[()=>Ue.format(e(m).price)],ne),h(v,K)}),o(se),o(Z);var ae=i(Z,2);B(ae,v=>{});var ge=i(ae,2),oe=l(ge),qe=l(oe);D(qe,"src",dt),Pe(2),o(oe);var le=i(oe,2),Ge=l(le);D(Ge,"src",mt),Pe(2),o(le);var We=i(le,2);B(We,v=>{}),o(ge);var Ze=i(ge,2);B(Ze,v=>{}),o(s),z(()=>R(S,e(r).productName)),E("click",oe,()=>ze(e(r))),E("click",le,()=>He(e(r).slug)),et(1,s,()=>tt,()=>({duration:200})),h(t,s)}),o(pe);var fe=i(pe,2),Ee=l(fe);{var Fe=t=>{var r=Ct();h(t,r)};B(Ee,t=>{e(g)&&t(Fe)})}o(fe),rt(fe,t=>a(G,t),()=>e(G)),h(F,Ce),Ne(),j()}export{Zt as component,Wt as universal};
