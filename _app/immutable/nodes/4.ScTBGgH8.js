import{e as Re}from"../chunks/CdENCXgv.js";import{g as We}from"../chunks/IxWn49b3.js";import{s as fe}from"../chunks/BVyUmpUc.js";import{t as b,a as _}from"../chunks/DRiVrBMz.js";import"../chunks/BLulYnNU.js";import{ak as ye,ar as V,al as $e,an as r,ao as l,am as n,aw as ke,g as a,at as W,au as He,A as D,v as E,j as Ie,ap as me,n as he}from"../chunks/DGYefiCd.js";import{e as H,s as v}from"../chunks/ByZ5mbbd.js";import{i as O}from"../chunks/CWD507PG.js";import{e as oe,i as ie}from"../chunks/k-lROdaV.js";import{r as we,s as p,b as Je}from"../chunks/BVgT1Vhj.js";import{s as Ke}from"../chunks/DsOQ9nNt.js";import{s as Le}from"../chunks/D-mBL8zO.js";import{i as je}from"../chunks/BoHxMQP1.js";import{p as T}from"../chunks/OZP53ftb.js";import{s as Qe,a as Xe}from"../chunks/DavUG9Pm.js";import{a as Ye}from"../chunks/DjSiL-jg.js";import{g as Ze}from"../chunks/kICkT2C_.js";import{c as Fe}from"../chunks/DEDQ5tvs.js";import{s as es,r as ss}from"../chunks/DqAaAC6z.js";const ts=!1,as=!1,ls=async({params:o,fetch:u})=>{const{username:d,slug:$}=o;let k;const i=We(fe);if(i.slug===$&&i.owner_username===d)k={name:i.name,slug:i.slug,build_type:i.build_type,skating_type:i.skating_type,deck_slug:i.deck_slug||void 0,griptape_slug:i.griptape_slug||void 0,rails_slug:i.rails_slug||void 0,risers_slug:i.risers_slug||void 0,boot_slug:i.boot_slug||void 0,plates_slug:i.plates_slug||void 0,slideblock_slug:i.slideblock_slug||void 0,toestops_slug:i.toestops_slug||void 0,trucks_slug:i.trucks_slug,bearings_slug:i.bearings_slug,wheels_slug:i.wheels_slug,bushings_slug:i.bushings_slug,owner_username:i.owner_username,attributes:i.attributes??[]};else{const e=await u(`/data/builds/${d}/${$}.json`);if(e.ok){const m=await e.json();k={...m,attributes:m.attributes??[]}}else throw Re(404,`Build not found: ${d}/${$}`)}const x=rs(k,u),P=await Promise.all(Object.entries(x).filter(([,e])=>e!==null).map(async([e,m])=>{const h=await m;return h.ok?[e,await h.json()]:[e,null]})),N=Object.fromEntries(P);return{build:k,products:N}};function rs(o,u){const d=o.build_type==="skateboard"?"skateboard-products":"rollerskate-products",$={bearings:u(`/data/${d}/bearings/${o.bearings_slug}.json`),bushings:u(`/data/${d}/bushings/${o.bushings_slug}.json`),trucks:u(`/data/${d}/trucks/${o.trucks_slug}.json`),wheels:u(`/data/${d}/wheels/${o.wheels_slug}.json`)},k={decks:o.deck_slug?u(`/data/${d}/decks/${o.deck_slug}.json`):null,griptape:o.griptape_slug?u(`/data/${d}/griptape/${o.griptape_slug}.json`):null,rails:o.rails_slug?u(`/data/${d}/rails/${o.rails_slug}.json`):null,risers:o.risers_slug?u(`/data/${d}/risers/${o.risers_slug}.json`):null},i={boots:o.boot_slug?u(`/data/${d}/boots/${o.boot_slug}.json`):null,slideblocks:o.slideblock_slug?u(`/data/${d}/slideblocks/${o.slideblock_slug}.json`):null,plates:o.plates_slug?u(`/data/${d}/plates/${o.plates_slug}.json`):null,toestops:o.toestops_slug?u(`/data/${d}/toestops/${o.toestops_slug}.json`):null};return{...$,...o.build_type==="skateboard"?k:i}}const As=Object.freeze(Object.defineProperty({__proto__:null,load:ls,prerender:ts,ssr:as},Symbol.toStringTag,{value:"Module"}));var os=b('<p class="svelte-11fic08"> </p>'),is=b('<div class="option-container svelte-11fic08"><article class="main svelte-11fic08"><h4 class="highlight large svelte-11fic08"> </h4> <!></article> <aside class="aside aside-1 svelte-11fic08"><input type="checkbox" class="svelte-11fic08"> <label class="svelte-11fic08"> </label></aside></div>');function us(o,u){ye(u,!1);let d=T(u,"id",8,""),$=T(u,"name",8,""),k=T(u,"label",8,""),i=T(u,"description",8,""),x=T(u,"checked",12,!1),P=T(u,"onChange",8,()=>{});function N(j){P()({id:j.target.id,checked:j.target.checked})}je();var e=is(),m=r(e),h=r(m),I=r(h,!0);l(h);var J=n(h,2);{var z=j=>{var B=os(),A=r(B,!0);l(B),V(()=>v(A,i())),_(j,B)};O(J,j=>{i()&&j(z)})}l(m);var K=n(m,2),w=r(K);we(w);var f=n(w,2),L=r(f,!0);l(f),l(K),l(e),V(()=>{v(I,k()),p(w,"id",d()),p(w,"name",$()),p(f,"for",d()),v(L,k())}),Fe(w,x),H("change",w,N),_(o,e),$e()}var ns=b('<img alt="Skateboard build" class="build-icon svelte-1ta8k8u">'),cs=b('<img alt="Rollerskate build" class="build-icon svelte-1ta8k8u">'),ds=b('<div class="edit-container svelte-1ta8k8u"><button class="edit-button svelte-1ta8k8u">Edit Build</button></div>'),gs=b('<div class="edit-container svelte-1ta8k8u"><button class="edit-button svelte-1ta8k8u">Modify Build</button></div>'),_s=b('<div class="attribute-item svelte-1ta8k8u"><span class="attr-name svelte-1ta8k8u"> </span> <div class="attr-bar-container svelte-1ta8k8u"><div class="attr-bar svelte-1ta8k8u"></div></div></div>'),vs=b('<section class="attributes-section svelte-1ta8k8u"><h2 class="svelte-1ta8k8u">Attributes</h2> <!></section>'),ps=b('<tr class="svelte-1ta8k8u"><td class="svelte-1ta8k8u"><input type="radio" class="svelte-1ta8k8u"></td><td data-label="Vendor" class="svelte-1ta8k8u"><a target="_blank" rel="noopener" class="svelte-1ta8k8u"> </a></td><td data-label="Price" class="svelte-1ta8k8u"> </td></tr>'),bs=b('<table class="price-table svelte-1ta8k8u"><thead class="svelte-1ta8k8u"><tr class="svelte-1ta8k8u"><th class="svelte-1ta8k8u">Select</th><th class="svelte-1ta8k8u">Vendor</th><th class="svelte-1ta8k8u">Price</th></tr></thead><tbody class="svelte-1ta8k8u"></tbody></table>'),ks=b('<section class="build-section svelte-1ta8k8u"><div class="section-inner svelte-1ta8k8u"><img> <div class="section-info svelte-1ta8k8u"><h2 class="svelte-1ta8k8u"> </h2> <p><a class="svelte-1ta8k8u"><strong> </strong></a> </p> <!></div></div></section>'),ms=b(`<section class="build-section svelte-1ta8k8u"><h2 class="svelte-1ta8k8u">Grand Total</h2> <p class="grand-total svelte-1ta8k8u"> </p> <p class="disclaimer svelte-1ta8k8u">Prices are an estimate. Check to make sure all parts are compatible and the correct size
				before purchasing.</p></section>`),hs=b('<div class="container svelte-1ta8k8u"><h1 class="svelte-1ta8k8u"><!> </h1> <p>Created by <a class="svelte-1ta8k8u"> </a></p> <!> <p>This build is designed for <strong><span class="highlight"> </span></strong>.</p> <!> <!> <!> <!></div>');function qs(o,u){ye(u,!1);const[d,$]=Qe(),k=()=>Xe(Ye,"$accountData",d),i=D(),x=D(),P=D(),N=D();let e=T(u,"data",8);const m=e().build.attributes??[];let h=D(!1);function I({id:s,checked:t}){E(h,t)}function J(s){const t=Object.keys(s).find(c=>c!=="url"&&c!=="productVendorUrl");return{vendor:t,price:s[t],url:s.url,productVendorUrl:s.productVendorUrl}}function z(s){const t=s.split("-").pop().trim(),c=parseFloat(t.replace(/[^0-9.]/g,""));return isNaN(c)?0:Math.round(c*100)}const w=[{key:"decks",label:"Deck",slug:e().build.deck_slug},{key:"griptape",label:"griptape",slug:e().build.griptape_slug},{key:"boots",label:"Boots",slug:e().build.boot_slug},{key:"plates",label:"Plates",slug:e().build.plates_slug},{key:"trucks",label:"Trucks",slug:e().build.trucks_slug},{key:"slideblocks",label:"SlideBlocks",slug:e().build.slideblock_slug},{key:"wheels",label:"Wheels",slug:e().build.wheels_slug},{key:"bearings",label:"Bearings",slug:e().build.bearings_slug},{key:"toestops",label:"Toestops",slug:e().build.toestops_slug},{key:"rails",label:"rails",slug:e().build.rails_slug},{key:"risers",label:"risers",slug:e().build.risers_slug},{key:"bushings",label:"Bushings",slug:e().build.bushings_slug}].map(s=>{const t=e().products[s.key];if(!t||!s.slug)return null;const c=t.productPrices.map(J);return{key:s.key,label:s.label,slug:s.slug,productName:t.productName,productBrand:t.productBrand,cloudinaryUrl:t.cloudinaryUrl,vendorPrices:c}}).filter(Boolean),f=D({});w.forEach(s=>{s.vendorPrices.length&&ke(f,a(f)[s.key]=z(s.vendorPrices[0].price))});function L(s,t){ke(f,a(f)[s]=t)}function j(){fe.set({slug:e().build.slug,name:e().build.name,skater_type:[],build_type:e().build.build_type,skating_type:e().build.skating_type,stance:e().build.stance??"",deck_slug:e().build.deck_slug??"",griptape_slug:e().build.griptape_slug??"",risers_slug:e().build.risers_slug??"",boot_slug:e().build.boot_slug??"",toestops_slug:e().build.toestops_slug??"",slideblock_slug:e().build.slideblock_slug??"",rails_slug:e().build.rails_slug??"",plates_slug:e().build.plates_slug??"",trucks_slug:e().build.trucks_slug,bearings_slug:e().build.bearings_slug,wheels_slug:e().build.wheels_slug,bushings_slug:e().build.bushings_slug,attributes:m,owner_username:e().build.owner_username??""}),Ze("/builds/new")}W(()=>k(),()=>{var s;E(i,(s=k())==null?void 0:s.username)}),W(()=>Ie(e()),()=>{E(x,e().build.owner_username)}),W(()=>a(f),()=>{E(P,Object.values(a(f)).reduce((s,t)=>s+t,0))}),W(()=>a(P),()=>{E(N,`$${(a(P)/100).toFixed(2)}`)}),He(),je();var B=hs(),A=r(B),ue=r(A);{var xe=s=>{var t=ns();p(t,"src",es),_(s,t)},Pe=(s,t)=>{{var c=y=>{var g=cs();p(g,"src",ss),_(y,g)};O(s,y=>{e().build.build_type==="rollerskate"&&y(c)},t)}};O(ue,s=>{e().build.build_type==="skateboard"?s(xe):s(Pe,!1)})}var Be=n(ue);l(A);var Q=n(A,2),X=n(r(Q)),Ce=r(X,!0);l(X),l(Q);var ne=n(Q,2);{var Se=s=>{var t=ds(),c=r(t);l(t),H("click",c,j),_(s,t)},Ue=s=>{var t=gs(),c=r(t);l(t),H("click",c,j),_(s,t)};O(ne,s=>{a(i)===a(x)?s(Se):s(Ue,!1)})}var Y=n(ne,2),ce=n(r(Y)),de=r(ce),Oe=r(de,!0);l(de),l(ce),me(),l(Y);var ge=n(Y,2);{var Te=s=>{var t=vs(),c=n(r(t),2);oe(c,1,()=>m,ie,(y,g)=>{var C=_s(),S=r(C),Z=r(S,!0);l(S);var M=n(S,2),U=r(M);l(M),l(C),V((G,F)=>{p(C,"data-value",G),v(Z,a(g).name),p(U,"data-color",a(g).value<=.3?"low":a(g).value<=.7?"medium":"high"),Le(U,`width: ${F??""}%;`)},[()=>`${Math.round(a(g).value*100)}%`,()=>Math.round(a(g).value*100)],he),_(y,C)}),l(t),_(s,t)};O(ge,s=>{m.length&&s(Te)})}var _e=n(ge,2);us(_e,{id:"toggle_prices",name:"toggle_prices",label:"Show Prices",description:"Compare prices.",onChange:I,get checked(){return a(h)},set checked(s){E(h,s)},$$legacy:!0});var ve=n(_e,2);oe(ve,1,()=>w,ie,(s,t)=>{var c=ks(),y=r(c),g=r(y),C=n(g,2),S=r(C),Z=r(S,!0);l(S);var M=n(S,2),U=r(M),G=r(U),F=r(G,!0);l(G),l(U);var Me=n(U);l(M);var De=n(M,2);{var Ee=ee=>{var se=bs(),pe=n(r(se));oe(pe,5,()=>a(t).vendorPrices,ie,(ze,q)=>{var te=ps(),ae=r(te),R=r(ae);we(R),l(ae);var le=n(ae),re=r(le),Ae=r(re,!0);l(re),l(le);var be=n(le),qe=r(be,!0);l(be),l(te),V(Ge=>{p(R,"name","selected_"+a(t).key),Je(R,Ge),p(re,"href",a(q).productVendorUrl),v(Ae,a(q).vendor),v(qe,a(q).price)},[()=>a(f)[a(t).key]===z(a(q).price)],he),H("change",R,()=>L(a(t).key,z(a(q).price))),_(ze,te)}),l(pe),l(se),_(ee,se)};O(De,ee=>{a(h)&&ee(Ee)})}l(C),l(y),l(c),V(()=>{p(g,"src",a(t).cloudinaryUrl),p(g,"alt",a(t).productName),Ke(g,1,`section-image ${a(t).key??""}`,"svelte-1ta8k8u"),v(Z,a(t).label),p(U,"href",`/product/${a(t).key}/${a(t).slug}`),v(F,a(t).productName),v(Me,`  by ${a(t).productBrand??""}`)}),_(s,c)});var Ve=n(ve,2);{var Ne=s=>{var t=ms(),c=n(r(t),2),y=r(c,!0);l(c),me(2),l(t),V(()=>v(y,a(N))),_(s,t)};O(Ve,s=>{a(h)&&s(Ne)})}l(B),V(()=>{v(Be,` ${e().build.name??""}`),p(X,"href",`/profiles/${a(x)}`),v(Ce,a(x)),v(Oe,e().build.skating_type)}),_(o,B),$e(),$()}export{qs as component,As as universal};
