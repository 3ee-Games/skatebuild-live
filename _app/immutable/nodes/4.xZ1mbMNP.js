import{e as Ue}from"../chunks/DSu5cDGF.js";import{t as g,e as n,h as We}from"../chunks/D5sV2v-t.js";import"../chunks/D8N2IpKH.js";import{ao as Ce,ak as T,as as Ve,au as l,av as r,aw as u,aG as $e,g as a,ap as de,aq as Ye,ar as He,A as ee,ax as Qe,v as se,j as Xe,ay as Se,n as me}from"../chunks/KsHbyUNR.js";import{e as pe,s as _}from"../chunks/-k1GO34d.js";import{i as z}from"../chunks/CtV-pIfB.js";import{e as ce,i as ne}from"../chunks/DoBij9eO.js";import{r as Te,s as p,a as Ze}from"../chunks/BPQtVfJb.js";import{s as es}from"../chunks/CTRqQ_l3.js";import{s as ss}from"../chunks/B3q9EVP-.js";import{i as De}from"../chunks/BAI0Ud4A.js";import{p as E}from"../chunks/DZQkes7P.js";import{s as ts,a as as}from"../chunks/CPBfQeIv.js";import{a as rs}from"../chunks/1h2pWYcr.js";import{g as ls}from"../chunks/CUghD6rR.js";import{s as is}from"../chunks/ZoJKLrrX.js";import{c as os}from"../chunks/DOAI4MeL.js";import{s as us,r as ds}from"../chunks/DqAaAC6z.js";import{L as cs}from"../chunks/BFLYwxZO.js";const ns=!1,ps={deck:"decks",griptape:"griptape",risers:"risers",rails:"rails",boot:"boots",toestops:"toestops",slideblock:"slideblocks",plates:"plates",trucks:"trucks",bearings:"bearings",wheels:"wheels",bushings:"bushings"},gs=async({params:te,fetch:k})=>{var $,x,M,m,A,O,b,F,S,d,C,K;const{username:P,slug:D}=te,j=`https://3ee.dev/skatebuild/api/builds/?owner=${P}&slug=${D}`,U=await k(j);if(!U.ok)throw Ue(404,`Build not found: ${P}/${D}`);const w=await U.json();if(w.results.length===0)throw Ue(404,`Build not found: ${P}/${D}`);const o=w.results[0],G={name:o.name,slug:o.slug,skating_type:o.skating_type,build_type:o.build_type,deck_slug:($=o.deck)==null?void 0:$.slug,griptape_slug:(x=o.griptape)==null?void 0:x.slug,rails_slug:(M=o.rails)==null?void 0:M.slug,risers_slug:(m=o.risers)==null?void 0:m.slug,boot_slug:(A=o.boot)==null?void 0:A.slug,plates_slug:(O=o.plates)==null?void 0:O.slug,slideblock_slug:(b=o.slideblock)==null?void 0:b.slug,toestops_slug:(F=o.toestops)==null?void 0:F.slug,trucks_slug:(S=o.trucks)==null?void 0:S.slug,bearings_slug:(d=o.bearings)==null?void 0:d.slug,wheels_slug:(C=o.wheels)==null?void 0:C.slug,bushings_slug:(K=o.bushings)==null?void 0:K.slug,owner:o.owner,attributes:o.attributes??[]},e={};for(const[ge,re]of Object.entries(ps)){const N=o[ge];N&&(e[re]={id:N.id,productName:N.name,productBrand:N.brand,cloudinaryUrl:N.image_url,productPrices:N.prices.map(L=>({[L.vendor.name]:L.price,url:L.product_url,productVendorUrl:L.vendor.website}))})}return{build:G,products:e}},Ws=Object.freeze(Object.defineProperty({__proto__:null,load:gs,prerender:ns},Symbol.toStringTag,{value:"Module"}));var bs=g('<p class="svelte-11fic08"> </p>'),vs=g('<div class="option-container svelte-11fic08"><article class="main svelte-11fic08"><h4 class="highlight large svelte-11fic08"> </h4> <!></article> <aside class="aside aside-1 svelte-11fic08"><input type="checkbox" class="svelte-11fic08"> <label class="svelte-11fic08"> </label></aside></div>');function _s(te,k){Ce(k,!1);let P=E(k,"id",8,""),D=E(k,"name",8,""),j=E(k,"label",8,""),U=E(k,"description",8,""),w=E(k,"checked",12,!1),o=E(k,"onChange",8,()=>{});function G(d){o()({id:d.target.id,checked:d.target.checked})}De();var e=vs(),$=l(e),x=l($),M=l(x,!0);r(x);var m=u(x,2);{var A=d=>{var C=bs(),K=l(C,!0);r(C),T(()=>_(K,U())),n(d,C)};z(m,d=>{U()&&d(A)})}r($);var O=u($,2),b=l(O);Te(b);var F=u(b,2),S=l(F,!0);r(F),r(O),r(e),T(()=>{_(M,j()),p(b,"id",P()),p(b,"name",D()),p(F,"for",P()),_(S,j())}),os(b,w),pe("change",b,G),n(te,e),Ve()}var ks=g('<meta name="description">'),ms=g('<img alt="Skateboard build" class="build-icon svelte-1030u8k">'),hs=g('<img alt="Rollerskate build" class="build-icon svelte-1030u8k">'),fs=g('<div class="edit-container svelte-1030u8k"><button class="edit-button svelte-1030u8k">Edit Build</button></div>'),ys=g('<div class="edit-container svelte-1030u8k"><button class="edit-button svelte-1030u8k">Modify Build</button></div>'),ws=g('<div class="attribute-item svelte-1030u8k"><span class="attr-name svelte-1030u8k"> </span> <div class="attr-bar-container svelte-1030u8k"><div class="attr-bar svelte-1030u8k"></div></div></div>'),xs=g('<section class="attributes-section svelte-1030u8k"><h2 class="svelte-1030u8k">Stats</h2> <!></section>'),Ns=g('<tr class="svelte-1030u8k"><td class="svelte-1030u8k"><input type="radio" class="svelte-1030u8k"></td><td data-label="Vendor" class="svelte-1030u8k"><a target="_blank" rel="noopener" class="svelte-1030u8k"> </a></td><td data-label="Price" class="svelte-1030u8k"> </td></tr>'),Bs=g('<table class="price-table svelte-1030u8k"><thead class="svelte-1030u8k"><tr class="svelte-1030u8k"><th class="svelte-1030u8k">Select</th><th class="svelte-1030u8k">Vendor</th><th class="svelte-1030u8k">Price</th></tr></thead><tbody class="svelte-1030u8k"></tbody></table>'),Ps=g('<section class="build-section svelte-1030u8k"><div class="section-inner svelte-1030u8k"><img> <div class="section-info svelte-1030u8k"><h2 class="svelte-1030u8k"> </h2> <p><a class="svelte-1030u8k"><strong> </strong></a> </p> <!></div></div></section>'),Us=g(`<section class="build-section svelte-1030u8k"><h2 class="svelte-1030u8k">Grand Total</h2> <p class="grand-total svelte-1030u8k"> </p> <p class="disclaimer svelte-1030u8k">Prices are an estimate. Check to make sure all parts are compatible and the correct size
				before purchasing.</p></section>`),$s=g('<!> <div class="container svelte-1030u8k"><h1 class="svelte-1030u8k"><!> </h1> <p>Created by <a class="svelte-1030u8k"> </a></p> <!> <p>This build is designed for <strong><span class="highlight"> </span></strong>.</p> <!> <!> <!> <!></div>',1);function Ys(te,k){Ce(k,!1);const[P,D]=ts(),j=()=>as(rs,"$accountData",P),U=ee(),w=ee(),o=ee(),G=ee();let e=E(k,"data",8);const $=e().build.owner?`${e().build.owner}'s custom ${e().build.build_type} build | SkateBuild.pro`:"Build Your Skate",x=new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),M=e().build.attributes??[];let m=ee(!1);function A({Rolleventid:t,checked:s}){se(m,s)}function O(t){const s=Object.keys(t).find(i=>i!=="url"&&i!=="productVendorUrl");return{vendor:s,price:t[s],url:t.url,productVendorUrl:t.productVendorUrl}}function b(t){const s=t.split("-").pop().trim(),i=parseFloat(s.replace(/[^0-9.]/g,""));return isNaN(i)?0:Math.round(i*100)}const S=[{key:"decks",label:"Deck",slug:e().build.deck_slug},{key:"griptape",label:"griptape",slug:e().build.griptape_slug},{key:"boots",label:"Boots",slug:e().build.boot_slug},{key:"plates",label:"Plates",slug:e().build.plates_slug},{key:"trucks",label:"Trucks",slug:e().build.trucks_slug},{key:"slideblocks",label:"SlideBlocks",slug:e().build.slideblock_slug},{key:"wheels",label:"Wheels",slug:e().build.wheels_slug},{key:"bearings",label:"Bearings",slug:e().build.bearings_slug},{key:"toestops",label:"Toestops",slug:e().build.toestops_slug},{key:"rails",label:"rails",slug:e().build.rails_slug},{key:"risers",label:"risers",slug:e().build.risers_slug},{key:"bushings",label:"Bushings",slug:e().build.bushings_slug}].map(t=>{const s=e().products[t.key];if(!s||!t.slug)return null;const i=s.productPrices.map(O);return{key:t.key,label:t.label,slug:t.slug,productName:s.productName,productBrand:s.productBrand,cloudinaryUrl:s.cloudinaryUrl,vendorPrices:i}}).filter(Boolean),d=ee({});S.forEach(t=>{t.vendorPrices.length&&$e(d,a(d)[t.key]=b(t.vendorPrices[0].price))});function C(t,s){$e(d,a(d)[t]=s)}function K(){var s,i,v,c,h,f,I,B,y,R,J,le,ie,oe,W,Y,ae,ue,V,H,Q,q,X,Z;const t={name:e().build.name||"",slug:e().build.slug||"",build_type:e().build.build_type||"",skater_type:e().build.skater_type||[],skating_type:e().build.skating_type||"",stance:e().build.stance||"",owner:e().build.owner||"",attributes:e().build.attributes||[],deck_slug:e().build.deck_slug||"",deck_id:((s=e().products.decks)==null?void 0:s.id)||"",deck_name:((i=e().products.decks)==null?void 0:i.productName)||"",griptape_slug:e().build.griptape_slug||"",griptape_id:((v=e().products.griptape)==null?void 0:v.id)||"",griptape_name:((c=e().products.griptape)==null?void 0:c.productName)||"",risers_slug:e().build.risers_slug||"",risers_id:((h=e().products.risers)==null?void 0:h.id)||"",risers_name:((f=e().products.risers)==null?void 0:f.productName)||"",rails_slug:e().build.rails_slug||"",rails_id:((I=e().products.rails)==null?void 0:I.id)||"",rails_name:((B=e().products.rails)==null?void 0:B.productName)||"",boot_slug:e().build.boot_slug||"",boot_id:((y=e().products.boots)==null?void 0:y.id)||"",boot_name:((R=e().products.boots)==null?void 0:R.productName)||"",toestops_slug:e().build.toestops_slug||"",toestops_id:((J=e().products.toestops)==null?void 0:J.id)||"",toestops_name:((le=e().products.toestops)==null?void 0:le.productName)||"",slideblock_slug:e().build.slideblock_slug||"",slideblock_id:((ie=e().products.slideblocks)==null?void 0:ie.id)||"",slideblock_name:((oe=e().products.slideblocks)==null?void 0:oe.productName)||"",plates_slug:e().build.plates_slug||"",plates_id:((W=e().products.plates)==null?void 0:W.id)||"",plates_name:((Y=e().products.plates)==null?void 0:Y.productName)||"",trucks_slug:e().build.trucks_slug||"",trucks_id:((ae=e().products.trucks)==null?void 0:ae.id)||"",trucks_name:((ue=e().products.trucks)==null?void 0:ue.productName)||"",bearings_slug:e().build.bearings_slug||"",bearings_id:((V=e().products.bearings)==null?void 0:V.id)||"",bearings_name:((H=e().products.bearings)==null?void 0:H.productName)||"",wheels_slug:e().build.wheels_slug||"",wheels_id:((Q=e().products.wheels)==null?void 0:Q.id)||"",wheels_name:((q=e().products.wheels)==null?void 0:q.productName)||"",bushings_slug:e().build.bushings_slug||"",bushings_id:((X=e().products.bushings)==null?void 0:X.id)||"",bushings_name:((Z=e().products.bushings)==null?void 0:Z.productName)||""};is.set(t),ls("/builds/new")}function ge(t){return{productBrand:t.productBrand,productName:t.productName,cloudinaryUrl:t.cloudinaryUrl,productPrices:t.vendorPrices.map(s=>({[s.vendor]:s.price,url:s.url,productVendorUrl:s.productVendorUrl}))}}de(()=>j(),()=>{var t;se(U,(t=j())==null?void 0:t.username)}),de(()=>Xe(e()),()=>{se(w,e().build.owner)}),de(()=>a(d),()=>{se(o,Object.values(a(d)).reduce((t,s)=>t+s,0))}),de(()=>a(o),()=>{se(G,`$${x.format(a(o)/100)}`)}),Ye(),De();var re=$s();We(t=>{var s=ks();Qe.title=$,T(()=>p(s,"content",`Check out ${e().build.owner??""}'s custom ${e().build.build_type??""} build and prices.`)),n(t,s)});var N=He(re);ce(N,1,()=>S,ne,(t,s)=>{const i=me(()=>ge(a(s)));cs(t,{get product(){return a(i)}})});var L=u(N,2),be=l(L),he=l(be);{var je=t=>{var s=ms();p(s,"src",us),n(t,s)},Me=(t,s)=>{{var i=v=>{var c=hs();p(c,"src",ds),n(v,c)};z(t,v=>{e().build.build_type==="rollerskate"&&v(i)},s)}};z(he,t=>{e().build.build_type==="skateboard"?t(je):t(Me,!1)})}var Oe=u(he);r(be);var ve=u(be,2),_e=u(l(ve)),Fe=l(_e,!0);r(_e),r(ve);var fe=u(ve,2);{var Ke=t=>{var s=fs(),i=l(s);r(s),pe("click",i,K),n(t,s)},Le=t=>{var s=ys(),i=l(s);r(s),pe("click",i,K),n(t,s)};z(fe,t=>{a(U)===a(w)?t(Ke):t(Le,!1)})}var ke=u(fe,2),ye=u(l(ke)),we=l(ye),Re=l(we,!0);r(we),r(ye),Se(),r(ke);var xe=u(ke,2);{var qe=t=>{var s=xs(),i=u(l(s),2);ce(i,1,()=>M,ne,(v,c)=>{var h=ws(),f=l(h),I=l(f,!0);r(f);var B=u(f,2),y=l(B);r(B),r(h),T((R,J)=>{p(h,"data-value",R),_(I,a(c).name),p(y,"data-color",a(c).value<=.3?"low":a(c).value<=.7?"medium":"high"),ss(y,`width: ${J??""}%;`)},[()=>`${Math.round(a(c).value*100)}%`,()=>Math.round(a(c).value*100)],me),n(v,h)}),r(s),n(t,s)};z(xe,t=>{M.length&&t(qe)})}var Ne=u(xe,2);_s(Ne,{id:"toggle_prices",name:"toggle_prices",label:"Show Prices",description:"Compare prices.",onChange:A,get checked(){return a(m)},set checked(t){se(m,t)},$$legacy:!0});var Be=u(Ne,2);ce(Be,1,()=>S,ne,(t,s)=>{var i=Ps(),v=l(i),c=l(v),h=u(c,2),f=l(h),I=l(f,!0);r(f);var B=u(f,2),y=l(B),R=l(y),J=l(R,!0);r(R),r(y);var le=u(y);r(B);var ie=u(B,2);{var oe=W=>{var Y=Bs(),ae=u(l(Y));ce(ae,5,()=>a(s).vendorPrices,ne,(ue,V)=>{var H=Ns(),Q=l(H),q=l(Q);Te(q),r(Q);var X=u(Q),Z=l(X),Ge=l(Z,!0);r(Z),r(X);var Pe=u(X),Ae=l(Pe);r(Pe),r(H),T((Ie,Je)=>{p(q,"name","selected_"+a(s).key),Ze(q,Ie),p(Z,"href",a(V).productVendorUrl),_(Ge,a(V).vendor),_(Ae,`$${Je??""}`)},[()=>a(d)[a(s).key]===b(a(V).price),()=>x.format(a(V).price)],me),pe("change",q,()=>C(a(s).key,b(a(V).price))),n(ue,H)}),r(ae),r(Y),n(W,Y)};z(ie,W=>{a(m)&&W(oe)})}r(h),r(v),r(i),T(()=>{p(c,"src",a(s).cloudinaryUrl),p(c,"alt",a(s).productName),es(c,1,`section-image ${a(s).key??""}`,"svelte-1030u8k"),_(I,a(s).label),p(y,"href",`/product/${a(s).key}/${a(s).slug}`),_(J,a(s).productName),_(le,`  by ${a(s).productBrand??""}`)}),n(t,i)});var ze=u(Be,2);{var Ee=t=>{var s=Us(),i=u(l(s),2),v=l(i,!0);r(i),Se(2),r(s),T(()=>_(v,a(G))),n(t,s)};z(ze,t=>{a(m)&&t(Ee)})}r(L),T(()=>{_(Oe,` ${e().build.name??""}`),p(_e,"href",`/profiles/${a(w)}`),_(Fe,a(w)),_(Re,e().build.skating_type)}),n(te,re),Ve(),D()}export{Ys as component,Ws as universal};
