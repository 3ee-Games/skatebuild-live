import{t as k,a as f,n as Ie,c as Oe}from"../chunks/Dx-AWuap.js";import"../chunks/Mv27xpkS.js";import{al as he,av as O,j as o,c as e,o as u,aw as we,ao as l,an as n,ap as a,ar as T,am as ye,aq as ue,ai as Ue,b as pe,aJ as Be}from"../chunks/ECgdp2bE.js";import{s as P,e as I}from"../chunks/BDdMtU0M.js";import{i as x}from"../chunks/Dfx0-uf8.js";import{e as te,i as fe}from"../chunks/BWdOsspB.js";import{r as Me,s as F}from"../chunks/CKqoVJmm.js";import{s as re}from"../chunks/D-59nY83.js";import{t as De,f as Ee}from"../chunks/DZo1Z8pM.js";import{b as ze}from"../chunks/Bq-XRreQ.js";import{i as qe}from"../chunks/9KCtdIwp.js";import{p as _e}from"../chunks/Rw0NRDTR.js";import{o as Ge}from"../chunks/Cy-VfBq4.js";import{g as Je}from"../chunks/BiAfaEQe.js";import{s as Le}from"../chunks/B3emecIw.js";import{n as Re}from"../chunks/BzDN_9-Z.js";import{b as We}from"../chunks/DM_gnhs5.js";const Ze=!1,Fe=async({fetch:U})=>{const A=await U("/data/skateboard-products/categories.json").then(g=>g.json()),v=await U("/data/rollerskate-products/categories.json").then(g=>g.json());return{skateCats:A,rollerCats:v}},Ct=Object.freeze(Object.defineProperty({__proto__:null,load:Fe,prerender:Ze},Symbol.toStringTag,{value:"Module"}));var Ke=k("<div> </div>"),Qe=k('<div class="balance-container svelte-1tmk4pd"><button class="close svelte-1tmk4pd">× Close</button> <p class="selected-description svelte-1tmk4pd"> </p> <input type="range" min="0" max="1" step="0.01" class="svelte-1tmk4pd"> <div class="slider-labels svelte-1tmk4pd"></div></div>');function Xe(U,A){he(A,!1);const v=u(),g=u(),z=u();let h=u(.5),se=_e(A,"onSliderChange",8,()=>{}),B=_e(A,"onClose",8,()=>{});const b=["Soft (78A–84A)","Hybrid (85A–91A)","Hard (92A–105A)"],p={"Soft (78A–84A)":"Soft – best on rough surfaces.","Hybrid (85A–91A)":"Hybrid – mix of speed & control.","Hard (92A–105A)":"Hard – ideal for street/skatepark."};function M(y){o(h,+y.target.value);const q={value:e(h),bucket:e(g)};se()(q)}O(()=>e(h),()=>{o(v,Math.round(e(h)*(b.length-1)))}),O(()=>e(v),()=>{o(g,b[e(v)].split(" ")[0])}),O(()=>e(v),()=>{o(z,p[b[e(v)]])}),we(),qe();var w=Qe(),C=l(w),N=n(C,2),D=l(N,!0);a(N);var _=n(N,2);Me(_);var m=n(_,2);te(m,5,()=>b,fe,(y,q,K)=>{var j=Ke(),ae=l(j,!0);a(j),T(()=>{re(j,1,`label ${K===e(v)?"selected":""}`,"svelte-1tmk4pd"),P(ae,e(q))}),f(y,j)}),a(m),a(w),T(()=>P(D,e(z))),I("click",C,function(...y){var q;(q=B())==null||q.apply(this,y)}),We(_,()=>e(h),y=>o(h,y)),I("input",_,M),f(U,w),ye()}var Ye=k("<button> </button>"),et=k('<div class="top-nav svelte-weq4o5"><button>Skateboard</button> <button>Rollerskate</button></div> <div class="category-nav svelte-weq4o5"></div>',1),tt=k('<div class="slider svelte-weq4o5"><!></div>'),rt=k('<img class="product-image svelte-weq4o5">'),st=Ie('<svg viewBox="0 0 64 64" class="placeholder svelte-weq4o5"><rect width="64" height="64" fill="var(--tertiary-color)"></rect><text x="32" y="36" text-anchor="middle" fill="var(--heading-color)" font-size="12">Image NA</text></svg>'),at=k('<p class="name svelte-weq4o5"><strong>Durometer</strong>: <span class="product-highlight svelte-weq4o5"> </span></p>'),ot=k('<tr class="svelte-weq4o5"><td class="svelte-weq4o5"><a target="_blank" rel="noopener" class="svelte-weq4o5"> </a></td><td class="svelte-weq4o5"> </td></tr>'),lt=k('<div class="card svelte-weq4o5"><div class="product-content svelte-weq4o5"><!> <p class="name svelte-weq4o5"> </p></div> <!> <table class="price-table svelte-weq4o5"><tbody></tbody></table> <!> <div class="buttons svelte-weq4o5"><button class="build svelte-weq4o5"><span class="svelte-weq4o5">Add to Build</span></button> <button class="view svelte-weq4o5"><span class="svelte-weq4o5">View</span></button> <!></div> <!></div>'),nt=k("<p>Loading…</p>"),it=k('<div class="product-type-nav svelte-weq4o5"><!> <!></div> <div class="grid svelte-weq4o5"></div> <div class="sentinel"><!></div>',1);function Nt(U,A){he(A,!1);const v=u(),g=u(),z=u();let h=_e(A,"data",8);const se=50;let B=u(!1),b=u("skateboard"),p=u(""),M=1,w=u([]),C=!0,N=u(!1),D=u(),_,m=u(null);function y(t){o(b,t),q("bearings"),o(m,null),o(w,[]),M=1}async function q(t){o(p,t),o(m,null),o(w,[]),M=1,C=!0,o(B,t==="wheels"),await Be(),K(),j()}function K(){_&&_.disconnect(),_=new IntersectionObserver(([t])=>{t.isIntersecting&&j()},{rootMargin:"200px"}),e(D)&&_.observe(e(D))}async function j(){if(!e(p)||e(N)||!C)return;o(N,!0);const r=`/data/${e(b)==="skateboard"?"skateboard-products":"rollerskate-products"}/${e(p)}-page-${M}.json`;try{const s=await fetch(r);if(s.ok){const i=await s.json();o(w,[...e(w),...i]),M+=1,i.length<se&&(C=!1,_.disconnect())}else C=!1,_.disconnect()}catch(s){console.error("Error loading products:",s),C=!1,_.disconnect()}o(N,!1)}Ge(()=>{K()});function ae(t){const s={decks:"deck_slug",griptapes:"griptape_slug",risers:"risers_slug",boots:"boot_slug",toestops:"toestops_slug",slideblocks:"slideblock_slug",plates:"plates_slug",trucks:"trucks_slug",bearings:"bearings_slug",wheels:"wheels_slug",bushings:"bushings_slug"}[e(p)];Le.update(i=>({...i,[s]:t.slug})),Re.send({message:`${t.productName} added to build`,link:"/builds/new",linkText:"see more"})}function xe(t){Je(`/product/${e(p)}/${t}`)}function Ae(t){const r=Object.keys(t).find(s=>s!=="url"&&s!=="productVendorUrl");return{vendor:r,price:t[r],url:t.url,productVendorUrl:t.productVendorUrl}}function oe(t){var s;const r=(s=t.productTags)==null?void 0:s.find(i=>i.field==="durometer");return r?parseInt(r.value.replace(/\D/g,""),10):NaN}function Ce({bucket:t}){o(m,t)}function Ne(){o(B,!1)}O(()=>(e(b),Ue(h())),()=>{o(v,e(b)==="skateboard"?h().skateCats:h().rollerCats)}),O(()=>(e(v),e(p)),()=>{e(v).length>0&&!e(p)&&o(p,e(v)[0])}),O(()=>e(w),()=>{o(g,e(w).map(t=>{var r;return{...t,vendorPrices:((r=t.productPrices)==null?void 0:r.map(Ae))??[],productTags:t.productTags??[]}}))}),O(()=>(e(p),e(g),e(m)),()=>{o(z,e(p)==="wheels"?e(g).filter(t=>{if(!e(m))return!0;const r=oe(t);return isNaN(r)?!1:e(m)==="Soft"?r>=78&&r<=84:e(m)==="Hybrid"?r>=85&&r<=91:e(m)==="Hard"?r>=92:!0}).sort((t,r)=>{const s=oe(t),i=oe(r);return isNaN(s)?1:isNaN(i)?-1:s-i}):e(g))}),we(),qe();var ge=it(),le=ue(ge),be=l(le);{var Se=t=>{var r=et(),s=ue(r),i=l(s);let G;var Q=n(i,2);let X;a(s);var J=n(s,2);te(J,5,()=>e(v),fe,(L,S)=>{var H=Ye();let E;var Y=l(H,!0);a(H),T(ee=>{E=re(H,1,"svelte-weq4o5",null,E,ee),P(Y,e(S))},[()=>({selected:e(S)===e(p)})],pe),I("click",H,()=>q(e(S))),f(L,H)}),a(J),T((L,S)=>{G=re(i,1,"svelte-weq4o5",null,G,L),X=re(Q,1,"svelte-weq4o5",null,X,S)},[()=>({selected:e(b)==="skateboard"}),()=>({selected:e(b)==="rollerskate"})],pe),I("click",i,()=>y("skateboard")),I("click",Q,()=>y("rollerskate")),f(t,r)};x(be,t=>{e(B)||t(Se)})}var Te=n(be,2);{var je=t=>{var r=tt(),s=l(r);Xe(s,{onSliderChange:Ce,onClose:Ne}),a(r),f(t,r)};x(Te,t=>{e(B)&&t(je)})}a(le);var ne=n(le,2);te(ne,5,()=>e(z),t=>t.slug,(t,r)=>{var s=lt(),i=l(s),G=l(i);{var Q=d=>{var c=rt();T(()=>{F(c,"src",e(r).cloudinaryUrl),F(c,"alt",e(r).productName),F(c,"width",e(r).imageWidth),F(c,"height",e(r).imageHeight)}),f(d,c)},X=d=>{var c=st();f(d,c)};x(G,d=>{e(r).cloudinaryUrl?d(Q):d(X,!1)})}var J=n(G,2),L=l(J,!0);a(J),a(i);var S=n(i,2);{var H=d=>{var c=Oe(),R=ue(c);{var W=$=>{var V=at(),Z=n(l(V),2),ce=l(Z,!0);a(Z),a(V),T(ve=>P(ce,ve),[()=>e(r).productTags.find(ve=>ve.field==="durometer").value],pe),f($,V)};x(R,$=>{e(r).productTags.find(V=>V.field==="durometer")&&$(W)})}f(d,c)};x(S,d=>{e(r).productTags&&d(H)})}var E=n(S,2),Y=l(E);te(Y,5,()=>e(r).vendorPrices,fe,(d,c)=>{var R=ot(),W=l(R),$=l(W),V=l($,!0);a($),a(W);var Z=n(W),ce=l(Z,!0);a(Z),a(R),T(()=>{F($,"href",e(c).productVendorUrl||e(c).url),P(V,e(c).vendor),P(ce,e(c).price)}),f(d,R)}),a(Y),a(E);var ee=n(E,2);x(ee,d=>{});var de=n(ee,2),me=l(de),ke=n(me,2),Ve=n(ke,2);x(Ve,d=>{}),a(de);var Pe=n(de,2);x(Pe,d=>{}),a(s),T(()=>P(L,e(r).productName)),I("click",me,()=>ae(e(r))),I("click",ke,()=>xe(e(r).slug)),De(1,s,()=>Ee,()=>({duration:200})),f(t,s)}),a(ne);var ie=n(ne,2),He=l(ie);{var $e=t=>{var r=nt();f(t,r)};x(He,t=>{e(N)&&t($e)})}a(ie),ze(ie,t=>o(D,t),()=>e(D)),f(U,ge),ye()}export{Nt as component,Ct as universal};
