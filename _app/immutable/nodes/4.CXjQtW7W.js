import{e as Ve}from"../chunks/DRUg_eTk.js";import{g as Ne}from"../chunks/p4TAE6t7.js";import{s as pe}from"../chunks/DNBAbfuW.js";import{t as $,a as f}from"../chunks/DlkhF8oK.js";import"../chunks/EjCBkgEC.js";import{ak as ve,ar as U,al as he,an as o,ao as l,am as c,at as ce,c as a,av as M,aw as De,o as B,j as C,ai as Ee,ap as de,b as ze}from"../chunks/C0pMS_NW.js";import{e as ee,s as p}from"../chunks/CerNdXsT.js";import{i as q}from"../chunks/BxYCF4iI.js";import{e as ge,i as _e}from"../chunks/CkxMZ-dh.js";import{r as be,s as k,b as Me}from"../chunks/BWyzu0uw.js";import{s as qe}from"../chunks/DBrj8tcN.js";import{i as ke}from"../chunks/B0TJ0SRJ.js";import{p as x}from"../chunks/DXK58P_H.js";import{s as Ge,a as We}from"../chunks/B-rBlwe9.js";import{a as Ae}from"../chunks/Ci-Y1J--.js";import{g as He}from"../chunks/biEAIm_m.js";import{c as Ie}from"../chunks/GbXSKhJq.js";const Je=!1,Ke=!1,Le=async({params:r,fetch:i})=>{const{username:n,slug:b}=r;let _;const u=Ne(pe);if(u.slug===b&&u.owner_username===n)_={name:u.name,slug:u.slug,build_type:u.build_type,skating_type:u.skating_type,deck_slug:u.deck_slug||void 0,griptape_slug:u.griptape_slug||void 0,rails_slug:u.rails_slug||void 0,risers_slug:u.risers_slug||void 0,boot_slug:u.boot_slug||void 0,plates_slug:u.plates_slug||void 0,slideblock_slug:u.slideblock_slug||void 0,toestops_slug:u.toestops_slug||void 0,trucks_slug:u.trucks_slug,bearings_slug:u.bearings_slug,wheels_slug:u.wheels_slug,bushings_slug:u.bushings_slug,owner_username:u.owner_username};else{const e=await i(`/data/builds/${n}/${b}.json`);if(e.ok)_=await e.json();else throw Ve(404,`Build not found: ${n}/${b}`)}const y=Qe(_,i),w=await Promise.all(Object.entries(y).filter(([,e])=>e!==null).map(async([e,v])=>{const m=await v;return m.ok?[e,await m.json()]:[e,null]})),P=Object.fromEntries(w);return{build:_,products:P}};function Qe(r,i){const n=r.build_type==="skateboard"?"skateboard-products":"rollerskate-products",b={bearings:i(`/data/${n}/bearings/${r.bearings_slug}.json`),bushings:i(`/data/${n}/bushings/${r.bushings_slug}.json`),trucks:i(`/data/${n}/trucks/${r.trucks_slug}.json`),wheels:i(`/data/${n}/wheels/${r.wheels_slug}.json`)},_={decks:r.deck_slug?i(`/data/${n}/decks/${r.deck_slug}.json`):null,griptape:r.griptape_slug?i(`/data/${n}/griptape/${r.griptape_slug}.json`):null,rails:r.rails_slug?i(`/data/${n}/rails/${r.rails_slug}.json`):null,risers:r.risers_slug?i(`/data/${n}/risers/${r.risers_slug}.json`):null},u={boots:r.boot_slug?i(`/data/${n}/boots/${r.boot_slug}.json`):null,slideblocks:r.slideblock_slug?i(`/data/${n}/slideblocks/${r.slideblock_slug}.json`):null,plates:r.plates_slug?i(`/data/${n}/plates/${r.plates_slug}.json`):null,toestops:r.toestops_slug?i(`/data/${n}/toestops/${r.toestops_slug}.json`):null};return{...b,...r.build_type==="skateboard"?_:u}}const fs=Object.freeze(Object.defineProperty({__proto__:null,load:Le,prerender:Je,ssr:Ke},Symbol.toStringTag,{value:"Module"}));var Re=$('<p class="svelte-11fic08"> </p>'),Xe=$('<div class="option-container svelte-11fic08"><article class="main svelte-11fic08"><h4 class="highlight large svelte-11fic08"> </h4> <!></article> <aside class="aside aside-1 svelte-11fic08"><input type="checkbox" class="svelte-11fic08"> <label class="svelte-11fic08"> </label></aside></div>');function Ye(r,i){ve(i,!1);let n=x(i,"id",8,""),b=x(i,"name",8,""),_=x(i,"label",8,""),u=x(i,"description",8,""),y=x(i,"checked",12,!1),w=x(i,"onChange",8,()=>{});function P(h){w()({id:h.target.id,checked:h.target.checked})}ke();var e=Xe(),v=o(e),m=o(v),G=o(m,!0);l(m);var O=c(m,2);{var se=h=>{var j=Re(),A=o(j,!0);l(j),U(()=>p(A,u())),f(h,j)};q(O,h=>{u()&&h(se)})}l(v);var S=c(v,2),g=o(S);be(g);var T=c(g,2),W=o(T,!0);l(T),l(S),l(e),U(()=>{p(G,_()),k(g,"id",n()),k(g,"name",b()),k(T,"for",n()),p(W,_())}),Ie(g,y),ee("change",g,P),f(r,e),he()}var Ze=$('<div class="edit-container svelte-1hy6hu3"><button class="edit-button svelte-1hy6hu3">Edit Build</button></div>'),Fe=$('<tr class="svelte-1hy6hu3"><td class="svelte-1hy6hu3"><input type="radio" class="svelte-1hy6hu3"></td><td data-label="Vendor" class="svelte-1hy6hu3"><a target="_blank" rel="noopener" class="svelte-1hy6hu3"> </a></td><td data-label="Price" class="svelte-1hy6hu3"> </td></tr>'),es=$('<table class="price-table svelte-1hy6hu3"><thead class="svelte-1hy6hu3"><tr class="svelte-1hy6hu3"><th class="svelte-1hy6hu3">Select</th><th class="svelte-1hy6hu3">Vendor</th><th class="svelte-1hy6hu3">Price</th></tr></thead><tbody class="svelte-1hy6hu3"></tbody></table>'),ss=$('<section class="build-section svelte-1hy6hu3"><div class="section-inner svelte-1hy6hu3"><img> <div class="section-info svelte-1hy6hu3"><h2 class="svelte-1hy6hu3"> </h2> <p><a class="svelte-1hy6hu3"><strong> </strong></a> </p> <!></div></div></section>'),ts=$('<section class="build-section svelte-1hy6hu3"><h2 class="svelte-1hy6hu3">Grand Total</h2> <p class="grand-total svelte-1hy6hu3"> </p> <p class="disclaimer svelte-1hy6hu3">Prices are an estimate.  Check to make sure all parts are compatible and the correct size before purchasing.</p></section>'),as=$('<div class="container svelte-1hy6hu3"><h1 class="svelte-1hy6hu3"> </h1> <p>Created by: <a class="svelte-1hy6hu3"> </a></p> <!> <p>This build is designed for <strong> </strong>.</p> <!> <!> <!></div>');function $s(r,i){ve(i,!1);const[n,b]=Ge(),_=()=>We(Ae,"$accountData",n),u=B(),y=B(),w=B(),P=B();let e=x(i,"data",8),v=B(!1);function m({id:t,checked:s}){C(v,s)}function G(t){const s=Object.keys(t).find(d=>d!=="url"&&d!=="productVendorUrl");return{vendor:s,price:t[s],url:t.url,productVendorUrl:t.productVendorUrl}}function O(t){const s=t.split("-").pop().trim(),d=parseFloat(s.replace(/[^0-9.]/g,""));return isNaN(d)?0:Math.round(d*100)}const S=[{key:"decks",label:"Deck",slug:e().build.deck_slug},{key:"griptape",label:"griptape",slug:e().build.griptape_slug},{key:"boots",label:"Boots",slug:e().build.boot_slug},{key:"plates",label:"Plates",slug:e().build.plates_slug},{key:"trucks",label:"Trucks",slug:e().build.trucks_slug},{key:"slideblocks",label:"SlideBlocks",slug:e().build.slideblock_slug},{key:"wheels",label:"Wheels",slug:e().build.wheels_slug},{key:"bearings",label:"Bearings",slug:e().build.bearings_slug},{key:"toestops",label:"Toestops",slug:e().build.toestops_slug},{key:"rails",label:"rails",slug:e().build.rails_slug},{key:"risers",label:"risers",slug:e().build.risers_slug},{key:"bushings",label:"Bushings",slug:e().build.bushings_slug}].map(t=>{const s=e().products[t.key];if(!s||!t.slug)return null;const d=s.productPrices.map(G);return{key:t.key,label:t.label,slug:t.slug,productName:s.productName,productBrand:s.productBrand,cloudinaryUrl:s.cloudinaryUrl,vendorPrices:d}}).filter(Boolean),g=B({});S.forEach(t=>{t.vendorPrices.length&&ce(g,a(g)[t.key]=O(t.vendorPrices[0].price))});function T(t,s){ce(g,a(g)[t]=s)}function W(){pe.set({slug:e().build.slug,name:e().build.name,skater_type:[],build_type:[],skating_type:e().build.skating_type,stance:e().build.stance??"",deck_slug:e().build.deck_slug??"",griptape_slug:e().build.griptape_slug??"",risers_slug:e().build.risers_slug??"",boot_slug:e().build.boot_slug??"",toestops_slug:e().build.toestops_slug??"",slideblock_slug:e().build.slideblock_slug??"",rails_slug:e().build.rails_slug??"",plates_slug:e().build.plates_slug??"",trucks_slug:e().build.trucks_slug,bearings_slug:e().build.bearings_slug,wheels_slug:e().build.wheels_slug,bushings_slug:e().build.bushings_slug}),He("/builds/new")}M(()=>_(),()=>{var t;C(u,(t=_())==null?void 0:t.username)}),M(()=>Ee(e()),()=>{C(y,e().build.owner_username)}),M(()=>a(g),()=>{C(w,Object.values(a(g)).reduce((t,s)=>t+s,0))}),M(()=>a(w),()=>{C(P,`$${(a(w)/100).toFixed(2)}`)}),De(),ke();var h=as(),j=o(h),A=o(j);l(j);var H=c(j,2),I=c(o(H)),ye=o(I,!0);l(I),l(H);var te=c(H,2);{var me=t=>{var s=Ze(),d=o(s);l(s),ee("click",d,W),f(t,s)};q(te,t=>{a(u)===a(y)&&t(me)})}var J=c(te,2),ae=c(o(J)),fe=o(ae,!0);l(ae),de(),l(J);var le=c(J,2);Ye(le,{id:"toggle_prices",name:"toggle_prices",label:"Show Prices",description:"Compare prices.",onChange:m,get checked(){return a(v)},set checked(t){C(v,t)},$$legacy:!0});var re=c(le,2);ge(re,1,()=>S,_e,(t,s)=>{var d=ss(),N=o(d),D=o(N),oe=c(D,2),K=o(oe),je=o(K,!0);l(K);var L=c(K,2),E=o(L),ue=o(E),xe=o(ue,!0);l(ue),l(E);var Pe=c(E);l(L);var Be=c(L,2);{var Ce=Q=>{var R=es(),ie=c(o(R));ge(ie,5,()=>a(s).vendorPrices,_e,(Ue,V)=>{var X=Fe(),Y=o(X),z=o(Y);be(z),l(Y);var Z=c(Y),F=o(Z),Oe=o(F,!0);l(F),l(Z);var ne=c(Z),Se=o(ne,!0);l(ne),l(X),U(Te=>{k(z,"name","selected_"+a(s).key),Me(z,Te),k(F,"href",a(V).productVendorUrl),p(Oe,a(V).vendor),p(Se,a(V).price)},[()=>a(g)[a(s).key]===O(a(V).price)],ze),ee("change",z,()=>T(a(s).key,O(a(V).price))),f(Ue,X)}),l(ie),l(R),f(Q,R)};q(Be,Q=>{a(v)&&Q(Ce)})}l(oe),l(N),l(d),U(()=>{k(D,"src",a(s).cloudinaryUrl),k(D,"alt",a(s).productName),qe(D,1,`section-image ${a(s).key??""}`,"svelte-1hy6hu3"),p(je,a(s).label),k(E,"href",`/product/${a(s).key}/${a(s).slug}`),p(xe,a(s).productName),p(Pe,`  by ${a(s).productBrand??""}`)}),f(t,d)});var $e=c(re,2);{var we=t=>{var s=ts(),d=c(o(s),2),N=o(d,!0);l(d),de(2),l(s),U(()=>p(N,a(P))),f(t,s)};q($e,t=>{a(v)&&t(we)})}l(h),U(()=>{p(A,`Build: ${e().build.name??""}`),k(I,"href",`/profiles/${a(y)}`),p(ye,a(y)),p(fe,e().build.skating_type)}),f(r,h),he(),b()}export{$s as component,fs as universal};
