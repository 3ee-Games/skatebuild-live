import{e as Ne}from"../chunks/BVbwzVtc.js";import{g as Ue}from"../chunks/CufRIGZF.js";import{s as _e}from"../chunks/ByXmJWSm.js";import{t as $,a as y}from"../chunks/Cbs2TP5J.js";import"../chunks/DppSS1ZK.js";import{ak as ve,ar as O,al as be,am as g,an as o,ao as l,at as ne,c as a,av as M,aw as De,o as B,j as C,ai as Ee,ap as Ve,b as Me}from"../chunks/BQECxIka.js";import{e as ee,s as _}from"../chunks/D7dhJHJ5.js";import{i as q}from"../chunks/BxIlQOsl.js";import{e as ce,i as de}from"../chunks/_x8JZXJS.js";import{r as pe,s as k,b as qe}from"../chunks/C1JmazWi.js";import{i as he}from"../chunks/-1FsuQLY.js";import{p as x}from"../chunks/Ct2zQ0GF.js";import{s as ze,a as Ge}from"../chunks/B_XqU4jY.js";import{a as We}from"../chunks/BMexqwi4.js";import{g as Ae}from"../chunks/VDuJxPtT.js";import{c as He}from"../chunks/BHVgj7FX.js";const Ie=!1,Je=async({params:r,fetch:i})=>{const{username:u,slug:h}=r;let d;const b=await i(`/data/builds/${u}/${h}.json`);if(b.ok)d=await b.json();else{const e=Ue(_e);if(e.slug===h)d={name:e.name,slug:e.slug,build_type:e.build_type,skating_type:e.skating_type,deck_slug:e.deck_slug||void 0,griptape_slug:e.griptape_slug||void 0,rails_slug:e.rails_slug||void 0,risers_slug:e.risers_slug||void 0,boot_slug:e.boot_slug||void 0,plates_slug:e.plates_slug||void 0,slideblock_slug:e.slideblock_slug||void 0,toestops_slug:e.toestops_slug||void 0,trucks_slug:e.trucks_slug,bearings_slug:e.bearings_slug,wheels_slug:e.wheels_slug,bushings_slug:e.bushings_slug,owner_username:e.owner_username};else throw Ne(404,`Build not found: ${u}/${h}`)}const m=Ke(d,i),w=await Promise.all(Object.entries(m).filter(([,e])=>e!==null).map(async([e,v])=>{const f=await v;return f.ok?[e,await f.json()]:[e,null]})),P=Object.fromEntries(w);return{build:d,products:P}};function Ke(r,i){const u=r.build_type==="skateboard"?"skateboard-products":"rollerskate-products",h={bearings:i(`/data/${u}/bearings/${r.bearings_slug}.json`),bushings:i(`/data/${u}/bushings/${r.bushings_slug}.json`),trucks:i(`/data/${u}/trucks/${r.trucks_slug}.json`),wheels:i(`/data/${u}/wheels/${r.wheels_slug}.json`)},d={decks:r.deck_slug?i(`/data/${u}/decks/${r.deck_slug}.json`):null,griptape:r.griptape_slug?i(`/data/${u}/griptape/${r.griptape_slug}.json`):null,rails:r.rails_slug?i(`/data/${u}/rails/${r.rails_slug}.json`):null,risers:r.risers_slug?i(`/data/${u}/risers/${r.risers_slug}.json`):null},b={boots:r.boot_slug?i(`/data/${u}/boots/${r.boot_slug}.json`):null,slideblocks:r.slideblock_slug?i(`/data/${u}/slideblocks/${r.slideblock_slug}.json`):null,plates:r.plates_slug?i(`/data/${u}/plates/${r.plates_slug}.json`):null,toestops:r.toestops_slug?i(`/data/${u}/toestops/${r.toestops_slug}.json`):null};return{...h,...r.build_type==="skateboard"?d:b}}const ks=Object.freeze(Object.defineProperty({__proto__:null,load:Je,prerender:Ie},Symbol.toStringTag,{value:"Module"}));var Le=$('<p class="svelte-11fic08"> </p>'),Qe=$('<div class="option-container svelte-11fic08"><article class="main svelte-11fic08"><h4 class="highlight large svelte-11fic08"> </h4> <!></article> <aside class="aside aside-1 svelte-11fic08"><input type="checkbox" class="svelte-11fic08"> <label class="svelte-11fic08"> </label></aside></div>');function Re(r,i){ve(i,!1);let u=x(i,"id",8,""),h=x(i,"name",8,""),d=x(i,"label",8,""),b=x(i,"description",8,""),m=x(i,"checked",12,!1),w=x(i,"onChange",8,()=>{});function P(p){w()({id:p.target.id,checked:p.target.checked})}he();var e=Qe(),v=o(e),f=o(v),z=o(f,!0);l(f);var S=g(f,2);{var se=p=>{var j=Le(),W=o(j,!0);l(j),O(()=>_(W,b())),y(p,j)};q(S,p=>{b()&&p(se)})}l(v);var T=g(v,2),c=o(T);pe(c);var N=g(c,2),G=o(N,!0);l(N),l(T),l(e),O(()=>{_(z,d()),k(c,"id",u()),k(c,"name",h()),k(N,"for",u()),_(G,d())}),He(c,m),ee("change",c,P),y(r,e),be()}var Xe=$('<div class="edit-container svelte-hggv5b"><button class="edit-button svelte-hggv5b">Edit Build</button></div>'),Ye=$('<tr class="svelte-hggv5b"><td class="svelte-hggv5b"><input type="radio"></td><td data-label="Vendor" class="svelte-hggv5b"><a target="_blank" rel="noopener" class="svelte-hggv5b"> </a></td><td data-label="Price" class="svelte-hggv5b"> </td></tr>'),Ze=$('<table class="price-table svelte-hggv5b"><thead class="svelte-hggv5b"><tr class="svelte-hggv5b"><th class="svelte-hggv5b">Select</th><th class="svelte-hggv5b">Vendor</th><th class="svelte-hggv5b">Price</th></tr></thead><tbody class="svelte-hggv5b"></tbody></table>'),Fe=$('<section class="build-section svelte-hggv5b"><div class="section-inner svelte-hggv5b"><img class="section-image svelte-hggv5b"> <div class="section-info svelte-hggv5b"><h2 class="svelte-hggv5b"> </h2> <p><a class="svelte-hggv5b"><strong> </strong></a> </p> <!></div></div></section>'),es=$('<section class="build-section svelte-hggv5b"><h2 class="svelte-hggv5b">Grand Total</h2> <p class="grand-total svelte-hggv5b"> </p></section>'),ss=$('<div class="container svelte-hggv5b"><h1 class="svelte-hggv5b"> </h1> <p>Created by: <a class="svelte-hggv5b"> </a></p> <!> <!> <p>This build is designed for <strong> </strong>.</p> <!> <!></div>');function ms(r,i){ve(i,!1);const[u,h]=ze(),d=()=>Ge(We,"$accountData",u),b=B(),m=B(),w=B(),P=B();let e=x(i,"data",8),v=B(!1);function f({id:t,checked:s}){C(v,s)}function z(t){const s=Object.keys(t).find(n=>n!=="url");return{vendor:s,price:t[s],url:t.url}}function S(t){const s=t.split("-").pop().trim(),n=parseFloat(s.replace(/[^0-9.]/g,""));return isNaN(n)?0:Math.round(n*100)}const T=[{key:"decks",label:"Deck",slug:e().build.deck_slug},{key:"griptape",label:"griptape",slug:e().build.griptape_slug},{key:"boots",label:"Boots",slug:e().build.boot_slug},{key:"plates",label:"Plates",slug:e().build.plates_slug},{key:"trucks",label:"Trucks",slug:e().build.trucks_slug},{key:"slideblocks",label:"SlideBlocks",slug:e().build.slideblock_slug},{key:"wheels",label:"Wheels",slug:e().build.wheels_slug},{key:"bearings",label:"Bearings",slug:e().build.bearings_slug},{key:"toestops",label:"Toestops",slug:e().build.toestops_slug},{key:"rails",label:"rails",slug:e().build.rails_slug},{key:"risers",label:"risers",slug:e().build.risers_slug},{key:"bushings",label:"Bushings",slug:e().build.bushings_slug}].map(t=>{const s=e().products[t.key];if(!s||!t.slug)return null;const n=s.productPrices.map(z);return{key:t.key,label:t.label,slug:t.slug,productName:s.productName,productBrand:s.productBrand,cloudinaryUrl:s.cloudinaryUrl,vendorPrices:n}}).filter(Boolean),c=B({});T.forEach(t=>{t.vendorPrices.length&&ne(c,a(c)[t.key]=S(t.vendorPrices[0].price))});function N(t,s){ne(c,a(c)[t]=s)}function G(){_e.set({slug:e().build.slug,name:e().build.name,skater_type:[],build_type:[],skating_type:e().build.skating_type,stance:e().build.stance??"",deck_slug:e().build.deck_slug??"",griptape_slug:e().build.griptape_slug??"",risers_slug:e().build.risers_slug??"",boot_slug:e().build.boot_slug??"",toestops_slug:e().build.toestops_slug??"",slideblock_slug:e().build.slideblock_slug??"",rails_slug:e().build.rails_slug??"",plates_slug:e().build.plates_slug??"",trucks_slug:e().build.trucks_slug,bearings_slug:e().build.bearings_slug,wheels_slug:e().build.wheels_slug,bushings_slug:e().build.bushings_slug}),Ae("/builds/new")}M(()=>d(),()=>{var t;C(b,(t=d())==null?void 0:t.username)}),M(()=>Ee(e()),()=>{C(m,e().build.owner_username)}),M(()=>a(c),()=>{C(w,Object.values(a(c)).reduce((t,s)=>t+s,0))}),M(()=>a(w),()=>{C(P,`$${(a(w)/100).toFixed(2)}`)}),De(),he();var p=ss(),j=o(p),W=o(j);l(j);var A=g(j,2),H=g(o(A)),ke=o(H,!0);l(H),l(A);var te=g(A,2);{var me=t=>{var s=Xe(),n=o(s);l(s),ee("click",n,G),y(t,s)};q(te,t=>{a(b)===a(m)&&t(me)})}var ae=g(te,2);Re(ae,{id:"toggle_prices",name:"toggle_prices",label:"Show Prices",description:"Compare prices.",onChange:f,get checked(){return a(v)},set checked(t){C(v,t)},$$legacy:!0});var I=g(ae,2),le=g(o(I)),fe=o(le,!0);l(le),Ve(),l(I);var re=g(I,2);ce(re,1,()=>T,de,(t,s)=>{var n=Fe(),D=o(n),J=o(D),oe=g(J,2),K=o(oe),we=o(K,!0);l(K);var L=g(K,2),E=o(L),ie=o(E),je=o(ie,!0);l(ie),l(E);var xe=g(E);l(L);var Pe=g(L,2);{var Be=Q=>{var R=Ze(),ue=g(o(R));ce(ue,5,()=>a(s).vendorPrices,de,(Ce,U)=>{var X=Ye(),Y=o(X),V=o(Y);pe(V),l(Y);var Z=g(Y),F=o(Z),Oe=o(F,!0);l(F),l(Z);var ge=g(Z),Se=o(ge,!0);l(ge),l(X),O(Te=>{k(V,"name","selected_"+a(s).key),qe(V,Te),k(F,"href",a(U).url),_(Oe,a(U).vendor),_(Se,a(U).price)},[()=>a(c)[a(s).key]===S(a(U).price)],Me),ee("change",V,()=>N(a(s).key,S(a(U).price))),y(Ce,X)}),l(ue),l(R),y(Q,R)};q(Pe,Q=>{a(v)&&Q(Be)})}l(oe),l(D),l(n),O(()=>{k(J,"src",a(s).cloudinaryUrl),k(J,"alt",a(s).productName),_(we,a(s).label),k(E,"href",`/product/${a(s).key}/${a(s).slug}`),_(je,a(s).productName),_(xe,`  by ${a(s).productBrand??""}`)}),y(t,n)});var ye=g(re,2);{var $e=t=>{var s=es(),n=g(o(s),2),D=o(n,!0);l(n),l(s),O(()=>_(D,a(P))),y(t,s)};q(ye,t=>{a(v)&&t($e)})}l(p),O(()=>{_(W,`Build: ${e().build.name??""}`),k(H,"href",`/profiles/${a(m)}`),_(ke,a(m)),_(fe,e().build.skating_type)}),y(r,p),be(),h()}export{ms as component,ks as universal};
