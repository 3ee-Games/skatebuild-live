import{t as q,a as C}from"../chunks/Doa8wjnW.js";import"../chunks/1NVSwa0V.js";import{am as N,as as O,c as a,an as z,ao as t,ap as l,j as i,o as m,aq as n,al as R}from"../chunks/ej_Vdcdl.js";import{e as w,s as V}from"../chunks/Cz9yb1SE.js";import{i as B}from"../chunks/CILL4GR2.js";import{r as _}from"../chunks/BqNEn0Gf.js";import{s as x,c as T}from"../chunks/BGfYSI1L.js";import{b as y}from"../chunks/CTMlGoQ_.js";import{i as F}from"../chunks/CyOr1GcM.js";import{g as G}from"../chunks/B7b2kqBE.js";import{a as H}from"../chunks/CgfUSf79.js";var I=q('<div class="error"> </div>'),K=q('<form class="container svelte-5gf3cp"><h1>Create an account</h1> <div class="field svelte-5gf3cp"><label for="email" class="svelte-5gf3cp">your email address:</label> <input id="email" name="email" type="email" placeholder="enter your email address" required></div> <div class="field svelte-5gf3cp"><label for="username" class="svelte-5gf3cp">desired username:</label> <input id="username" name="username" type="text" placeholder="enter a username" required></div> <div class="field svelte-5gf3cp"><label for="password" class="svelte-5gf3cp">come up with a secure password:</label> <input id="password" name="password" type="password" placeholder="enter a secure password" required class="svelte-5gf3cp"></div> <!> <button type="submit" class="svelte-5gf3cp">Create Account</button></form>');function se(E,S){N(S,!1);let u=m(""),f=m(""),v=m(""),s=m(null);async function P(e){e.preventDefault(),i(s,null);try{const r=await fetch("https://3ee.dev/account/create/",{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"https://skatebuild.pro"},mode:"cors",body:JSON.stringify({email:a(u),username:a(f),password:a(v)})}),o=await r.json();if(!r.ok)throw new Error(o.error||"Account creation failed");H.set(o);const k=await fetch("https://3ee.dev/skatebuild/api/profiles/save/",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","Access-Control-Allow-Origin":"https://skatebuild.pro",Authorization:`Token ${o.token}`},mode:"cors",body:JSON.stringify({name:o.username})});if(!k.ok){const J=await k.json();console.warn("Profile creation warning:",J)}G("/profile")}catch(r){console.error(r),i(s,r.message)}}function A(){i(s,null)}F();var p=K(),g=t(l(p),2),c=t(l(g),2);_(c),n(g);var h=t(g,2),d=t(l(h),2);_(d),n(h);var b=t(h,2),j=t(l(b),2);_(j),n(b);var $=t(b,2);{var D=e=>{var r=I(),o=l(r,!0);n(r),O(()=>V(o,a(s))),C(e,r)};B($,e=>{a(s)&&e(D)})}R(2),n(p),O(()=>{x(c,1,T(a(s)?"validation-error":""),"svelte-5gf3cp"),x(d,1,T(a(s)?"validation-error":""),"svelte-5gf3cp")}),y(c,()=>a(u),e=>i(u,e)),w("input",c,A),y(d,()=>a(f),e=>i(f,e)),w("input",d,A),y(j,()=>a(v),e=>i(v,e)),w("submit",p,P),C(E,p),z()}export{se as component};
