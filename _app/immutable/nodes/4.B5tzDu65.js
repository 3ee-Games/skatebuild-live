import{e as We}from"../chunks/Csa5Xxl4.js";import{g as He}from"../chunks/CugCgBCK.js";import{s as ye}from"../chunks/Cfl95tAy.js";import{t as k,a as v}from"../chunks/BuopEgDJ.js";import"../chunks/cRWhXdaq.js";import{h as ke,ak as $e,ar as V,al as we,an as o,ao as l,am as n,aw as me,c as a,at as W,au as Ie,o as D,j as E,ai as Je,ap as he,b as fe}from"../chunks/Bxgm8LiM.js";import{e as H,s as p}from"../chunks/C4-josYg.js";import{i as U}from"../chunks/CmJgwWHB.js";import{e as oe,i as ie}from"../chunks/ByVNspVl.js";import{r as je,s as b,b as Ke}from"../chunks/C_W0prB7.js";import{t as Le,s as Qe}from"../chunks/CJI7iNzq.js";import{i as xe}from"../chunks/BN_JieM2.js";import{p as O}from"../chunks/DyCV8Kcy.js";import{s as Xe,a as Ye}from"../chunks/COYJcMgf.js";import{a as Ze}from"../chunks/DvQrTR9s.js";import{g as Fe}from"../chunks/B7RfzvUx.js";import{c as es}from"../chunks/CitbKg_k.js";import{s as ss,r as ts}from"../chunks/DqAaAC6z.js";function as(r,u,c,f){var g=r.__style;if(ke||g!==u){var i=Le(u);(!ke||i!==r.getAttribute("style"))&&(i==null?r.removeAttribute("style"):r.style.cssText=i),r.__style=u}return f}const ls=!1,rs=!1,os=async({params:r,fetch:u})=>{const{username:c,slug:f}=r;let g;const i=He(ye);if(i.slug===f&&i.owner_username===c)g={name:i.name,slug:i.slug,build_type:i.build_type,skating_type:i.skating_type,deck_slug:i.deck_slug||void 0,griptape_slug:i.griptape_slug||void 0,rails_slug:i.rails_slug||void 0,risers_slug:i.risers_slug||void 0,boot_slug:i.boot_slug||void 0,plates_slug:i.plates_slug||void 0,slideblock_slug:i.slideblock_slug||void 0,toestops_slug:i.toestops_slug||void 0,trucks_slug:i.trucks_slug,bearings_slug:i.bearings_slug,wheels_slug:i.wheels_slug,bushings_slug:i.bushings_slug,owner_username:i.owner_username,attributes:i.attributes??[]};else{const e=await u(`/data/builds/${c}/${f}.json`);if(e.ok){const m=await e.json();g={...m,attributes:m.attributes??[]}}else throw We(404,`Build not found: ${c}/${f}`)}const x=is(g,u),P=await Promise.all(Object.entries(x).filter(([,e])=>e!==null).map(async([e,m])=>{const h=await m;return h.ok?[e,await h.json()]:[e,null]})),N=Object.fromEntries(P);return{build:g,products:N}};function is(r,u){const c=r.build_type==="skateboard"?"skateboard-products":"rollerskate-products",f={bearings:u(`/data/${c}/bearings/${r.bearings_slug}.json`),bushings:u(`/data/${c}/bushings/${r.bushings_slug}.json`),trucks:u(`/data/${c}/trucks/${r.trucks_slug}.json`),wheels:u(`/data/${c}/wheels/${r.wheels_slug}.json`)},g={decks:r.deck_slug?u(`/data/${c}/decks/${r.deck_slug}.json`):null,griptape:r.griptape_slug?u(`/data/${c}/griptape/${r.griptape_slug}.json`):null,rails:r.rails_slug?u(`/data/${c}/rails/${r.rails_slug}.json`):null,risers:r.risers_slug?u(`/data/${c}/risers/${r.risers_slug}.json`):null},i={boots:r.boot_slug?u(`/data/${c}/boots/${r.boot_slug}.json`):null,slideblocks:r.slideblock_slug?u(`/data/${c}/slideblocks/${r.slideblock_slug}.json`):null,plates:r.plates_slug?u(`/data/${c}/plates/${r.plates_slug}.json`):null,toestops:r.toestops_slug?u(`/data/${c}/toestops/${r.toestops_slug}.json`):null};return{...f,...r.build_type==="skateboard"?g:i}}const qs=Object.freeze(Object.defineProperty({__proto__:null,load:os,prerender:ls,ssr:rs},Symbol.toStringTag,{value:"Module"}));var us=k('<p class="svelte-11fic08"> </p>'),ns=k('<div class="option-container svelte-11fic08"><article class="main svelte-11fic08"><h4 class="highlight large svelte-11fic08"> </h4> <!></article> <aside class="aside aside-1 svelte-11fic08"><input type="checkbox" class="svelte-11fic08"> <label class="svelte-11fic08"> </label></aside></div>');function cs(r,u){$e(u,!1);let c=O(u,"id",8,""),f=O(u,"name",8,""),g=O(u,"label",8,""),i=O(u,"description",8,""),x=O(u,"checked",12,!1),P=O(u,"onChange",8,()=>{});function N(j){P()({id:j.target.id,checked:j.target.checked})}xe();var e=ns(),m=o(e),h=o(m),I=o(h,!0);l(h);var J=n(h,2);{var A=j=>{var B=us(),z=o(B,!0);l(B),V(()=>p(z,i())),v(j,B)};U(J,j=>{i()&&j(A)})}l(m);var K=n(m,2),w=o(K);je(w);var y=n(w,2),L=o(y,!0);l(y),l(K),l(e),V(()=>{p(I,g()),b(w,"id",c()),b(w,"name",f()),b(y,"for",c()),p(L,g())}),es(w,x),H("change",w,N),v(r,e),we()}var ds=k('<img alt="Skateboard build" class="build-icon svelte-1ta8k8u">'),gs=k('<img alt="Rollerskate build" class="build-icon svelte-1ta8k8u">'),_s=k('<div class="edit-container svelte-1ta8k8u"><button class="edit-button svelte-1ta8k8u">Edit Build</button></div>'),vs=k('<div class="edit-container svelte-1ta8k8u"><button class="edit-button svelte-1ta8k8u">Modify Build</button></div>'),ps=k('<div class="attribute-item svelte-1ta8k8u"><span class="attr-name svelte-1ta8k8u"> </span> <div class="attr-bar-container svelte-1ta8k8u"><div class="attr-bar svelte-1ta8k8u"></div></div></div>'),bs=k('<section class="attributes-section svelte-1ta8k8u"><h2 class="svelte-1ta8k8u">Attributes</h2> <!></section>'),ks=k('<tr class="svelte-1ta8k8u"><td class="svelte-1ta8k8u"><input type="radio" class="svelte-1ta8k8u"></td><td data-label="Vendor" class="svelte-1ta8k8u"><a target="_blank" rel="noopener" class="svelte-1ta8k8u"> </a></td><td data-label="Price" class="svelte-1ta8k8u"> </td></tr>'),ms=k('<table class="price-table svelte-1ta8k8u"><thead class="svelte-1ta8k8u"><tr class="svelte-1ta8k8u"><th class="svelte-1ta8k8u">Select</th><th class="svelte-1ta8k8u">Vendor</th><th class="svelte-1ta8k8u">Price</th></tr></thead><tbody class="svelte-1ta8k8u"></tbody></table>'),hs=k('<section class="build-section svelte-1ta8k8u"><div class="section-inner svelte-1ta8k8u"><img> <div class="section-info svelte-1ta8k8u"><h2 class="svelte-1ta8k8u"> </h2> <p><a class="svelte-1ta8k8u"><strong> </strong></a> </p> <!></div></div></section>'),fs=k(`<section class="build-section svelte-1ta8k8u"><h2 class="svelte-1ta8k8u">Grand Total</h2> <p class="grand-total svelte-1ta8k8u"> </p> <p class="disclaimer svelte-1ta8k8u">Prices are an estimate. Check to make sure all parts are compatible and the correct size
				before purchasing.</p></section>`),ys=k('<div class="container svelte-1ta8k8u"><h1 class="svelte-1ta8k8u"><!> </h1> <p>Created by <a class="svelte-1ta8k8u"> </a></p> <!> <p>This build is designed for <strong><span class="highlight"> </span></strong>.</p> <!> <!> <!> <!></div>');function Gs(r,u){$e(u,!1);const[c,f]=Xe(),g=()=>Ye(Ze,"$accountData",c),i=D(),x=D(),P=D(),N=D();let e=O(u,"data",8);const m=e().build.attributes??[];let h=D(!1);function I({id:s,checked:t}){E(h,t)}function J(s){const t=Object.keys(s).find(d=>d!=="url"&&d!=="productVendorUrl");return{vendor:t,price:s[t],url:s.url,productVendorUrl:s.productVendorUrl}}function A(s){const t=s.split("-").pop().trim(),d=parseFloat(t.replace(/[^0-9.]/g,""));return isNaN(d)?0:Math.round(d*100)}const w=[{key:"decks",label:"Deck",slug:e().build.deck_slug},{key:"griptape",label:"griptape",slug:e().build.griptape_slug},{key:"boots",label:"Boots",slug:e().build.boot_slug},{key:"plates",label:"Plates",slug:e().build.plates_slug},{key:"trucks",label:"Trucks",slug:e().build.trucks_slug},{key:"slideblocks",label:"SlideBlocks",slug:e().build.slideblock_slug},{key:"wheels",label:"Wheels",slug:e().build.wheels_slug},{key:"bearings",label:"Bearings",slug:e().build.bearings_slug},{key:"toestops",label:"Toestops",slug:e().build.toestops_slug},{key:"rails",label:"rails",slug:e().build.rails_slug},{key:"risers",label:"risers",slug:e().build.risers_slug},{key:"bushings",label:"Bushings",slug:e().build.bushings_slug}].map(s=>{const t=e().products[s.key];if(!t||!s.slug)return null;const d=t.productPrices.map(J);return{key:s.key,label:s.label,slug:s.slug,productName:t.productName,productBrand:t.productBrand,cloudinaryUrl:t.cloudinaryUrl,vendorPrices:d}}).filter(Boolean),y=D({});w.forEach(s=>{s.vendorPrices.length&&me(y,a(y)[s.key]=A(s.vendorPrices[0].price))});function L(s,t){me(y,a(y)[s]=t)}function j(){ye.set({slug:e().build.slug,name:e().build.name,skater_type:[],build_type:e().build.build_type,skating_type:e().build.skating_type,stance:e().build.stance??"",deck_slug:e().build.deck_slug??"",griptape_slug:e().build.griptape_slug??"",risers_slug:e().build.risers_slug??"",boot_slug:e().build.boot_slug??"",toestops_slug:e().build.toestops_slug??"",slideblock_slug:e().build.slideblock_slug??"",rails_slug:e().build.rails_slug??"",plates_slug:e().build.plates_slug??"",trucks_slug:e().build.trucks_slug,bearings_slug:e().build.bearings_slug,wheels_slug:e().build.wheels_slug,bushings_slug:e().build.bushings_slug,attributes:m,owner_username:e().build.owner_username??""}),Fe("/builds/new")}W(()=>g(),()=>{var s;E(i,(s=g())==null?void 0:s.username)}),W(()=>Je(e()),()=>{E(x,e().build.owner_username)}),W(()=>a(y),()=>{E(P,Object.values(a(y)).reduce((s,t)=>s+t,0))}),W(()=>a(P),()=>{E(N,`$${(a(P)/100).toFixed(2)}`)}),Ie(),xe();var B=ys(),z=o(B),ue=o(z);{var Pe=s=>{var t=ds();b(t,"src",ss),v(s,t)},Be=(s,t)=>{{var d=$=>{var _=gs();b(_,"src",ts),v($,_)};U(s,$=>{e().build.build_type==="rollerskate"&&$(d)},t)}};U(ue,s=>{e().build.build_type==="skateboard"?s(Pe):s(Be,!1)})}var Ce=n(ue);l(z);var Q=n(z,2),X=n(o(Q)),Se=o(X,!0);l(X),l(Q);var ne=n(Q,2);{var Te=s=>{var t=_s(),d=o(t);l(t),H("click",d,j),v(s,t)},Ue=s=>{var t=vs(),d=o(t);l(t),H("click",d,j),v(s,t)};U(ne,s=>{a(i)===a(x)?s(Te):s(Ue,!1)})}var Y=n(ne,2),ce=n(o(Y)),de=o(ce),Oe=o(de,!0);l(de),l(ce),he(),l(Y);var ge=n(Y,2);{var Ve=s=>{var t=bs(),d=n(o(t),2);oe(d,1,()=>m,ie,($,_)=>{var C=ps(),S=o(C),Z=o(S,!0);l(S);var M=n(S,2),T=o(M);l(M),l(C),V((G,F)=>{b(C,"data-value",G),p(Z,a(_).name),b(T,"data-color",a(_).value<=.3?"low":a(_).value<=.7?"medium":"high"),as(T,`width: ${F??""}%;`)},[()=>`${Math.round(a(_).value*100)}%`,()=>Math.round(a(_).value*100)],fe),v($,C)}),l(t),v(s,t)};U(ge,s=>{m.length&&s(Ve)})}var _e=n(ge,2);cs(_e,{id:"toggle_prices",name:"toggle_prices",label:"Show Prices",description:"Compare prices.",onChange:I,get checked(){return a(h)},set checked(s){E(h,s)},$$legacy:!0});var ve=n(_e,2);oe(ve,1,()=>w,ie,(s,t)=>{var d=hs(),$=o(d),_=o($),C=n(_,2),S=o(C),Z=o(S,!0);l(S);var M=n(S,2),T=o(M),G=o(T),F=o(G,!0);l(G),l(T);var De=n(T);l(M);var Ee=n(M,2);{var Ae=ee=>{var se=ms(),pe=n(o(se));oe(pe,5,()=>a(t).vendorPrices,ie,(ze,q)=>{var te=ks(),ae=o(te),R=o(ae);je(R),l(ae);var le=n(ae),re=o(le),qe=o(re,!0);l(re),l(le);var be=n(le),Ge=o(be,!0);l(be),l(te),V(Re=>{b(R,"name","selected_"+a(t).key),Ke(R,Re),b(re,"href",a(q).productVendorUrl),p(qe,a(q).vendor),p(Ge,a(q).price)},[()=>a(y)[a(t).key]===A(a(q).price)],fe),H("change",R,()=>L(a(t).key,A(a(q).price))),v(ze,te)}),l(pe),l(se),v(ee,se)};U(Ee,ee=>{a(h)&&ee(Ae)})}l(C),l($),l(d),V(()=>{b(_,"src",a(t).cloudinaryUrl),b(_,"alt",a(t).productName),Qe(_,1,`section-image ${a(t).key??""}`,"svelte-1ta8k8u"),p(Z,a(t).label),b(T,"href",`/product/${a(t).key}/${a(t).slug}`),p(F,a(t).productName),p(De,`  by ${a(t).productBrand??""}`)}),v(s,d)});var Ne=n(ve,2);{var Me=s=>{var t=fs(),d=n(o(t),2),$=o(d,!0);l(d),he(2),l(t),V(()=>p($,a(N))),v(s,t)};U(Ne,s=>{a(h)&&s(Me)})}l(B),V(()=>{p(Ce,` ${e().build.name??""}`),b(X,"href",`/profiles/${a(x)}`),p(Se,a(x)),p(Oe,e().build.skating_type)}),v(r,B),we(),f()}export{Gs as component,qs as universal};
