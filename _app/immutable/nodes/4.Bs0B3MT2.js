import{e as We}from"../chunks/BAmJuvWq.js";import{g as He}from"../chunks/CugCgBCK.js";import{s as ye}from"../chunks/Cfl95tAy.js";import{t as k,a as _}from"../chunks/BuopEgDJ.js";import"../chunks/cRWhXdaq.js";import{h as ke,ak as $e,ar as V,al as we,an as i,ao as r,am as n,aw as me,c as a,at as W,au as Ie,o as D,j as E,ai as Je,ap as he,b as fe}from"../chunks/Bxgm8LiM.js";import{e as H,s as p}from"../chunks/C4-josYg.js";import{i as U}from"../chunks/CmJgwWHB.js";import{e as ie,i as oe}from"../chunks/ByVNspVl.js";import{r as je,s as b,b as Ke}from"../chunks/C_W0prB7.js";import{t as Le,s as Qe}from"../chunks/CJI7iNzq.js";import{i as xe}from"../chunks/BN_JieM2.js";import{p as O}from"../chunks/DyCV8Kcy.js";import{s as Xe,a as Ye}from"../chunks/COYJcMgf.js";import{a as Ze}from"../chunks/DvQrTR9s.js";import{g as Fe}from"../chunks/DX7SO5Ds.js";import{c as es}from"../chunks/CitbKg_k.js";import{s as ss,r as ts}from"../chunks/DqAaAC6z.js";function as(l,u,v,f){var d=l.__style;if(ke||d!==u){var o=Le(u);(!ke||o!==l.getAttribute("style"))&&(o==null?l.removeAttribute("style"):l.style.cssText=o),l.__style=u}return f}const rs=!1,ls=!1,is=async({params:l,fetch:u})=>{const{username:v,slug:f}=l;let d;const o=He(ye);if(o.slug===f&&o.owner_username===v)d={name:o.name,slug:o.slug,build_type:o.build_type,skating_type:o.skating_type,deck_slug:o.deck_slug||void 0,griptape_slug:o.griptape_slug||void 0,rails_slug:o.rails_slug||void 0,risers_slug:o.risers_slug||void 0,boot_slug:o.boot_slug||void 0,plates_slug:o.plates_slug||void 0,slideblock_slug:o.slideblock_slug||void 0,toestops_slug:o.toestops_slug||void 0,trucks_slug:o.trucks_slug,bearings_slug:o.bearings_slug,wheels_slug:o.wheels_slug,bushings_slug:o.bushings_slug,owner_username:o.owner_username,attributes:o.attributes??[]};else{const t=await u(`/data/builds/${v}/${f}.json`);if(t.ok){const m=await t.json();d={...m,attributes:m.attributes??[]}}else throw We(404,`Build not found: ${v}/${f}`)}const x=os(d,u),P=await Promise.all(Object.entries(x).filter(([,t])=>t!==null).map(async([t,m])=>{const h=await m;return h.ok?[t,await h.json()]:[t,null]})),N=Object.fromEntries(P);return{build:d,products:N}};function os(l,u){const v=l.build_type==="skateboard"?"skateboard-products":"rollerskate-products",f={bearings:u(`/data/${v}/bearings/${l.bearings_slug}.json`),bushings:u(`/data/${v}/bushings/${l.bushings_slug}.json`),trucks:u(`/data/${v}/trucks/${l.trucks_slug}.json`),wheels:u(`/data/${v}/wheels/${l.wheels_slug}.json`)},d={decks:l.deck_slug?u(`/data/${v}/decks/${l.deck_slug}.json`):null,griptape:l.griptape_slug?u(`/data/${v}/griptape/${l.griptape_slug}.json`):null,rails:l.rails_slug?u(`/data/${v}/rails/${l.rails_slug}.json`):null,risers:l.risers_slug?u(`/data/${v}/risers/${l.risers_slug}.json`):null},o={boots:l.boot_slug?u(`/data/${v}/boots/${l.boot_slug}.json`):null,slideblocks:l.slideblock_slug?u(`/data/${v}/slideblocks/${l.slideblock_slug}.json`):null,plates:l.plates_slug?u(`/data/${v}/plates/${l.plates_slug}.json`):null,toestops:l.toestops_slug?u(`/data/${v}/toestops/${l.toestops_slug}.json`):null};return{...f,...l.build_type==="skateboard"?d:o}}const qs=Object.freeze(Object.defineProperty({__proto__:null,load:is,prerender:rs,ssr:ls},Symbol.toStringTag,{value:"Module"}));var us=k('<p class="svelte-11fic08"> </p>'),ns=k('<div class="option-container svelte-11fic08"><article class="main svelte-11fic08"><h4 class="highlight large svelte-11fic08"> </h4> <!></article> <aside class="aside aside-1 svelte-11fic08"><input type="checkbox" class="svelte-11fic08"> <label class="svelte-11fic08"> </label></aside></div>');function vs(l,u){$e(u,!1);let v=O(u,"id",8,""),f=O(u,"name",8,""),d=O(u,"label",8,""),o=O(u,"description",8,""),x=O(u,"checked",12,!1),P=O(u,"onChange",8,()=>{});function N(j){P()({id:j.target.id,checked:j.target.checked})}xe();var t=ns(),m=i(t),h=i(m),I=i(h,!0);r(h);var J=n(h,2);{var A=j=>{var B=us(),z=i(B,!0);r(B),V(()=>p(z,o())),_(j,B)};U(J,j=>{o()&&j(A)})}r(m);var K=n(m,2),w=i(K);je(w);var y=n(w,2),L=i(y,!0);r(y),r(K),r(t),V(()=>{p(I,d()),b(w,"id",v()),b(w,"name",f()),b(y,"for",v()),p(L,d())}),es(w,x),H("change",w,N),_(l,t),we()}var cs=k('<img alt="Skateboard build" class="build-icon svelte-i34rvv">'),ds=k('<img alt="Rollerskate build" class="build-icon svelte-i34rvv">'),gs=k('<div class="edit-container svelte-i34rvv"><button class="edit-button svelte-i34rvv">Edit Build</button></div>'),_s=k('<div class="edit-container svelte-i34rvv"><button class="edit-button svelte-i34rvv">Modify Build</button></div>'),ps=k('<div class="attribute-item svelte-i34rvv"><span class="attr-name svelte-i34rvv"> </span> <div class="attr-bar-container svelte-i34rvv"><div class="attr-bar svelte-i34rvv"></div></div></div>'),bs=k('<section class="attributes-section svelte-i34rvv"><h2 class="svelte-i34rvv">Attributes</h2> <!></section>'),ks=k('<tr class="svelte-i34rvv"><td class="svelte-i34rvv"><input type="radio" class="svelte-i34rvv"></td><td data-label="Vendor" class="svelte-i34rvv"><a target="_blank" rel="noopener" class="svelte-i34rvv"> </a></td><td data-label="Price" class="svelte-i34rvv"> </td></tr>'),ms=k('<table class="price-table svelte-i34rvv"><thead class="svelte-i34rvv"><tr class="svelte-i34rvv"><th class="svelte-i34rvv">Select</th><th class="svelte-i34rvv">Vendor</th><th class="svelte-i34rvv">Price</th></tr></thead><tbody class="svelte-i34rvv"></tbody></table>'),hs=k('<section class="build-section svelte-i34rvv"><div class="section-inner svelte-i34rvv"><img> <div class="section-info svelte-i34rvv"><h2 class="svelte-i34rvv"> </h2> <p><a class="svelte-i34rvv"><strong> </strong></a> </p> <!></div></div></section>'),fs=k(`<section class="build-section svelte-i34rvv"><h2 class="svelte-i34rvv">Grand Total</h2> <p class="grand-total svelte-i34rvv"> </p> <p class="disclaimer svelte-i34rvv">Prices are an estimate. Check to make sure all parts are compatible and the correct size
				before purchasing.</p></section>`),ys=k('<div class="container svelte-i34rvv"><h1 class="svelte-i34rvv"><!> </h1> <p>Created by <a class="svelte-i34rvv"> </a></p> <!> <p>This build is designed for <strong><span class="highlight"> </span></strong>.</p> <!> <!> <!> <!></div>');function Gs(l,u){$e(u,!1);const[v,f]=Xe(),d=()=>Ye(Ze,"$accountData",v),o=D(),x=D(),P=D(),N=D();let t=O(u,"data",8);const m=t().build.attributes??[];let h=D(!1);function I({id:e,checked:s}){E(h,s)}function J(e){const s=Object.keys(e).find(c=>c!=="url"&&c!=="productVendorUrl");return{vendor:s,price:e[s],url:e.url,productVendorUrl:e.productVendorUrl}}function A(e){const s=e.split("-").pop().trim(),c=parseFloat(s.replace(/[^0-9.]/g,""));return isNaN(c)?0:Math.round(c*100)}const w=[{key:"decks",label:"Deck",slug:t().build.deck_slug},{key:"griptape",label:"griptape",slug:t().build.griptape_slug},{key:"boots",label:"Boots",slug:t().build.boot_slug},{key:"plates",label:"Plates",slug:t().build.plates_slug},{key:"trucks",label:"Trucks",slug:t().build.trucks_slug},{key:"slideblocks",label:"SlideBlocks",slug:t().build.slideblock_slug},{key:"wheels",label:"Wheels",slug:t().build.wheels_slug},{key:"bearings",label:"Bearings",slug:t().build.bearings_slug},{key:"toestops",label:"Toestops",slug:t().build.toestops_slug},{key:"rails",label:"rails",slug:t().build.rails_slug},{key:"risers",label:"risers",slug:t().build.risers_slug},{key:"bushings",label:"Bushings",slug:t().build.bushings_slug}].map(e=>{const s=t().products[e.key];if(!s||!e.slug)return null;const c=s.productPrices.map(J);return{key:e.key,label:e.label,slug:e.slug,productName:s.productName,productBrand:s.productBrand,cloudinaryUrl:s.cloudinaryUrl,vendorPrices:c}}).filter(Boolean),y=D({});w.forEach(e=>{e.vendorPrices.length&&me(y,a(y)[e.key]=A(e.vendorPrices[0].price))});function L(e,s){me(y,a(y)[e]=s)}function j(){ye.set({slug:t().build.slug,name:t().build.name,skater_type:[],build_type:t().build.build_type,skating_type:t().build.skating_type,stance:t().build.stance??"",deck_slug:t().build.deck_slug??"",griptape_slug:t().build.griptape_slug??"",risers_slug:t().build.risers_slug??"",boot_slug:t().build.boot_slug??"",toestops_slug:t().build.toestops_slug??"",slideblock_slug:t().build.slideblock_slug??"",rails_slug:t().build.rails_slug??"",plates_slug:t().build.plates_slug??"",trucks_slug:t().build.trucks_slug,bearings_slug:t().build.bearings_slug,wheels_slug:t().build.wheels_slug,bushings_slug:t().build.bushings_slug,attributes:m}),Fe("/builds/new")}W(()=>d(),()=>{var e;E(o,(e=d())==null?void 0:e.username)}),W(()=>Je(t()),()=>{E(x,t().build.owner_username)}),W(()=>a(y),()=>{E(P,Object.values(a(y)).reduce((e,s)=>e+s,0))}),W(()=>a(P),()=>{E(N,`$${(a(P)/100).toFixed(2)}`)}),Ie(),xe();var B=ys(),z=i(B),ue=i(z);{var Pe=e=>{var s=cs();b(s,"src",ss),_(e,s)},Be=(e,s)=>{{var c=$=>{var g=ds();b(g,"src",ts),_($,g)};U(e,$=>{t().build.build_type==="rollerskate"&&$(c)},s)}};U(ue,e=>{t().build.build_type==="skateboard"?e(Pe):e(Be,!1)})}var Ce=n(ue);r(z);var Q=n(z,2),X=n(i(Q)),Se=i(X,!0);r(X),r(Q);var ne=n(Q,2);{var Te=e=>{var s=gs(),c=i(s);r(s),H("click",c,j),_(e,s)},Ue=e=>{var s=_s(),c=i(s);r(s),H("click",c,j),_(e,s)};U(ne,e=>{a(o)===a(x)?e(Te):e(Ue,!1)})}var Y=n(ne,2),ve=n(i(Y)),ce=i(ve),Oe=i(ce,!0);r(ce),r(ve),he(),r(Y);var de=n(Y,2);{var Ve=e=>{var s=bs(),c=n(i(s),2);ie(c,1,()=>m,oe,($,g)=>{var C=ps(),S=i(C),Z=i(S,!0);r(S);var M=n(S,2),T=i(M);r(M),r(C),V((G,F)=>{b(C,"data-value",G),p(Z,a(g).name),b(T,"data-color",a(g).value<=.3?"low":a(g).value<=.7?"medium":"high"),as(T,`width: ${F??""}%;`)},[()=>`${Math.round(a(g).value*100)}%`,()=>Math.round(a(g).value*100)],fe),_($,C)}),r(s),_(e,s)};U(de,e=>{m.length&&e(Ve)})}var ge=n(de,2);vs(ge,{id:"toggle_prices",name:"toggle_prices",label:"Show Prices",description:"Compare prices.",onChange:I,get checked(){return a(h)},set checked(e){E(h,e)},$$legacy:!0});var _e=n(ge,2);ie(_e,1,()=>w,oe,(e,s)=>{var c=hs(),$=i(c),g=i($),C=n(g,2),S=i(C),Z=i(S,!0);r(S);var M=n(S,2),T=i(M),G=i(T),F=i(G,!0);r(G),r(T);var De=n(T);r(M);var Ee=n(M,2);{var Ae=ee=>{var se=ms(),pe=n(i(se));ie(pe,5,()=>a(s).vendorPrices,oe,(ze,q)=>{var te=ks(),ae=i(te),R=i(ae);je(R),r(ae);var re=n(ae),le=i(re),qe=i(le,!0);r(le),r(re);var be=n(re),Ge=i(be,!0);r(be),r(te),V(Re=>{b(R,"name","selected_"+a(s).key),Ke(R,Re),b(le,"href",a(q).productVendorUrl),p(qe,a(q).vendor),p(Ge,a(q).price)},[()=>a(y)[a(s).key]===A(a(q).price)],fe),H("change",R,()=>L(a(s).key,A(a(q).price))),_(ze,te)}),r(pe),r(se),_(ee,se)};U(Ee,ee=>{a(h)&&ee(Ae)})}r(C),r($),r(c),V(()=>{b(g,"src",a(s).cloudinaryUrl),b(g,"alt",a(s).productName),Qe(g,1,`section-image ${a(s).key??""}`,"svelte-i34rvv"),p(Z,a(s).label),b(T,"href",`/product/${a(s).key}/${a(s).slug}`),p(F,a(s).productName),p(De,`  by ${a(s).productBrand??""}`)}),_(e,c)});var Ne=n(_e,2);{var Me=e=>{var s=fs(),c=n(i(s),2),$=i(c,!0);r(c),he(2),r(s),V(()=>p($,a(N))),_(e,s)};U(Ne,e=>{a(h)&&e(Me)})}r(B),V(()=>{p(Ce,` ${t().build.name??""}`),b(X,"href",`/profiles/${a(x)}`),p(Se,a(x)),p(Oe,t().build.skating_type)}),_(l,B),we(),f()}export{Gs as component,qs as universal};
