import{f as ye}from"../chunks/19TPhq2Y.js";import{t as P,b as $,h as Ge}from"../chunks/CVnLNjhL.js";import"../chunks/CfhoQdff.js";import{al as de,au as we,av as Ke,an as M,g as e,ao as ce,ap as d,ar as t,v as l,A as _,j as ie,aq as o,n as J,aw as xe,at as Ve,am as V,aK as Se,as as We}from"../chunks/CXW7l8t1.js";import{i as pe}from"../chunks/DlbwnUFY.js";import{p as F,s as Ye}from"../chunks/DruZEgyz.js";import{o as _e}from"../chunks/D3jcJ-I-.js";import{g as Ce}from"../chunks/CJqydAoi.js";import{e as B,s as Pe}from"../chunks/BbduWHOr.js";import{i as H}from"../chunks/YmDFlcga.js";import{e as ne,i as $e}from"../chunks/qmOIVIWv.js";import{r as W,s as He,b as Qe}from"../chunks/BodZMhYJ.js";import{b as ve,a as Xe}from"../chunks/CbT2Wo9K.js";import{b as Ze}from"../chunks/BLg8NvVJ.js";import{s as ue}from"../chunks/hc9XoInv.js";import{a as et}from"../chunks/DX8mMHyw.js";import{g as tt}from"../chunks/C5si03j7.js";const at=!0,lt=async({fetch:U})=>{const h=await ye(U,"skateboard-products/index.json"),O=await ye(U,"rollerskate-products/index.json");return{skateboardProducts:h,rollerskateProducts:O}},Rt=Object.freeze(Object.defineProperty({__proto__:null,load:lt,prerender:at},Symbol.toStringTag,{value:"Module"}));var st=P('<li role="option" tabindex="0" class="svelte-1latwr4"> </li>'),rt=P('<ul role="listbox" class="svelte-1latwr4"></ul>'),ot=P('<div class="combobox svelte-1latwr4"><input type="text" autocomplete="off" class="svelte-1latwr4"> <!></div>');function C(U,h){de(h,!1);const O=_();let f=F(h,"options",24,()=>[]),b=F(h,"value",12,""),v=F(h,"placeholder",8,"Start typing…"),m=_(""),N=_(!1);_e(()=>{const r=f().find(y=>y.slug===b());r&&l(m,r.productName)});function G(r){l(m,r.target.value);const y=f().find(A=>A.productName===e(m));b(y?y.slug:"")}function x(r){l(m,r.productName),b(r.slug),l(N,!1)}we(()=>(ie(b()),ie(f()),e(m)),()=>{if(b()){const r=f().find(y=>y.slug===b());r&&r.productName!==e(m)&&l(m,r.productName)}}),we(()=>(e(m),ie(f())),()=>{l(O,e(m)?f().filter(r=>r.productName.toLowerCase().includes(e(m).toLowerCase())):f())}),Ke(),pe();var T=ot(),S=d(T);W(S);var R=t(S,2);{var q=r=>{var y=rt();ne(y,5,()=>e(O),A=>A.slug,(A,z)=>{var D=st(),K=d(D,!0);o(D),M(()=>Pe(K,e(z).productName)),B("mousedown",D,()=>x(e(z))),B("keydown",D,E=>{var I,i;E.key==="Enter"&&x(e(z)),E.key==="ArrowDown"&&((I=E.currentTarget.nextElementSibling)==null||I.focus()),E.key==="ArrowUp"&&((i=E.currentTarget.previousElementSibling)==null||i.focus())}),$(A,D)}),o(y),$(r,y)};H(R,r=>{e(N)&&r(q)})}o(T),M(()=>He(S,"placeholder",v())),ve(S,()=>e(m),r=>l(m,r)),B("input",S,G),B("focus",S,()=>l(N,!0)),B("blur",S,()=>setTimeout(()=>l(N,!1),150)),$(U,T),ce()}var it=P('<label class="svelte-1mjfju1"><input type="radio" required class="svelte-1mjfju1"> </label>'),ut=P("<option>Street</option> <option>Vert</option> <option>Freestyle</option> <option>Park</option> <option>Downhill</option> <option>Cruisin</option>",1),nt=P("<option>Artistic skating</option> <option>Roller dance</option> <option>Speed skating</option> <option>Roller derby</option> <option>Park skating</option> <option>Roller hockey</option>",1),vt=P('<div class="field svelte-1mjfju1"><label class="svelte-1mjfju1">Deck</label> <!></div> <div class="field svelte-1mjfju1"><label class="svelte-1mjfju1">Griptape</label> <!></div> <div class="field svelte-1mjfju1"><label class="svelte-1mjfju1">Rails</label> <!></div> <div class="field svelte-1mjfju1"><label class="svelte-1mjfju1">Risers</label> <!></div>',1),dt=P('<div class="field svelte-1mjfju1"><label class="svelte-1mjfju1">Boot</label> <!></div> <div class="field svelte-1mjfju1"><label class="svelte-1mjfju1">Toestops</label> <!></div> <div class="field svelte-1mjfju1"><label class="svelte-1mjfju1">Slideblocks</label> <!></div> <div class="field svelte-1mjfju1"><label class="svelte-1mjfju1">Plates</label> <!></div>',1),ct=P('<div class="attribute-row svelte-1mjfju1"><input type="text" placeholder="Name" required class="svelte-1mjfju1"> <input class="attribute-slider svelte-1mjfju1" type="range" min="0" max="1" step="0.01"> <button class="removeBtn svelte-1mjfju1" type="button">✕</button></div>'),pt=P('<form class="container svelte-1mjfju1"><div class="field svelte-1mjfju1"><label class="svelte-1mjfju1">Build Name</label> <input required class="svelte-1mjfju1"></div> <div class="field-group svelte-1mjfju1"></div> <div class="field svelte-1mjfju1"><label class="svelte-1mjfju1">Style</label> <select required class="svelte-1mjfju1"><option disabled>Select style</option><!></select></div> <!> <!> <div class="field svelte-1mjfju1"><label class="svelte-1mjfju1">Trucks</label> <!></div> <div class="field svelte-1mjfju1"><label class="svelte-1mjfju1">Bearings</label> <!></div> <div class="field svelte-1mjfju1"><label class="svelte-1mjfju1">Wheels</label> <!></div> <div class="field svelte-1mjfju1"><label class="svelte-1mjfju1">Bushings</label> <!></div> <div class="field svelte-1mjfju1"><label class="svelte-1mjfju1">Stats (max 5)</label> <!> <button type="button" class="add-attr-btn svelte-1mjfju1"><span class="svelte-1mjfju1">+ Add Stat</span></button></div> <button type="submit" class="svelte-1mjfju1"><span>Save Build</span></button></form>');function _t(U,h){de(h,!1);const O=[];let f=F(h,"skateboardProducts",8),b=F(h,"rollerskateProducts",8),v=F(h,"prefill",8),m=F(h,"submit",8),N=_(v().name||"");v().slug;let G=v().skater_type,x=_(v().skating_type),T=_(v().deck_slug),S=_(v().griptape_slug),R=_(v().rails_slug),q=_(v().risers_slug),r=_(v().boot_slug),y=_(v().toestops_slug),A=_(v().slideblock_slug),z=_(v().plates_slug),D=_(v().trucks_slug),K=_(v().bearings_slug),E=_(v().wheels_slug),I=_(v().bushings_slug),i=_(v().build_type||"");const Ne=["skateboard","rollerskate"];let j=_(v().attributes??[]);_e(()=>{const a=e(r)||e(y)||e(A)||e(z);l(i,a?"rollerskate":"skateboard")});async function Te(a){a.preventDefault();const u={name:e(N),build_type:e(i),skater_type:G,skating_type:e(x),deck_slug:e(i)==="skateboard"?e(T):void 0,griptape_slug:e(i)==="skateboard"?e(S):void 0,rails_slug:e(i)==="skateboard"?e(R):void 0,risers_slug:e(i)==="skateboard"?e(q):void 0,boot_slug:e(i)==="rollerskate"?e(r):void 0,toestops_slug:e(i)==="rollerskate"?e(y):void 0,slideblock_slug:e(i)==="rollerskate"?e(A):void 0,plates_slug:e(i)==="rollerskate"?e(z):void 0,trucks_slug:e(D),bearings_slug:e(K),wheels_slug:e(E),bushings_slug:e(I),...e(j).length?{attributes:e(j)}:{}},s=await m()({detail:u});s!=null&&s.slug&&s.slug}const fe=()=>e(j).length<5;function Ae(){fe()&&l(j,[...e(j),{name:"",value:.5}])}pe();var Y=pt(),Q=d(Y),ge=t(d(Q),2);W(ge),o(Q);var X=t(Q,2);ne(X,5,()=>Ne,$e,(a,u)=>{var s=it(),c=d(s);W(c);var n,g=t(c);o(s),M(p=>{n!==(n=e(u))&&(c.value=(c.__value=e(u))??""),Pe(g,` ${p??""}`)},[()=>e(u).charAt(0).toUpperCase()+e(u).slice(1)],J),Xe(O,[],c,()=>(e(u),e(i)),p=>l(i,p)),$(a,s)}),o(X);var Z=t(X,2),ee=t(d(Z),2);M(()=>{e(x),xe(()=>{e(i)})});var te=d(ee);te.value=te.__value="";var Be=t(te);{var Oe=a=>{var u=ut(),s=V(u);s.value=s.__value="street";var c=t(s,2);c.value=c.__value="vert";var n=t(c,2);n.value=n.__value="freestyle";var g=t(n,2);g.value=g.__value="park";var p=t(g,2);p.value=p.__value="downhill";var k=t(p,2);k.value=k.__value="cruisin",$(a,u)},Re=a=>{var u=nt(),s=V(u);s.value=s.__value="artistic skating";var c=t(s,2);c.value=c.__value="roller dance";var n=t(c,2);n.value=n.__value="speed skating";var g=t(n,2);g.value=g.__value="roller derby";var p=t(g,2);p.value=p.__value="park skating";var k=t(p,2);k.value=k.__value="roller hockey",$(a,u)};H(Be,a=>{e(i)==="skateboard"?a(Oe):a(Re,!1)})}o(ee),o(Z);var be=t(Z,2);{var qe=a=>{var u=vt(),s=V(u),c=t(d(s),2);C(c,{get options(){return f().decks},placeholder:"Choose a deck…",get value(){return e(T)},set value(w){l(T,w)},$$legacy:!0}),o(s);var n=t(s,2),g=t(d(n),2);C(g,{get options(){return f().griptape},placeholder:"Choose griptape…",get value(){return e(S)},set value(w){l(S,w)},$$legacy:!0}),o(n);var p=t(n,2),k=t(d(p),2);C(k,{get options(){return f().rails},placeholder:"Choose rails…",get value(){return e(R)},set value(w){l(R,w)},$$legacy:!0}),o(p);var L=t(p,2),oe=t(d(L),2);C(oe,{get options(){return f().risers},placeholder:"Choose risers…",get value(){return e(q)},set value(w){l(q,w)},$$legacy:!0}),o(L),$(a,u)};H(be,a=>{e(i)==="skateboard"&&a(qe)})}var me=t(be,2);{var De=a=>{var u=dt(),s=V(u),c=t(d(s),2);C(c,{get options(){return b().boots},placeholder:"Choose boot…",get value(){return e(r)},set value(w){l(r,w)},$$legacy:!0}),o(s);var n=t(s,2),g=t(d(n),2);C(g,{get options(){return b().toestops},placeholder:"Choose toestops…",get value(){return e(y)},set value(w){l(y,w)},$$legacy:!0}),o(n);var p=t(n,2),k=t(d(p),2);C(k,{get options(){return b().slideblocks},placeholder:"Choose slideblocks…",get value(){return e(A)},set value(w){l(A,w)},$$legacy:!0}),o(p);var L=t(p,2),oe=t(d(L),2);C(oe,{get options(){return b().plates},placeholder:"Choose plates…",get value(){return e(z)},set value(w){l(z,w)},$$legacy:!0}),o(L),$(a,u)};H(me,a=>{e(i)==="rollerskate"&&a(De)})}var ae=t(me,2),Ee=t(d(ae),2);const Le=J(()=>e(i)==="skateboard"?f().trucks:b().trucks);C(Ee,{get options(){return e(Le)},placeholder:"Choose trucks…",get value(){return e(D)},set value(a){l(D,a)},$$legacy:!0}),o(ae);var le=t(ae,2),Ue=t(d(le),2);const ze=J(()=>e(i)==="skateboard"?f().bearings:b().bearings);C(Ue,{get options(){return e(ze)},placeholder:"Choose bearings…",get value(){return e(K)},set value(a){l(K,a)},$$legacy:!0}),o(le);var se=t(le,2),Fe=t(d(se),2);const Ie=J(()=>e(i)==="skateboard"?f().wheels:b().wheels);C(Fe,{get options(){return e(Ie)},placeholder:"Choose wheels…",get value(){return e(E)},set value(a){l(E,a)},$$legacy:!0}),o(se);var re=t(se,2),Je=t(d(re),2);const Me=J(()=>e(i)==="skateboard"?f().bushings:b().bushings);C(Je,{get options(){return e(Me)},placeholder:"Choose bushings…",get value(){return e(I)},set value(a){l(I,a)},$$legacy:!0}),o(re);var je=t(re,2),ke=t(d(je),2);ne(ke,1,()=>e(j),$e,(a,u,s)=>{var c=ct(),n=d(c);W(n);var g=t(n,2);W(g);var p=t(g,2);o(c),M(()=>Qe(g,e(u).value)),ve(n,()=>e(u).name,k=>(e(u).name=k,xe(()=>e(j)))),B("input",n,k=>{Se(j,e(j)[s].name=k.currentTarget.value),l(j,[...e(j)])}),B("input",g,k=>{const L=+k.currentTarget.value;Se(j,e(j)[s].value=L),l(j,[...e(j)])}),B("click",p,()=>{l(j,e(j).filter((k,L)=>L!==s))}),$(a,c)});var he=t(ke,2);o(je),Ve(2),o(Y),M(a=>he.disabled=a,[()=>!fe()],J),ve(ge,()=>e(N),a=>l(N,a)),Ze(ee,()=>e(x),a=>l(x,a)),B("click",he,Ae),B("submit",Y,Te),$(U,Y),ce()}var ft=P('<meta name="description" content="Start building your own skateboard or rollerskates.">'),gt=P('<h1>Create a New Build</h1> <div class="container"><!></div>',1);function qt(U,h){de(h,!1);let O=_({}),f=F(h,"data",8);const b=Ce(ue);_e(()=>{ue.subscribe(x=>{l(O,x||{})})});async function v(x){const T=x.detail,{token:S}=Ce(et),R=await fetch("https://3ee.dev/skatebuild/api/builds/save/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"https://skatebuild.pro",Authorization:"Token "+S},mode:"cors",body:JSON.stringify(T)});if(R.ok){const q=await R.json();ue.set(q),await tt(`/builds/${q.owner_username}/${q.slug}`)}else console.error("Save failed",await R.json())}pe();var m=gt();Ge(x=>{var T=ft();We.title="Build your own Skateboard or Rollerskate",$(x,T)});var N=t(V(m),2),G=d(N);_t(G,Ye(()=>e(O),{get skateboardProducts(){return f().skateboardProducts},get rollerskateProducts(){return f().rollerskateProducts},prefill:b,submit:v})),o(N),$(U,m),ce()}export{qt as component,Rt as universal};
