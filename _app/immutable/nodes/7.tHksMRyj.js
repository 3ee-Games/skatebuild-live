import{t as h,a as _}from"../chunks/Cbs2TP5J.js";import"../chunks/DppSS1ZK.js";import{ak as K,c as s,al as L,am as o,an as i,j as t,o as d,ao as l,ap as Q,aq as R,ar as T}from"../chunks/BQECxIka.js";import{e as U,r as V,s as O}from"../chunks/D7dhJHJ5.js";import{i as $}from"../chunks/BxIlQOsl.js";import{r as S}from"../chunks/C1JmazWi.js";import{b as w}from"../chunks/BHVgj7FX.js";import{p as W}from"../chunks/CWmzcjye.js";import{i as X}from"../chunks/-1FsuQLY.js";import{s as Z,a as ee}from"../chunks/B_XqU4jY.js";import{a as z}from"../chunks/BMexqwi4.js";import{g as ae}from"../chunks/CufRIGZF.js";var te=h('<div class="field svelte-dew4mu"><label for="email" class="svelte-dew4mu">Your Email</label> <input id="email" type="email" placeholder="you@example.com" required class="svelte-dew4mu"></div> <div class="field svelte-dew4mu"><label for="name" class="svelte-dew4mu">Your Name</label> <input id="name" type="text" placeholder="Your Name" required class="svelte-dew4mu"></div>',1),se=h('<div class="error"> </div>'),re=h('<div class="success"> </div>'),oe=h('<div class="container svelte-dew4mu"><h1>Contact</h1> <form><!> <div class="field svelte-dew4mu"><label for="subject" class="svelte-dew4mu">Subject</label> <input id="subject" type="text" placeholder="Subject" required class="svelte-dew4mu"></div> <div class="field svelte-dew4mu"><label for="body" class="svelte-dew4mu">Message</label> <textarea id="body" rows="6" placeholder="How can we assist you?" required class="svelte-dew4mu"></textarea></div> <!> <!> <button type="submit" class="svelte-dew4mu"><span>Submit</span></button></form></div>');function we(A,E){K(E,!1);const[H,J]=Z(),M=()=>ee(z,"$accountData",H);let n=d(""),c=d(""),u=d(""),p=d(""),m=d(""),f=d("");async function P(a){a.preventDefault(),t(m,""),t(f,"");const e=ae(z),r={subject:s(u),body:s(p)};e!=null&&e.token||(r.email=s(n),r.name=s(c));try{const v=await fetch("https://3ee.dev/account/contact/",{method:"POST",headers:{"Content-Type":"application/json",...(e==null?void 0:e.token)&&{Authorization:`Token ${e.token}`}},body:JSON.stringify(r)}),b=await v.json().catch(()=>({}));v.ok?(t(f,"Your message has been sent!"),t(u,""),t(p,""),e!=null&&e.token||(t(n,""),t(c,""))):t(m,b.detail||"Submission failed")}catch{t(m,"Network error")}}X();var y=oe(),x=o(i(y),2),q=i(x);{var B=a=>{var e=te(),r=R(e),v=o(i(r),2);S(v),l(r);var b=o(r,2),C=o(i(b),2);S(C),l(b),w(v,()=>s(n),k=>t(n,k)),w(C,()=>s(c),k=>t(c,k)),_(a,e)};$(q,a=>{var e;(e=M())!=null&&e.token||a(B)})}var g=o(q,2),D=o(i(g),2);S(D),l(g);var j=o(g,2),N=o(i(j),2);V(N),l(j);var Y=o(j,2);{var F=a=>{var e=se(),r=i(e,!0);l(e),T(()=>O(r,s(m))),_(a,e)};$(Y,a=>{s(m)&&a(F)})}var G=o(Y,2);{var I=a=>{var e=re(),r=i(e,!0);l(e),T(()=>O(r,s(f))),_(a,e)};$(G,a=>{s(f)&&a(I)})}Q(2),l(x),l(y),w(D,()=>s(u),a=>t(u,a)),w(N,()=>s(p),a=>t(p,a)),U("submit",x,W(P)),_(A,y),L(),J()}export{we as component};
