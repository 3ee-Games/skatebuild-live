import{a as te}from"../chunks/Bwh0lwj5.js";import{g as X}from"../chunks/CZSC437v.js";import{t as I,b as S,c as he,e as ve}from"../chunks/sVH7KyVU.js";import{ak as le,am as v,an as r,ao as n,g as a,aP as G,ar as K,al as ce,aQ as ae,v as s,aq as $,ap as ee,o as ge}from"../chunks/B7593ALr.js";import{d as se,s as F,e as Ce}from"../chunks/BuysMPOX.js";import{i as D}from"../chunks/Bsp-WgAa.js";import{s as Z,r as Te}from"../chunks/7y99m61e.js";import{s as ie}from"../chunks/BzrWFNLq.js";import{s as ye}from"../chunks/8xETUTxT.js";import{p as W}from"../chunks/BlorkeUt.js";import{e as Ae,i as Ee}from"../chunks/DlAme5BV.js";import{b as je}from"../chunks/BKZrsII3.js";import{o as Re}from"../chunks/DNQVjnRK.js";import"../chunks/BlV5JtZD.js";const Me=async({fetch:i})=>{let e=null,t;const{token:o}=X(te)||{};if(!o)return{subscription:e,paymentResponse:{success:!1}};const d=await(await i("https://3ee.dev/account/get-stripe-user-subscription/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Token "+o},mode:"cors"})).json();return e=d&&Object.keys(d).length>0?d:null,t=await(await i("https://3ee.dev/account/payments/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Token "+o},mode:"cors"})).json(),{subscription:e,paymentResponse:t}},Gt=Object.freeze(Object.defineProperty({__proto__:null,load:Me},Symbol.toStringTag,{value:"Module"})),Le="data:image/svg+xml,%3csvg%20style='height:%20512px;%20width:%20512px;'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M0%200h512v512H0z'%20fill='%23d6e010'%20fill-opacity='0'%3e%3c/path%3e%3cg%20class=''%20style=''%20transform='translate(0,0)'%3e%3cpath%20d='M256%2016C123.45%2016%2016%20123.45%2016%20256s107.45%20240%20240%20240%20240-107.45%20240-240S388.55%2016%20256%2016zm0%2060c99.41%200%20180%2080.59%20180%20180s-80.59%20180-180%20180S76%20355.41%2076%20256%20156.59%2076%20256%2076zm-80.625%2060c-.97-.005-2.006.112-3.063.313v-.032c-18.297%203.436-45.264%2034.743-33.375%2046.626l73.157%2073.125-73.156%2073.126c-14.63%2014.625%2029.275%2058.534%2043.906%2043.906L256%20299.906l73.156%2073.156c14.63%2014.628%2058.537-29.28%2043.906-43.906l-73.156-73.125%2073.156-73.124c14.63-14.625-29.275-58.5-43.906-43.875L256%20212.157l-73.156-73.125c-2.06-2.046-4.56-3.015-7.47-3.03z'%20fill='%23ffffff'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e",fe="data:image/svg+xml,%3csvg%20style='height:%20512px;%20width:%20512px;'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M0%200h512v512H0z'%20fill='%23d6e010'%20fill-opacity='0'%3e%3c/path%3e%3cg%20class=''%20style=''%20transform='translate(0,0)'%3e%3cpath%20d='M247%2025.076%20107.053%20130.004l64.996%2032.486L247%20106.297v-81.22zm18%200v81.22l74.95%2056.194%2065-32.488L265%2025.076zm9.277%2022.307%2036.63%2026.437c-25.125-4.207-29.74%209.2-37.348%2028.8l.717-55.237zm-37.79%203.926-.274%2033.362c-22.052%201.182-56.787%2014.423-107.893%2043.99L236.488%2051.31zM256%20122.044l-74%2055.48v156.948l74%2055.482%2074-55.482V177.527l-74-55.482zm4.215%2017.67c-37.503%2033.84-60.642%20164.833-63.65%20199.094l-.35-151.095%2064-48zM99%20146.1v219.8l65-32.488V178.588L99%20146.1zm314%200-65%2032.488v154.824l65%2032.488V146.1zm-301.352%2023.31%2040.473%2020.83c-46.28%2038.757-30.79%20122.693-41.876%20162.572l1.404-183.402zm60.4%20180.1-64.995%2032.486L247%20486.924v-81.22l-74.95-56.194zm167.903%200L265%20405.703v81.22l139.947-104.927-64.996-32.486zm-169.415%2017.172c-19.594%2016.282-16.745%2024.365%204.477%2054.412l-44.246-38.018%2039.77-16.394z'%20fill='%23ffffff'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e";var Ie=(i,e,t)=>e(t),Oe=(i,e,t)=>e(t),qe=I('<p class="error svelte-1qo9zms"> </p>'),Be=I(`<div class="marketing-plans svelte-1qo9zms"><h2>Support SkateBuild</h2> <p>SkateBuild is just getting started—and we need your help to keep the servers running and improve
		features. Early supporters will be immortalized with a limited “Early Supporter” badge on their
		profile. Your contribution helps cover hosting costs and shows you're part of our founding
		community.</p> <h3>Choose Your Support Level</h3> <div class="build-grid svelte-1qo9zms"><div class="card svelte-1qo9zms"><div class="card-content svelte-1qo9zms"><h3 class="svelte-1qo9zms">Monthly</h3> <p class="priceText"><span class="greenHighlight svelte-1qo9zms">$2.00</span> per month</p> <button class="svelte-1qo9zms"><span> </span></button></div></div> <div class="card svelte-1qo9zms"><div class="card-content svelte-1qo9zms"><h3 class="svelte-1qo9zms">Yearly</h3> <p class="priceText"><span class="greenHighlight svelte-1qo9zms">$12.00</span> per year</p> <button class="svelte-1qo9zms"><span> </span></button></div></div></div> <!></div>`);function be(i,e){le(e,!0);let t=W(e,"payments",19,()=>[]),o=W(e,"onRequirePayment",3,()=>{}),l=W(e,"onSubscribed",3,()=>{});const d="price_1RW5SMERvP25GWwRdcl3huBf",c="price_1RW5UxERvP25GWwRvIfpesTp";let m=ae(()=>t().length>0?t()[0].id:null),g=G(!1),k=G("");async function P(j){if(!a(m)){o()();return}s(g,!0),s(k,"");const{token:A}=X(te)||{};if(!A){s(k,"Not authenticated."),s(g,!1);return}const C=t().find(Q=>Q.id===a(m));if(!C||!C.customer){o()(),s(g,!1);return}const O=C.customer;try{const L=await(await fetch("https://3ee.dev/account/subscribe/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${A}`},mode:"cors",body:JSON.stringify({customer_id:O,payment_method_id:a(m),price_id:j,modifySubscription:!1})})).json();if(L.success){l()();const U=X(ie),q=await fetch("https://3ee.dev/skatebuild/api/profiles/save/",{method:"POST",headers:{Accept:"application/json","Access-Control-Allow-Origin":"https://skatebuild.pro","Content-Type":"application/json",Authorization:`Token ${A}`},mode:"cors",body:JSON.stringify(U)}),J=await q.json();q.ok?ie.set(J):console.error("Profile save failed:",J.detail||"Unknown error")}else s(k,L.message||"Subscription failed.",!0)}catch(Q){console.error("Error subscribing:",Q),s(k,"Unable to subscribe at this time.")}s(g,!1)}var N=Be(),V=v(r(N),6),R=r(V),T=r(R),M=v(r(T),4);M.__click=[Ie,P,d];var Y=r(M),b=r(Y,!0);n(Y),n(M),n(T),n(R);var y=v(R,2),z=r(y),x=v(r(z),4);x.__click=[Oe,P,c];var E=r(x),h=r(E,!0);n(E),n(x),n(z),n(y),n(V);var u=v(V,2);{var _=j=>{var A=qe(),C=r(A,!0);n(A),K(()=>F(C,a(k))),S(j,A)};D(u,j=>{a(k)&&j(_)})}n(N),K(()=>{ye(R,`opacity: ${a(g)?.5:1}`),M.disabled=a(g),F(b,a(g)?"Processing…":"Subscribe"),ye(y,`opacity: ${a(g)?.5:1}`),x.disabled=a(g),F(h,a(g)?"Processing…":"Subscribe")}),S(i,N),ce()}se(["click"]);const _e="data:image/svg+xml,%3csvg%20style='height:%20512px;%20width:%20512px;'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M0%200h512v512H0z'%20fill='%23d6e010'%20fill-opacity='0'%3e%3c/path%3e%3cg%20class=''%20style=''%20transform='translate(0,0)'%3e%3cpath%20d='M235.344%2031.188c-35.92.543-70.472%206.628-102.97%2018l5.72%2017.468c30.61-10.843%2063.185-16.653%2097.187-17.156l.064-18.313zm18.687.187-.06%2018.375c46.9%201.963%2096.236%2013.842%20146.56%2036.47l9.376-16.25C356.84%2045.9%20304.253%2033.282%20254.03%2031.374zm-139.093%2024.5c-20.133%208.42-39.376%2018.953-57.562%2031.5l8.813%2016.53c17.207-12.117%2035.41-22.284%2054.468-30.436l-5.72-17.595zm312.97%2020.25-61.5%20106.53%2055.124%2031.814%2061.5-106.532-55.124-31.813zm-174.063%206.313-.03%2018.406c39.736%201.29%2080.36%2011.3%20120.342%2031.062l9.375-16.22c-42.846-21.33-86.708-32.012-129.686-33.25zm-18.688.062c-29.644%201.034-58.722%206.555-86.625%2016.156l5.72%2017.53c26.066-9.063%2053.198-14.28%2080.875-15.28l.03-18.406zM42.126%2098.53a335.26%20335.26%200%200%200-23.876%2020.5l9.97%2016.345a322.214%20322.214%200%200%201%2022.874-20.125l-8.938-16.72h-.03zm88.905%206.72c-17.292%207.142-34.04%2015.886-50.124%2026.125l8.813%2016.5c15.13-9.78%2030.847-18.16%2047.06-25l-5.75-17.625zm122.626%2035.28-.062%2018.44c30.17%201.18%2061.405%207.815%2093.156%2020.405l9.438-16.344c-34.7-14.046-69.15-21.353-102.532-22.5zm-18.687.032c-23.744.82-46.85%204.73-69%2011.563l5.718%2017.5c20.297-6.28%2041.433-9.915%2063.218-10.688l.063-18.375zm-169.626%201.375a349.067%20349.067%200%200%200-22.406%2017.5l9.874%2016.157a337.1%20337.1%200%200%201%2021.407-17.063l-8.876-16.593zm82.97%2016.344c-14.515%205.62-28.545%2012.503-42.033%2020.595l8.782%2016.406c12.534-7.633%2025.55-14.124%2039-19.436l-5.75-17.563zM90.53%20189.03a295.09%20295.09%200%200%200-20.155%2015.314l9.844%2016.125a282.991%20282.991%200%200%201%2019.155-14.876L90.53%20189.03zm279.19%2017.126L292.28%20340.25a135.268%20135.268%200%200%201%2031.94%2013.563l75.31-130.47-29.81-17.187zm-114.033%20147.78c-60.607.002-110.206%2045.816-116.406%20104.752h82.126a35.826%2035.826%200%200%201-3.437-15.344c0-19.872%2016.315-36.156%2036.186-36.156%2019.872%200%2036.188%2016.284%2036.188%2036.156%200%205.475-1.23%2010.674-3.438%2015.344h85.188c-6.2-58.936-55.8-104.75-116.406-104.75zm-1.53%2071.94c-9.773%200-17.5%207.696-17.5%2017.468%200%206.678%203.626%2012.39%209.03%2015.344h16.938c5.404-2.955%209.03-8.666%209.03-15.344%200-9.772-7.727-17.47-17.5-17.47zm-153.47%2051.5v15.687h303.344v-15.688H100.69z'%20fill='%23ffffff'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e",we="data:image/svg+xml,%3csvg%20style='height:%20512px;%20width:%20512px;'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M0%200h512v512H0z'%20fill='%23d6e010'%20fill-opacity='0'%3e%3c/path%3e%3cg%20class=''%20style=''%20transform='translate(0,0)'%3e%3cpath%20d='M256%2027.845c-21.563%200-48.67%201.224-69.041%209.357C166.589%2045.336%20153%2058.047%20153%2086.845v51.847a125.34%20125.34%200%200%201%2019.988-1.732c3.353-.02%206.693.103%2010.012.355v-38.47c0-16%2011.186-28.155%2024.975-35.05%2013.788-6.893%2030.9-9.95%2048.025-9.95s34.237%203.057%2048.025%209.95C317.815%2070.69%20329%2082.846%20329%2098.846v38.478a124.58%20124.58%200%200%201%2030%201.377V86.845c0-28.798-13.589-41.51-33.959-49.643-20.37-8.133-47.478-9.357-69.041-9.357zm-83.12%20127.093a107.73%20107.73%200%200%200-22.886%202.682C109.396%20166.847%2073%20198.594%2073%20258.845c0%2043%2037.72%2089.974%2081.213%20131.49%2021.747%2020.758%2044.64%2040.173%2064.25%2057.52%2015.099%2013.356%2028.124%2025.257%2037.537%2036.3%209.413-11.043%2022.438-22.944%2037.537-36.3%2019.61-17.347%2042.503-36.762%2064.25-57.52C401.28%20348.819%20439%20301.845%20439%20258.845c0-60.25-36.396-91.998-76.994-101.225-40.598-9.227-83.648%205.56-97.65%2040.567L256%20219.075l-8.355-20.888c-11.377-28.443-41.931-43.537-74.764-43.249zM256%20234.845a44.488%2044.488%200%200%201%2044.488%2044.488A44.488%2044.488%200%200%201%20284%20313.876l16.488%2098.922h-88.976l16.49-98.936a44.488%2044.488%200%200%201-16.49-34.529A44.488%2044.488%200%200%201%20256%20234.845z'%20fill='%23ffffff'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e";var Ne=(i,e)=>e("yearly"),Ue=I('<button class="svelte-s08len"><img alt="Switch" class="svelte-s08len"> <span class="svelte-s08len"> </span></button> <button disabled class="svelte-s08len"><img alt="Current" class="svelte-s08len"> <span class="svelte-s08len">Monthly (current)</span></button>',1),De=(i,e)=>e("monthly"),Ye=I('<button disabled class="svelte-s08len"><img alt="Current" class="svelte-s08len"> <span class="svelte-s08len">Yearly (current)</span></button> <button class="svelte-s08len"><img alt="Switch" class="svelte-s08len"> <span class="svelte-s08len"> </span></button>',1),Ge=I('<p class="error svelte-s08len"> </p>'),He=I('<div class="current-subscription svelte-s08len"><h2 class="greenHighlight svelte-s08len">Your Subscription</h2> <p><strong>Plan:</strong> <span class="priceHighlight svelte-s08len"> </span></p> <p><strong>Start:</strong> <!> - <strong>Ends:</strong> <!></p> <p><strong>Status:</strong> </p> <div class="switch-options svelte-s08len"><!></div> <!></div>');function We(i,e){le(e,!0);let t=W(e,"onSubscriptionChange",3,()=>{});const o="price_1RW5SMERvP25GWwRdcl3huBf",l="price_1RW5UxERvP25GWwRvIfpesTp",d={[o]:{amount:2,interval:"month"},[l]:{amount:12,interval:"year"}};let c=G(!1),m=G(""),g=ae(()=>{var T;return((T=e.subscription)==null?void 0:T.price_id)===o?"monthly":"yearly"}),k=ae(()=>{var T;return(T=e.subscription)!=null&&T.price_id&&d[e.subscription.price_id]?`$${d[e.subscription.price_id].amount.toFixed(2)} / ${d[e.subscription.price_id].interval}`:""});async function P(T){if(!e.subscription||T===a(g))return;s(c,!0),s(m,"");const{token:M}=X(te)||{};if(!M){s(m,"Not authenticated."),s(c,!1);return}let Y;try{const E=await(await fetch("https://3ee.dev/account/payments/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${M}`},mode:"cors"})).json();if(!E.success||!Array.isArray(E.payments)||!E.payments.length){s(m,"No payment methods available to switch plan."),s(c,!1);return}Y=E.payments[0]}catch(x){console.error("Error fetching payments:",x),s(m,"Unable to retrieve payment methods."),s(c,!1);return}const b=Y.customer,y=Y.id,z=T==="monthly"?o:l;try{const E=await(await fetch("https://3ee.dev/account/subscribe/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${M}`},mode:"cors",body:JSON.stringify({customer_id:b,payment_method_id:y,price_id:z,modifySubscription:!0})})).json();if(E.success){t()();const h=X(ie);await fetch("https://3ee.dev/skatebuild/api/profiles/save/",{method:"POST",headers:{Accept:"application/json","Access-Control-Allow-Origin":"https://skatebuild.pro","Content-Type":"application/json",Authorization:`Token ${M}`},mode:"cors",body:JSON.stringify(h)})}else s(m,E.message||"Unable to switch plan.",!0)}catch(x){console.error("Error modifying subscription:",x),s(m,"Failed to switch plan.")}s(c,!1)}var N=he(),V=$(N);{var R=T=>{var M=He(),Y=v(r(M),2),b=v(r(Y),2),y=r(b,!0);n(b),n(Y);var z=v(Y,2),x=v(r(z),2);{var E=p=>{var f=ve();K(w=>F(f,w),[()=>new Date(e.subscription.current_period_start).toLocaleDateString()]),S(p,f)},h=p=>{var f=ve("N/A");S(p,f)};D(x,p=>{e.subscription.current_period_start?p(E):p(h,!1)})}var u=v(x,4);{var _=p=>{var f=ve();K(w=>F(f,w),[()=>new Date(e.subscription.current_period_end).toLocaleDateString()]),S(p,f)},j=p=>{var f=ve("N/A");S(p,f)};D(u,p=>{e.subscription.current_period_end?p(_):p(j,!1)})}n(z);var A=v(z,2),C=v(r(A));n(A);var O=v(A,2),Q=r(O);{var L=p=>{var f=Ue(),w=$(f);w.__click=[Ne,P];var H=r(w);Z(H,"src",_e);var B=v(H,2),de=r(B,!0);n(B),n(w);var ne=v(w,2),me=r(ne);Z(me,"src",we),ee(2),n(ne),K(()=>{w.disabled=a(c),F(de,a(c)?"Processing…":`Switch $${d[l].amount}/year`)}),S(p,f)},U=p=>{var f=Ye(),w=$(f),H=r(w);Z(H,"src",we),ee(2),n(w);var B=v(w,2);B.__click=[De,P];var de=r(B);Z(de,"src",_e);var ne=v(de,2),me=r(ne,!0);n(ne),n(B),K(()=>{B.disabled=a(c),F(me,a(c)?"Processing…":`Switch $${d[o].amount}/month`)}),S(p,f)};D(Q,p=>{a(g)==="monthly"?p(L):p(U,!1)})}n(O);var q=v(O,2);{var J=p=>{var f=Ge(),w=r(f,!0);n(f),K(()=>F(w,a(m))),S(p,f)};D(q,p=>{a(m)&&p(J)})}n(M),K(()=>{F(y,a(k)),F(C,` ${e.subscription.status??""}`)}),S(T,M)};D(V,T=>{e.subscription&&T(R)})}S(i,N),ce()}se(["click"]);var xe="basil",Ve=function(e){return e===3?"v3":e},Pe="https://js.stripe.com",Je="".concat(Pe,"/").concat(xe,"/stripe.js"),Fe=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,Qe=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var Ke=function(e){return Fe.test(e)||Qe.test(e)},Xe=function(){for(var e=document.querySelectorAll('script[src^="'.concat(Pe,'"]')),t=0;t<e.length;t++){var o=e[t];if(Ke(o.src))return o}return null},Se=function(e){var t="",o=document.createElement("script");o.src="".concat(Je).concat(t);var l=document.head||document.body;if(!l)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return l.appendChild(o),o},Ze=function(e,t){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.3.1",startTime:t})},re=null,ue=null,pe=null,$e=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}},et=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}},tt=function(e){return re!==null?re:(re=new Promise(function(t,o){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe){t(window.Stripe);return}try{var l=Xe();if(!(l&&e)){if(!l)l=Se(e);else if(l&&pe!==null&&ue!==null){var d;l.removeEventListener("load",pe),l.removeEventListener("error",ue),(d=l.parentNode)===null||d===void 0||d.removeChild(l),l=Se(e)}}pe=et(t,o),ue=$e(o),l.addEventListener("load",pe),l.addEventListener("error",ue)}catch(c){o(c);return}}),re.catch(function(t){return re=null,Promise.reject(t)}))},at=function(e,t,o){if(e===null)return null;var l=t[0],d=l.match(/^pk_test/),c=Ve(e.version),m=xe;d&&c!==m&&console.warn("Stripe.js@".concat(c," was loaded on the page, but @stripe/stripe-js@").concat("7.3.1"," expected Stripe.js@").concat(m,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var g=e.apply(void 0,t);return Ze(g,o),g},oe,ke=!1,ze=function(){return oe||(oe=tt(null).catch(function(e){return oe=null,Promise.reject(e)}),oe)};Promise.resolve().then(function(){return ze()}).catch(function(i){ke||console.warn(i)});var st=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];ke=!0;var l=Date.now();return ze().then(function(d){return at(d,t,l)})};function nt(i,e){e()()}var rt=I('<p style="color: #e53e3e; margin-top: 0.5rem"> </p>'),ot=I('<button type="button" class="cancel-button svelte-14gutcv"><span>Cancel</span></button>'),it=I('<form class="svelte-14gutcv"><label for="zip" class="svelte-14gutcv">Postal Code</label> <input id="zip" type="text" placeholder="ZIP or postal code" required class="svelte-14gutcv"> <label for="card-element" class="svelte-14gutcv">Card Details</label> <div id="card-element" style="padding: 0.75rem; border: 1px solid #cbd5e0; border-radius: 0.375rem;"></div> <!> <div style="margin-top: 1rem; display: flex; gap: 0.5rem;"><button type="submit" class="svelte-14gutcv"><span> </span></button> <!></div></form>');function lt(i,e){le(e,!0);let t=W(e,"editing",3,!1);W(e,"customerId",3,null);let o=W(e,"onPaymentAdded",3,u=>{}),l=W(e,"onPaymentAddCancel",3,()=>{});const d="pk_test_51MCQ24ERvP25GWwRjbby9IQv3z4FEh2qpjjK1DTjZNApqTvf5bQNE98VJnT2SjkpLEgJMEroKnSWdpdeCESQFbgZ00qkgzBBCh";let c=null,m=null,g=null,k=G(""),P=G(""),N=G(!1);Re(async()=>{try{if(c=await st(d),!c){s(P,"Unable to load Stripe.");return}m=c.elements();const u={base:{iconColor:"rgb(56, 153, 237)",color:"#fff",fontWeight:"500",fontFamily:"Roboto, Open Sans, Segoe UI, sans-serif",fontSize:"18px",fontSmoothing:"antialiased",":-webkit-autofill":{color:"#fce883"},"::placeholder":{color:"rgb(255, 122, 32)"}},invalid:{iconColor:"#fff",color:"rgb(250, 44, 202)"}};g=m.create("card",{style:u,hidePostalCode:!0}),g.mount("#card-element"),g.on("change",_=>{s(P,_.error?_.error.message:"",!0)})}catch(u){console.error(u),s(P,"Error initializing Stripe.")}});async function V(u){if(u.preventDefault(),!c||!m||!g){s(P,"Stripe is not ready.");return}s(N,!0),s(P,"");const{error:_,paymentMethod:j}=await c.createPaymentMethod({type:"card",card:g,billing_details:{address:{postal_code:a(k)||void 0}}});if(_){s(P,_.message||"PaymentMethod creation failed.",!0),s(N,!1);return}if(!(j!=null&&j.id)){s(P,"Unable to retrieve PaymentMethod ID."),s(N,!1);return}o()({payment_method_id:j.id,editing:t()})}var R=it(),T=v(r(R),2);Te(T);var M=v(T,6);{var Y=u=>{var _=rt(),j=r(_,!0);n(_),K(()=>F(j,a(P))),S(u,_)};D(M,u=>{a(P)&&u(Y)})}var b=v(M,2),y=r(b),z=r(y),x=r(z,!0);n(z),n(y);var E=v(y,2);{var h=u=>{var _=ot();_.__click=[nt,l],S(u,_)};D(E,u=>{t()&&u(h)})}n(b),n(R),K(()=>{y.disabled=a(N),F(x,a(N)?"Processing…":t()?"Update Card":"Add Card")}),Ce("submit",R,V),je(T,()=>a(k),u=>s(k,u)),S(i,R),ce()}se(["click"]);const ct="data:image/svg+xml,%3csvg%20style='height:%20512px;%20width:%20512px;'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M0%200h512v512H0z'%20fill='%23d6e010'%20fill-opacity='0'%3e%3c/path%3e%3cg%20class=''%20style=''%20transform='translate(0,0)'%3e%3cpath%20d='m208.242%2024.629-52.058%2095.205%2095.207%2052.059%2017.271-31.586-42.424-23.198A143.26%20143.26%200%200%201%20256%20114c78.638%200%20142%2063.362%20142%20142s-63.362%20142-142%20142-142-63.362-142-142c0-16.46%202.785-32.247%207.896-46.928l-32.32-16.16C82.106%20212.535%2078%20233.798%2078%20256c0%2098.093%2079.907%20178%20178%20178s178-79.907%20178-178S354.093%2078%20256%2078c-13.103%200-25.875%201.44-38.18%204.148l22.008-40.25-31.586-17.27zm104.27%20130.379L247%20253.275V368h18V258.725l62.488-93.733-14.976-9.984z'%20fill='%23ffffff'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e",dt="data:image/svg+xml,%3csvg%20style='height:%20512px;%20width:%20512px;'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M0%200h512v512H0z'%20fill='%23d6e010'%20fill-opacity='0'%3e%3c/path%3e%3cg%20class=''%20style=''%20transform='translate(0,0)'%3e%3cpath%20d='m256%2029.816-231%20154v106.368l231-154%20231%20154V183.816zm0%20128.043L105%20259.783v90.283l151-101.925%20151%20101.925v-90.283zm0%20112-87%2058.725v67.6l87-58%2087%2058v-67.6zm0%2089.957-87%2058v64.368l87-58%2087%2058v-64.368z'%20fill='%23ffffff'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e";function vt(i,e,t,o){s(e,!1),s(t,null),s(o,!0)}var ut=(i,e,t)=>e(a(t)),pt=(i,e,t)=>e(a(t).id),mt=I('<li class="svelte-1nvf3e3"><p class="cardTitle svelte-1nvf3e3"><strong> </strong></p> <button class="svelte-1nvf3e3"><span class="svelte-1nvf3e3">Edit</span></button> <button class="cancelBtn svelte-1nvf3e3"><span class="svelte-1nvf3e3">Delete</span></button></li>'),ft=I('<ul class="svelte-1nvf3e3"></ul>'),ht=I("<p>No cards on file.</p>"),gt=I('<div class="payment-list svelte-1nvf3e3"><h2>Your Cards</h2> <!> <div class="button-actions svelte-1nvf3e3"><button class="svelte-1nvf3e3"><img alt="Go back to main menu icon" class="svelte-1nvf3e3"> <span>Add New Card</span></button> <button class="cancelBtn svelte-1nvf3e3"><img alt="Go back to main menu icon" class="svelte-1nvf3e3"> <span>Back</span></button></div></div>');function yt(i,e){le(e,!0),W(e,"editing",3,!1);let t=W(e,"payments",19,()=>[]),o=W(e,"onPaymentAdded",3,()=>{}),l=W(e,"onPaymentAddCancel",3,()=>{}),d=G(!1),c=G(!1),m=G(null);async function g(b){const{token:y}=X(te)||{};if(y)try{const x=await(await fetch("https://3ee.dev/account/payment-delete/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${y}`},mode:"cors",body:JSON.stringify({payment_method_id:b})})).json();x.success?o()():alert(`Error deleting card: ${x.message}`)}catch(z){console.error("Network or server error when deleting payment:",z),alert("Unable to delete card at this time.")}}function k(b){s(c,!0),s(m,b,!0),s(d,!0)}function P(b){const{payment_method_id:y,editing:z}=b;N(y,z)}async function N(b,y){const{token:z}=X(te)||{};if(!z)return;let x,E;y&&a(m)?(x="https://3ee.dev/account/payment-update/",E={customer_id:a(m).customer,old_payment_method_id:a(m).id,new_payment_method_id:b}):(x="https://3ee.dev/account/create-customer/",E={payment_method_id:b});try{const u=await(await fetch(x,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${z}`},mode:"cors",body:JSON.stringify(E)})).json();u.success?(s(d,!1),o()()):alert(`Error: ${u.message}`)}catch(h){console.error("Network or server error when submitting payment:",h),alert("Unable to save payment at this time.")}}function V(){s(d,!1),l()()}var R=he(),T=$(R);{var M=b=>{var y=gt(),z=v(r(y),2);{var x=C=>{var O=ft();Ae(O,21,t,Ee,(Q,L)=>{var U=mt(),q=r(U),J=r(q),p=r(J);n(J),n(q);var f=v(q,2);f.__click=[ut,k,L];var w=v(f,2);w.__click=[pt,g,L],n(U),K(()=>F(p,`${a(L).card.last4??""} (Exp ${a(L).card.exp_month??""}/${a(L).card.exp_year??""})`)),S(Q,U)}),n(O),S(C,O)},E=C=>{var O=ht();S(C,O)};D(z,C=>{Array.isArray(t())&&t().length>0?C(x):C(E,!1)})}var h=v(z,2),u=r(h);u.__click=[vt,c,m,d];var _=r(u);Z(_,"src",dt),ee(2),n(u);var j=v(u,2);j.__click=function(...C){var O;(O=l())==null||O.apply(this,C)};var A=r(j);Z(A,"src",ct),ee(2),n(j),n(h),n(y),S(b,y)},Y=b=>{const y=ae(()=>a(c)?a(m).customer:null);lt(b,{get editing(){return a(c)},get customerId(){return a(y)},onPaymentAdded:P,onPaymentAddCancel:V})};D(T,b=>{a(d)?b(Y,!1):b(M)})}S(i,R),ce()}se(["click"]);var bt=I('<div class="success-message svelte-epyl68"><h2 class="svelte-epyl68">Thanks for supporting SkateBuild</h2> <p class="svelte-epyl68">Your subscription is now active!</p></div>');function _t(i){var e=bt();S(i,e)}var wt=I('<div class="overlay svelte-b4mu14"><div class="dialog svelte-b4mu14"><p class="svelte-b4mu14">Are you sure you want to cancel your subscription?</p> <div class="buttons svelte-b4mu14"><button class="svelte-b4mu14"><span>No, Go Back</span></button> <button class="cancelBtn svelte-b4mu14"><span>Yes, Cancel</span></button></div></div></div>');function St(i,e){let t=W(e,"onConfirm",3,()=>{}),o=W(e,"onCancel",3,()=>{});var l=wt(),d=r(l),c=v(r(d),2),m=r(c);m.__click=function(...k){var P;(P=o())==null||P.apply(this,k)};var g=v(m,2);g.__click=function(...k){var P;(P=t())==null||P.apply(this,k)},n(c),n(d),n(l),S(i,l)}se(["click"]);function xt(i,e){s(e,!0)}var Pt=I('<!> <!> <div class="subscription-actions svelte-xrxfwt"><button class="svelte-xrxfwt"><img alt="Manage payments icon" class="svelte-xrxfwt"> <span>Payment Methods</span></button> <button class="cancelBtn svelte-xrxfwt"><img alt="Cancel icon" class="svelte-xrxfwt"> <span>Cancel Subscription</span></button></div> <!>',1),kt=I('<div class="subscription-actions svelte-xrxfwt"><button class="svelte-xrxfwt"><img alt="Manage payments icon" class="svelte-xrxfwt"> <span>Payment Methods</span></button></div>'),zt=I(`<!> <div class="canceled svelte-xrxfwt"><h2 class="svelte-xrxfwt">Your subscription is canceled</h2> <p>You previously subscribed to SkateBuild but your subscription is no longer active. To
			reactivate, please pick a plan or a new payment method.</p></div> <!>`,1),Ct=I('<div class="subscription-actions svelte-xrxfwt"><button class="svelte-xrxfwt"><img alt="Manage payments icon" class="svelte-xrxfwt"> <span>Payment Methods</span></button></div>'),Tt=I("<!> <!>",1);function Ht(i,e){le(e,!0);let t=G(ge(e.data.subscription)),o=G(ge(e.data.paymentResponse||{success:!1})),l=G(!1),d=G(!1),c=G(!1),m=ae(()=>a(t)&&a(t).status==="active"),g=ae(()=>a(t)&&a(t).status==="canceled"),k=ae(()=>a(o).payments??[]);async function P(){const{token:h}=X(te)||{};if(h)try{const u=await fetch("https://3ee.dev/account/payments/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${h}`},mode:"cors"});s(o,await u.json(),!0)}catch{s(o,{success:!1},!0)}}async function N(){const{token:h}=X(te)||{};if(h)try{const _=await(await fetch("https://3ee.dev/account/get-stripe-user-subscription/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Token ${h}`},mode:"cors"})).json();s(t,_&&Object.keys(_).length>0?_:null,!0)}catch{s(t,null)}}function V(){s(l,!0),N()}function R(){s(d,!0)}function T(){s(d,!1),P()}function M(){s(d,!1)}async function Y(){if(s(c,!1),!a(m))return;const{token:h}=X(te)||{};if(h)try{const _=await(await fetch("https://3ee.dev/account/subscribe-cancel/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${h}`},mode:"cors"})).json();if(_.success){N();const j=X(ie),A=await fetch("https://3ee.dev/skatebuild/api/profiles/save/",{method:"POST",headers:{Accept:"application/json","Access-Control-Allow-Origin":"https://skatebuild.pro","Content-Type":"application/json",Authorization:`Token ${h}`},mode:"cors",body:JSON.stringify(j)}),C=await A.json();A.ok?ie.set(C):console.error("Profile save failed:",C.detail||"Unknown error")}else alert(_.message||"Unable to cancel subscription.")}catch{alert("Failed to cancel subscription.")}}function b(){s(c,!1)}var y=he(),z=$(y);{var x=h=>{yt(h,{editing:!1,get payments(){return a(k)},onPaymentAdded:T,onPaymentAddCancel:M})},E=(h,u)=>{{var _=A=>{var C=Pt(),O=$(C);{var Q=B=>{_t(B)};D(O,B=>{a(l)&&B(Q)})}var L=v(O,2);We(L,{get subscription(){return a(t)},onSubscriptionChange:V});var U=v(L,2),q=r(U);q.__click=R;var J=r(q);Z(J,"src",fe),ee(2),n(q);var p=v(q,2);p.__click=[xt,c];var f=r(p);Z(f,"src",Le),ee(2),n(p),n(U);var w=v(U,2);{var H=B=>{St(B,{onConfirm:Y,onCancel:b})};D(w,B=>{a(c)&&B(H)})}S(A,C)},j=(A,C)=>{{var O=L=>{var U=zt(),q=$(U);be(q,{get payments(){return a(k)},onRequirePayment:R,onSubscribed:V});var J=v(q,4);{var p=f=>{var w=kt(),H=r(w);H.__click=R;var B=r(H);Z(B,"src",fe),ee(2),n(H),n(w),S(f,w)};D(J,f=>{a(k).length>0&&f(p)})}S(L,U)},Q=L=>{var U=Tt(),q=$(U);be(q,{get payments(){return a(k)},onRequirePayment:R,onSubscribed:V});var J=v(q,2);{var p=f=>{var w=Ct(),H=r(w);H.__click=R;var B=r(H);Z(B,"src",fe),ee(2),n(H),n(w),S(f,w)};D(J,f=>{a(k).length>0&&f(p)})}S(L,U)};D(A,L=>{a(g)?L(O):L(Q,!1)},C)}};D(h,A=>{a(m)?A(_):A(j,!1)},u)}};D(z,h=>{a(d)?h(x):h(E,!1)})}S(i,y),ce()}se(["click"]);export{Ht as component,Gt as universal};
