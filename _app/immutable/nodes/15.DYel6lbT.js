import{a as te}from"../chunks/DjSiL-jg.js";import{g as Z}from"../chunks/IxWn49b3.js";import{t as O,a as y,c as pe,d as ce}from"../chunks/DRiVrBMz.js";import{ak as re,am as r,an as n,ao as s,g as t,aQ as U,ar as K,al as ie,aN as ae,v as a,aq as $,ap as ee,o as ue}from"../chunks/DGYefiCd.js";import{d as se,s as V,e as ye}from"../chunks/ByZ5mbbd.js";import{i as Y}from"../chunks/CWD507PG.js";import{s as X,r as be}from"../chunks/BVgT1Vhj.js";import{s as oe}from"../chunks/BYCnfF3S.js";import{s as me}from"../chunks/D-mBL8zO.js";import{p as F}from"../chunks/OZP53ftb.js";import{e as _e,i as we}from"../chunks/k-lROdaV.js";import{b as xe}from"../chunks/DEDQ5tvs.js";import{o as ze}from"../chunks/ezTx0NwI.js";import"../chunks/BLulYnNU.js";const ke=async({fetch:_})=>{let e=null,o;const{token:z}=Z(te)||{};if(!z)return{subscription:e,paymentResponse:{success:!1}};const m=await(await _("https://3ee.dev/account/get-stripe-user-subscription/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Token "+z},mode:"cors"})).json();return e=m&&Object.keys(m).length>0?m:null,o=await(await _("https://3ee.dev/account/payments/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Token "+z},mode:"cors"})).json(),{subscription:e,paymentResponse:o}},xt=Object.freeze(Object.defineProperty({__proto__:null,load:ke},Symbol.toStringTag,{value:"Module"})),Pe="data:image/svg+xml,%3csvg%20style='height:%20512px;%20width:%20512px;'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M0%200h512v512H0z'%20fill='%23d6e010'%20fill-opacity='0'%3e%3c/path%3e%3cg%20class=''%20style=''%20transform='translate(0,0)'%3e%3cpath%20d='M256%2016C123.45%2016%2016%20123.45%2016%20256s107.45%20240%20240%20240%20240-107.45%20240-240S388.55%2016%20256%2016zm0%2060c99.41%200%20180%2080.59%20180%20180s-80.59%20180-180%20180S76%20355.41%2076%20256%20156.59%2076%20256%2076zm-80.625%2060c-.97-.005-2.006.112-3.063.313v-.032c-18.297%203.436-45.264%2034.743-33.375%2046.626l73.157%2073.125-73.156%2073.126c-14.63%2014.625%2029.275%2058.534%2043.906%2043.906L256%20299.906l73.156%2073.156c14.63%2014.628%2058.537-29.28%2043.906-43.906l-73.156-73.125%2073.156-73.124c14.63-14.625-29.275-58.5-43.906-43.875L256%20212.157l-73.156-73.125c-2.06-2.046-4.56-3.015-7.47-3.03z'%20fill='%23ffffff'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e",ve="data:image/svg+xml,%3csvg%20style='height:%20512px;%20width:%20512px;'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M0%200h512v512H0z'%20fill='%23d6e010'%20fill-opacity='0'%3e%3c/path%3e%3cg%20class=''%20style=''%20transform='translate(0,0)'%3e%3cpath%20d='M247%2025.076%20107.053%20130.004l64.996%2032.486L247%20106.297v-81.22zm18%200v81.22l74.95%2056.194%2065-32.488L265%2025.076zm9.277%2022.307%2036.63%2026.437c-25.125-4.207-29.74%209.2-37.348%2028.8l.717-55.237zm-37.79%203.926-.274%2033.362c-22.052%201.182-56.787%2014.423-107.893%2043.99L236.488%2051.31zM256%20122.044l-74%2055.48v156.948l74%2055.482%2074-55.482V177.527l-74-55.482zm4.215%2017.67c-37.503%2033.84-60.642%20164.833-63.65%20199.094l-.35-151.095%2064-48zM99%20146.1v219.8l65-32.488V178.588L99%20146.1zm314%200-65%2032.488v154.824l65%2032.488V146.1zm-301.352%2023.31%2040.473%2020.83c-46.28%2038.757-30.79%20122.693-41.876%20162.572l1.404-183.402zm60.4%20180.1-64.995%2032.486L247%20486.924v-81.22l-74.95-56.194zm167.903%200L265%20405.703v81.22l139.947-104.927-64.996-32.486zm-169.415%2017.172c-19.594%2016.282-16.745%2024.365%204.477%2054.412l-44.246-38.018%2039.77-16.394z'%20fill='%23ffffff'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e";var Se=(_,e,o)=>e(o),Ce=(_,e,o)=>e(o),Ae=O('<p class="error svelte-1qo9zms"> </p>'),Te=O(`<div class="marketing-plans svelte-1qo9zms"><h2>Support SkateBuild</h2> <p>SkateBuild is just getting started—and we need your help to keep the servers running and improve
		features. Early supporters will be immortalized with a limited “Early Supporter” badge on their
		profile. Your contribution helps cover hosting costs and shows you're part of our founding
		community.</p> <h3>Choose Your Support Level</h3> <div class="build-grid svelte-1qo9zms"><div class="card svelte-1qo9zms"><div class="card-content svelte-1qo9zms"><h3 class="svelte-1qo9zms">Monthly</h3> <p class="priceText"><span class="greenHighlight svelte-1qo9zms">$2.00</span> per month</p> <button class="svelte-1qo9zms"><span> </span></button></div></div> <div class="card svelte-1qo9zms"><div class="card-content svelte-1qo9zms"><h3 class="svelte-1qo9zms">Yearly</h3> <p class="priceText"><span class="greenHighlight svelte-1qo9zms">$12.00</span> per year</p> <button class="svelte-1qo9zms"><span> </span></button></div></div></div> <!></div>`);function fe(_,e){re(e,!0);let o=F(e,"payments",19,()=>[]),z=F(e,"onRequirePayment",3,()=>{}),B=F(e,"onSubscribed",3,()=>{});const m="price_1RW5SMERvP25GWwRdcl3huBf",d="price_1RW5UxERvP25GWwRvIfpesTp";let p=ae(()=>o().length>0?o()[0].id:null),w=U(!1),k=U("");async function x(j){if(!t(p)){z()();return}a(w,!0),a(k,"");const{token:A}=Z(te)||{};if(!A){a(k,"Not authenticated."),a(w,!1);return}const S=o().find(Q=>Q.id===t(p));if(!S||!S.customer){z()(),a(w,!1);return}const I=S.customer;try{const E=await(await fetch("https://3ee.dev/account/subscribe/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${A}`},mode:"cors",body:JSON.stringify({customer_id:I,payment_method_id:t(p),price_id:j,modifySubscription:!1})})).json();if(E.success){B()();const D=Z(oe),q=await fetch("https://3ee.dev/skatebuild/api/profiles/save/",{method:"POST",headers:{Accept:"application/json","Access-Control-Allow-Origin":"https://skatebuild.pro","Content-Type":"application/json",Authorization:`Token ${A}`},mode:"cors",body:JSON.stringify(D)}),J=await q.json();q.ok?oe.set(J):console.error("Profile save failed:",J.detail||"Unknown error")}else a(k,E.message||"Subscription failed.",!0)}catch(Q){console.error("Error subscribing:",Q),a(k,"Unable to subscribe at this time.")}a(w,!1)}var N=Te(),G=r(n(N),6),M=n(G),C=n(M),R=r(n(C),4);R.__click=[Se,x,m];var H=n(R),f=n(H,!0);s(H),s(R),s(C),s(M);var u=r(M,2),P=n(u),b=r(n(P),4);b.__click=[Ce,x,d];var T=n(b),v=n(T,!0);s(T),s(b),s(P),s(u),s(G);var l=r(G,2);{var h=j=>{var A=Ae(),S=n(A,!0);s(A),K(()=>V(S,t(k))),y(j,A)};Y(l,j=>{t(k)&&j(h)})}s(N),K(()=>{me(M,`opacity: ${t(w)?.5:1}`),R.disabled=t(w),V(f,t(w)?"Processing…":"Subscribe"),me(u,`opacity: ${t(w)?.5:1}`),b.disabled=t(w),V(v,t(w)?"Processing…":"Subscribe")}),y(_,N),ie()}se(["click"]);const he="data:image/svg+xml,%3csvg%20style='height:%20512px;%20width:%20512px;'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M0%200h512v512H0z'%20fill='%23d6e010'%20fill-opacity='0'%3e%3c/path%3e%3cg%20class=''%20style=''%20transform='translate(0,0)'%3e%3cpath%20d='M235.344%2031.188c-35.92.543-70.472%206.628-102.97%2018l5.72%2017.468c30.61-10.843%2063.185-16.653%2097.187-17.156l.064-18.313zm18.687.187-.06%2018.375c46.9%201.963%2096.236%2013.842%20146.56%2036.47l9.376-16.25C356.84%2045.9%20304.253%2033.282%20254.03%2031.374zm-139.093%2024.5c-20.133%208.42-39.376%2018.953-57.562%2031.5l8.813%2016.53c17.207-12.117%2035.41-22.284%2054.468-30.436l-5.72-17.595zm312.97%2020.25-61.5%20106.53%2055.124%2031.814%2061.5-106.532-55.124-31.813zm-174.063%206.313-.03%2018.406c39.736%201.29%2080.36%2011.3%20120.342%2031.062l9.375-16.22c-42.846-21.33-86.708-32.012-129.686-33.25zm-18.688.062c-29.644%201.034-58.722%206.555-86.625%2016.156l5.72%2017.53c26.066-9.063%2053.198-14.28%2080.875-15.28l.03-18.406zM42.126%2098.53a335.26%20335.26%200%200%200-23.876%2020.5l9.97%2016.345a322.214%20322.214%200%200%201%2022.874-20.125l-8.938-16.72h-.03zm88.905%206.72c-17.292%207.142-34.04%2015.886-50.124%2026.125l8.813%2016.5c15.13-9.78%2030.847-18.16%2047.06-25l-5.75-17.625zm122.626%2035.28-.062%2018.44c30.17%201.18%2061.405%207.815%2093.156%2020.405l9.438-16.344c-34.7-14.046-69.15-21.353-102.532-22.5zm-18.687.032c-23.744.82-46.85%204.73-69%2011.563l5.718%2017.5c20.297-6.28%2041.433-9.915%2063.218-10.688l.063-18.375zm-169.626%201.375a349.067%20349.067%200%200%200-22.406%2017.5l9.874%2016.157a337.1%20337.1%200%200%201%2021.407-17.063l-8.876-16.593zm82.97%2016.344c-14.515%205.62-28.545%2012.503-42.033%2020.595l8.782%2016.406c12.534-7.633%2025.55-14.124%2039-19.436l-5.75-17.563zM90.53%20189.03a295.09%20295.09%200%200%200-20.155%2015.314l9.844%2016.125a282.991%20282.991%200%200%201%2019.155-14.876L90.53%20189.03zm279.19%2017.126L292.28%20340.25a135.268%20135.268%200%200%201%2031.94%2013.563l75.31-130.47-29.81-17.187zm-114.033%20147.78c-60.607.002-110.206%2045.816-116.406%20104.752h82.126a35.826%2035.826%200%200%201-3.437-15.344c0-19.872%2016.315-36.156%2036.186-36.156%2019.872%200%2036.188%2016.284%2036.188%2036.156%200%205.475-1.23%2010.674-3.438%2015.344h85.188c-6.2-58.936-55.8-104.75-116.406-104.75zm-1.53%2071.94c-9.773%200-17.5%207.696-17.5%2017.468%200%206.678%203.626%2012.39%209.03%2015.344h16.938c5.404-2.955%209.03-8.666%209.03-15.344%200-9.772-7.727-17.47-17.5-17.47zm-153.47%2051.5v15.687h303.344v-15.688H100.69z'%20fill='%23ffffff'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e",ge="data:image/svg+xml,%3csvg%20style='height:%20512px;%20width:%20512px;'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M0%200h512v512H0z'%20fill='%23d6e010'%20fill-opacity='0'%3e%3c/path%3e%3cg%20class=''%20style=''%20transform='translate(0,0)'%3e%3cpath%20d='M256%2027.845c-21.563%200-48.67%201.224-69.041%209.357C166.589%2045.336%20153%2058.047%20153%2086.845v51.847a125.34%20125.34%200%200%201%2019.988-1.732c3.353-.02%206.693.103%2010.012.355v-38.47c0-16%2011.186-28.155%2024.975-35.05%2013.788-6.893%2030.9-9.95%2048.025-9.95s34.237%203.057%2048.025%209.95C317.815%2070.69%20329%2082.846%20329%2098.846v38.478a124.58%20124.58%200%200%201%2030%201.377V86.845c0-28.798-13.589-41.51-33.959-49.643-20.37-8.133-47.478-9.357-69.041-9.357zm-83.12%20127.093a107.73%20107.73%200%200%200-22.886%202.682C109.396%20166.847%2073%20198.594%2073%20258.845c0%2043%2037.72%2089.974%2081.213%20131.49%2021.747%2020.758%2044.64%2040.173%2064.25%2057.52%2015.099%2013.356%2028.124%2025.257%2037.537%2036.3%209.413-11.043%2022.438-22.944%2037.537-36.3%2019.61-17.347%2042.503-36.762%2064.25-57.52C401.28%20348.819%20439%20301.845%20439%20258.845c0-60.25-36.396-91.998-76.994-101.225-40.598-9.227-83.648%205.56-97.65%2040.567L256%20219.075l-8.355-20.888c-11.377-28.443-41.931-43.537-74.764-43.249zM256%20234.845a44.488%2044.488%200%200%201%2044.488%2044.488A44.488%2044.488%200%200%201%20284%20313.876l16.488%2098.922h-88.976l16.49-98.936a44.488%2044.488%200%200%201-16.49-34.529A44.488%2044.488%200%200%201%20256%20234.845z'%20fill='%23ffffff'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e";var je=(_,e)=>e("yearly"),Me=O('<button class="svelte-s08len"><img alt="Switch" class="svelte-s08len"> <span class="svelte-s08len"> </span></button> <button disabled class="svelte-s08len"><img alt="Current" class="svelte-s08len"> <span class="svelte-s08len">Monthly (current)</span></button>',1),Re=(_,e)=>e("monthly"),Ee=O('<button disabled class="svelte-s08len"><img alt="Current" class="svelte-s08len"> <span class="svelte-s08len">Yearly (current)</span></button> <button class="svelte-s08len"><img alt="Switch" class="svelte-s08len"> <span class="svelte-s08len"> </span></button>',1),Oe=O('<p class="error svelte-s08len"> </p>'),Ie=O('<div class="current-subscription svelte-s08len"><h2 class="greenHighlight svelte-s08len">Your Subscription</h2> <p><strong>Plan:</strong> <span class="priceHighlight svelte-s08len"> </span></p> <p><strong>Start:</strong> <!> - <strong>Ends:</strong> <!></p> <p><strong>Status:</strong> </p> <div class="switch-options svelte-s08len"><!></div> <!></div>');function qe(_,e){re(e,!0);let o=F(e,"onSubscriptionChange",3,()=>{});const z="price_1RW5SMERvP25GWwRdcl3huBf",B="price_1RW5UxERvP25GWwRvIfpesTp",m={[z]:{amount:2,interval:"month"},[B]:{amount:12,interval:"year"}};let d=U(!1),p=U(""),w=ae(()=>{var C;return((C=e.subscription)==null?void 0:C.price_id)===z?"monthly":"yearly"}),k=ae(()=>{var C;return(C=e.subscription)!=null&&C.price_id&&m[e.subscription.price_id]?`$${m[e.subscription.price_id].amount.toFixed(2)} / ${m[e.subscription.price_id].interval}`:""});async function x(C){if(!e.subscription||C===t(w))return;a(d,!0),a(p,"");const{token:R}=Z(te)||{};if(!R){a(p,"Not authenticated."),a(d,!1);return}let H;try{const T=await(await fetch("https://3ee.dev/account/payments/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${R}`},mode:"cors"})).json();if(!T.success||!Array.isArray(T.payments)||!T.payments.length){a(p,"No payment methods available to switch plan."),a(d,!1);return}H=T.payments[0]}catch(b){console.error("Error fetching payments:",b),a(p,"Unable to retrieve payment methods."),a(d,!1);return}const f=H.customer,u=H.id,P=C==="monthly"?z:B;try{const T=await(await fetch("https://3ee.dev/account/subscribe/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${R}`},mode:"cors",body:JSON.stringify({customer_id:f,payment_method_id:u,price_id:P,modifySubscription:!0})})).json();if(T.success){o()();const v=Z(oe);await fetch("https://3ee.dev/skatebuild/api/profiles/save/",{method:"POST",headers:{Accept:"application/json","Access-Control-Allow-Origin":"https://skatebuild.pro","Content-Type":"application/json",Authorization:`Token ${R}`},mode:"cors",body:JSON.stringify(v)})}else a(p,T.message||"Unable to switch plan.",!0)}catch(b){console.error("Error modifying subscription:",b),a(p,"Failed to switch plan.")}a(d,!1)}var N=pe(),G=$(N);{var M=C=>{var R=Ie(),H=r(n(R),2),f=r(n(H),2),u=n(f,!0);s(f),s(H);var P=r(H,2),b=r(n(P),2);{var T=i=>{var c=ce();K(g=>V(c,g),[()=>new Date(e.subscription.current_period_start).toLocaleDateString()]),y(i,c)},v=i=>{var c=ce("N/A");y(i,c)};Y(b,i=>{e.subscription.current_period_start?i(T):i(v,!1)})}var l=r(b,4);{var h=i=>{var c=ce();K(g=>V(c,g),[()=>new Date(e.subscription.current_period_end).toLocaleDateString()]),y(i,c)},j=i=>{var c=ce("N/A");y(i,c)};Y(l,i=>{e.subscription.current_period_end?i(h):i(j,!1)})}s(P);var A=r(P,2),S=r(n(A));s(A);var I=r(A,2),Q=n(I);{var E=i=>{var c=Me(),g=$(c);g.__click=[je,x];var W=n(g);X(W,"src",he);var L=r(W,2),le=n(L,!0);s(L),s(g);var ne=r(g,2),de=n(ne);X(de,"src",ge),ee(2),s(ne),K(()=>{g.disabled=t(d),V(le,t(d)?"Processing…":`Switch $${m[B].amount}/year`)}),y(i,c)},D=i=>{var c=Ee(),g=$(c),W=n(g);X(W,"src",ge),ee(2),s(g);var L=r(g,2);L.__click=[Re,x];var le=n(L);X(le,"src",he);var ne=r(le,2),de=n(ne,!0);s(ne),s(L),K(()=>{L.disabled=t(d),V(de,t(d)?"Processing…":`Switch $${m[z].amount}/month`)}),y(i,c)};Y(Q,i=>{t(w)==="monthly"?i(E):i(D,!1)})}s(I);var q=r(I,2);{var J=i=>{var c=Oe(),g=n(c,!0);s(c),K(()=>V(g,t(p))),y(i,c)};Y(q,i=>{t(p)&&i(J)})}s(R),K(()=>{V(u,t(k)),V(S,` ${e.subscription.status??""}`)}),y(C,R)};Y(G,C=>{e.subscription&&C(M)})}y(_,N),ie()}se(["click"]);function Le(_,e){e()()}var Be=O('<p style="color: #e53e3e; margin-top: 0.5rem;"> </p>'),Ne=O('<button type="button" class="cancel-button svelte-wz1uxj"><span>Cancel</span></button>'),De=O('<form class="svelte-wz1uxj"><label for="zip" class="svelte-wz1uxj">Postal Code</label> <input id="zip" type="text" placeholder="ZIP or postal code" required class="svelte-wz1uxj"> <label for="card-element" class="svelte-wz1uxj">Card Details</label> <div id="card-element" style="padding: 0.75rem; border: 1px solid #cbd5e0; border-radius: 0.375rem;"></div> <!> <div style="margin-top: 1rem; display: flex; gap: 0.5rem;"><button type="submit" class="svelte-wz1uxj"><span> </span></button> <!></div></form>');function Ye(_,e){re(e,!0);let o=F(e,"editing",3,!1);F(e,"customerId",3,null);let z=F(e,"onPaymentAdded",3,l=>{}),B=F(e,"onPaymentAddCancel",3,()=>{});const m="pk_test_51MCQ24ERvP25GWwRjbby9IQv3z4FEh2qpjjK1DTjZNApqTvf5bQNE98VJnT2SjkpLEgJMEroKnSWdpdeCESQFbgZ00qkgzBBCh";let d=null,p=null,w=null,k=U(""),x=U(""),N=U(!1);ze(()=>{if(!window.Stripe){a(x,"Stripe.js failed to load.");return}d=Stripe(m),p=d.elements();const l={base:{iconColor:"rgb(56, 153, 237)",color:"#fff",fontWeight:"500",fontFamily:"Roboto, Open Sans, Segoe UI, sans-serif",fontSize:"18px",fontSmoothing:"antialiased",":-webkit-autofill":{color:"#fce883"},"::placeholder":{color:"rgb(255, 122, 32)"}},invalid:{iconColor:"#fff",color:"rgb(250, 44, 202)"}};w=p.create("card",{style:l,hidePostalCode:!0}),w.mount("#card-element"),w.on("change",h=>{h.error?a(x,h.error.message||"",!0):a(x,"")})});async function G(l){if(l.preventDefault(),!d||!p||!w){a(x,"Stripe.js has not been initialized.");return}a(N,!0),a(x,"");const{error:h,paymentMethod:j}=await d.createPaymentMethod({type:"card",card:w,billing_details:{address:{postal_code:t(k)||void 0}}});if(h){a(x,h.message||"PaymentMethod creation failed.",!0),a(N,!1);return}if(!j||!j.id){a(x,"Unable to retrieve PaymentMethod ID."),a(N,!1);return}z()({payment_method_id:j.id,editing:o()})}var M=De(),C=r(n(M),2);be(C);var R=r(C,6);{var H=l=>{var h=Be(),j=n(h,!0);s(h),K(()=>V(j,t(x))),y(l,h)};Y(R,l=>{t(x)&&l(H)})}var f=r(R,2),u=n(f),P=n(u),b=n(P,!0);s(P),s(u);var T=r(u,2);{var v=l=>{var h=Ne();h.__click=[Le,B],y(l,h)};Y(T,l=>{o()&&l(v)})}s(f),s(M),K(()=>{u.disabled=t(N),V(b,t(N)?"Processing…":o()?"Update Card":"Add Card")}),ye("submit",M,G),xe(C,()=>t(k),l=>a(k,l)),y(_,M),ie()}se(["click"]);const He="data:image/svg+xml,%3csvg%20style='height:%20512px;%20width:%20512px;'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M0%200h512v512H0z'%20fill='%23d6e010'%20fill-opacity='0'%3e%3c/path%3e%3cg%20class=''%20style=''%20transform='translate(0,0)'%3e%3cpath%20d='m208.242%2024.629-52.058%2095.205%2095.207%2052.059%2017.271-31.586-42.424-23.198A143.26%20143.26%200%200%201%20256%20114c78.638%200%20142%2063.362%20142%20142s-63.362%20142-142%20142-142-63.362-142-142c0-16.46%202.785-32.247%207.896-46.928l-32.32-16.16C82.106%20212.535%2078%20233.798%2078%20256c0%2098.093%2079.907%20178%20178%20178s178-79.907%20178-178S354.093%2078%20256%2078c-13.103%200-25.875%201.44-38.18%204.148l22.008-40.25-31.586-17.27zm104.27%20130.379L247%20253.275V368h18V258.725l62.488-93.733-14.976-9.984z'%20fill='%23ffffff'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e",Ue="data:image/svg+xml,%3csvg%20style='height:%20512px;%20width:%20512px;'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M0%200h512v512H0z'%20fill='%23d6e010'%20fill-opacity='0'%3e%3c/path%3e%3cg%20class=''%20style=''%20transform='translate(0,0)'%3e%3cpath%20d='m256%2029.816-231%20154v106.368l231-154%20231%20154V183.816zm0%20128.043L105%20259.783v90.283l151-101.925%20151%20101.925v-90.283zm0%20112-87%2058.725v67.6l87-58%2087%2058v-67.6zm0%2089.957-87%2058v64.368l87-58%2087%2058v-64.368z'%20fill='%23ffffff'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e";function We(_,e,o,z){a(e,!1),a(o,null),a(z,!0)}var Fe=(_,e,o)=>e(t(o)),Ge=(_,e,o)=>e(t(o).id),Je=O('<li class="svelte-ucowlg"><p class="cardTitle svelte-ucowlg"><strong> </strong></p> <button class="svelte-ucowlg"><span class="svelte-ucowlg">Edit</span></button> <button class="cancelBtn svelte-ucowlg"><span class="svelte-ucowlg">Delete</span></button></li>'),Ve=O('<ul class="svelte-ucowlg"></ul>'),Qe=O("<p>No cards on file.</p>"),Ke=O('<div class="payment-list svelte-ucowlg"><h2>Your Cards</h2> <!> <div class="button-actions svelte-ucowlg"><button class="svelte-ucowlg"><img alt="Go back to main menu icon" class="svelte-ucowlg"> <span>Add New Card</span></button> <button class="cancelBtn svelte-ucowlg"><img alt="Go back to main menu icon" class="svelte-ucowlg"> <span>Back</span></button></div></div>');function Ze(_,e){re(e,!0),F(e,"editing",3,!1);let o=F(e,"payments",19,()=>[]),z=F(e,"onPaymentAdded",3,()=>{}),B=F(e,"onPaymentAddCancel",3,()=>{}),m=U(!1),d=U(!1),p=U(null);async function w(f){const{token:u}=Z(te)||{};if(u)try{const b=await(await fetch("https://3ee.dev/account/payment-delete/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${u}`},mode:"cors",body:JSON.stringify({payment_method_id:f})})).json();b.success?z()():alert(`Error deleting card: ${b.message}`)}catch(P){console.error("Network or server error when deleting payment:",P),alert("Unable to delete card at this time.")}}function k(f){a(d,!0),a(p,f,!0),a(m,!0)}function x(f){const{payment_method_id:u,editing:P}=f;N(u,P)}async function N(f,u){const{token:P}=Z(te)||{};if(!P)return;let b,T;u&&t(p)?(b="https://3ee.dev/account/payment-update/",T={customer_id:t(p).customer,old_payment_method_id:t(p).id,new_payment_method_id:f}):(b="https://3ee.dev/account/create-customer/",T={payment_method_id:f});try{const l=await(await fetch(b,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${P}`},mode:"cors",body:JSON.stringify(T)})).json();l.success?(a(m,!1),z()()):alert(`Error: ${l.message}`)}catch(v){console.error("Network or server error when submitting payment:",v),alert("Unable to save payment at this time.")}}function G(){a(m,!1),B()()}var M=pe(),C=$(M);{var R=f=>{var u=Ke(),P=r(n(u),2);{var b=S=>{var I=Ve();_e(I,21,o,we,(Q,E)=>{var D=Je(),q=n(D),J=n(q),i=n(J);s(J),s(q);var c=r(q,2);c.__click=[Fe,k,E];var g=r(c,2);g.__click=[Ge,w,E],s(D),K(()=>V(i,`${t(E).card.last4??""} (Exp ${t(E).card.exp_month??""}/${t(E).card.exp_year??""})`)),y(Q,D)}),s(I),y(S,I)},T=S=>{var I=Qe();y(S,I)};Y(P,S=>{Array.isArray(o())&&o().length>0?S(b):S(T,!1)})}var v=r(P,2),l=n(v);l.__click=[We,d,p,m];var h=n(l);X(h,"src",Ue),ee(2),s(l);var j=r(l,2);j.__click=function(...S){var I;(I=B())==null||I.apply(this,S)};var A=n(j);X(A,"src",He),ee(2),s(j),s(v),s(u),y(f,u)},H=f=>{const u=ae(()=>t(d)?t(p).customer:null);Ye(f,{get editing(){return t(d)},get customerId(){return t(u)},onPaymentAdded:x,onPaymentAddCancel:G})};Y(C,f=>{t(m)?f(H,!1):f(R)})}y(_,M),ie()}se(["click"]);var Xe=O('<div class="success-message svelte-epyl68"><h2 class="svelte-epyl68">Thanks for supporting SkateBuild</h2> <p class="svelte-epyl68">Your subscription is now active!</p></div>');function $e(_){var e=Xe();y(_,e)}var et=O('<div class="overlay svelte-b4mu14"><div class="dialog svelte-b4mu14"><p class="svelte-b4mu14">Are you sure you want to cancel your subscription?</p> <div class="buttons svelte-b4mu14"><button class="svelte-b4mu14"><span>No, Go Back</span></button> <button class="cancelBtn svelte-b4mu14"><span>Yes, Cancel</span></button></div></div></div>');function tt(_,e){let o=F(e,"onConfirm",3,()=>{}),z=F(e,"onCancel",3,()=>{});var B=et(),m=n(B),d=r(n(m),2),p=n(d);p.__click=function(...k){var x;(x=z())==null||x.apply(this,k)};var w=r(p,2);w.__click=function(...k){var x;(x=o())==null||x.apply(this,k)},s(d),s(m),s(B),y(_,B)}se(["click"]);function at(_,e){a(e,!0)}var st=O('<!> <!> <div class="subscription-actions svelte-xrxfwt"><button class="svelte-xrxfwt"><img alt="Manage payments icon" class="svelte-xrxfwt"> <span>Payment Methods</span></button> <button class="cancelBtn svelte-xrxfwt"><img alt="Cancel icon" class="svelte-xrxfwt"> <span>Cancel Subscription</span></button></div> <!>',1),nt=O('<div class="subscription-actions svelte-xrxfwt"><button class="svelte-xrxfwt"><img alt="Manage payments icon" class="svelte-xrxfwt"> <span>Payment Methods</span></button></div>'),ot=O(`<!> <div class="canceled svelte-xrxfwt"><h2 class="svelte-xrxfwt">Your subscription is canceled</h2> <p>You previously subscribed to SkateBuild but your subscription is no longer active. To
			reactivate, please pick a plan or a new payment method.</p></div> <!>`,1),rt=O('<div class="subscription-actions svelte-xrxfwt"><button class="svelte-xrxfwt"><img alt="Manage payments icon" class="svelte-xrxfwt"> <span>Payment Methods</span></button></div>'),it=O("<!> <!>",1);function zt(_,e){re(e,!0);let o=U(ue(e.data.subscription)),z=U(ue(e.data.paymentResponse||{success:!1})),B=U(!1),m=U(!1),d=U(!1),p=ae(()=>t(o)&&t(o).status==="active"),w=ae(()=>t(o)&&t(o).status==="canceled"),k=ae(()=>t(z).payments??[]);async function x(){const{token:v}=Z(te)||{};if(v)try{const l=await fetch("https://3ee.dev/account/payments/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${v}`},mode:"cors"});a(z,await l.json(),!0)}catch{a(z,{success:!1},!0)}}async function N(){const{token:v}=Z(te)||{};if(v)try{const h=await(await fetch("https://3ee.dev/account/get-stripe-user-subscription/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Token ${v}`},mode:"cors"})).json();a(o,h&&Object.keys(h).length>0?h:null,!0)}catch{a(o,null)}}function G(){a(B,!0),N()}function M(){a(m,!0)}function C(){a(m,!1),x()}function R(){a(m,!1)}async function H(){if(a(d,!1),!t(p))return;const{token:v}=Z(te)||{};if(v)try{const h=await(await fetch("https://3ee.dev/account/subscribe-cancel/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${v}`},mode:"cors"})).json();if(h.success){N();const j=Z(oe),A=await fetch("https://3ee.dev/skatebuild/api/profiles/save/",{method:"POST",headers:{Accept:"application/json","Access-Control-Allow-Origin":"https://skatebuild.pro","Content-Type":"application/json",Authorization:`Token ${v}`},mode:"cors",body:JSON.stringify(j)}),S=await A.json();A.ok?oe.set(S):console.error("Profile save failed:",S.detail||"Unknown error")}else alert(h.message||"Unable to cancel subscription.")}catch{alert("Failed to cancel subscription.")}}function f(){a(d,!1)}var u=pe(),P=$(u);{var b=v=>{Ze(v,{editing:!1,get payments(){return t(k)},onPaymentAdded:C,onPaymentAddCancel:R})},T=(v,l)=>{{var h=A=>{var S=st(),I=$(S);{var Q=L=>{$e(L)};Y(I,L=>{t(B)&&L(Q)})}var E=r(I,2);qe(E,{get subscription(){return t(o)},onSubscriptionChange:G});var D=r(E,2),q=n(D);q.__click=M;var J=n(q);X(J,"src",ve),ee(2),s(q);var i=r(q,2);i.__click=[at,d];var c=n(i);X(c,"src",Pe),ee(2),s(i),s(D);var g=r(D,2);{var W=L=>{tt(L,{onConfirm:H,onCancel:f})};Y(g,L=>{t(d)&&L(W)})}y(A,S)},j=(A,S)=>{{var I=E=>{var D=ot(),q=$(D);fe(q,{get payments(){return t(k)},onRequirePayment:M,onSubscribed:G});var J=r(q,4);{var i=c=>{var g=nt(),W=n(g);W.__click=M;var L=n(W);X(L,"src",ve),ee(2),s(W),s(g),y(c,g)};Y(J,c=>{t(k).length>0&&c(i)})}y(E,D)},Q=E=>{var D=it(),q=$(D);fe(q,{get payments(){return t(k)},onRequirePayment:M,onSubscribed:G});var J=r(q,2);{var i=c=>{var g=rt(),W=n(g);W.__click=M;var L=n(W);X(L,"src",ve),ee(2),s(W),s(g),y(c,g)};Y(J,c=>{t(k).length>0&&c(i)})}y(E,D)};Y(A,E=>{t(w)?E(I):E(Q,!1)},S)}};Y(v,A=>{t(p)?A(h):A(j,!1)},l)}};Y(P,v=>{t(m)?v(b):v(T,!1)})}y(_,u),ie()}se(["click"]);export{zt as component,xt as universal};
