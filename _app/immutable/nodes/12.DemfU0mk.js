import{t as x,a as f,n as Oe,c as Ue}from"../chunks/DlkhF8oK.js";import"../chunks/EjCBkgEC.js";import{ak as he,av as U,j as o,c as e,o as u,aw as ke,an as l,am as i,ao as a,ar as T,al as ye,aq as ue,ai as Be,b as pe,aJ as Me}from"../chunks/C0pMS_NW.js";import{s as I,e as O}from"../chunks/CerNdXsT.js";import{i as j}from"../chunks/BxYCF4iI.js";import{e as te,i as fe}from"../chunks/CkxMZ-dh.js";import{r as De,s as F}from"../chunks/BWyzu0uw.js";import{s as re}from"../chunks/DBrj8tcN.js";import{t as Ee,f as qe}from"../chunks/Cq4HV8Hl.js";import{b as ze}from"../chunks/DEbLG4R4.js";import{i as we}from"../chunks/B0TJ0SRJ.js";import{p as _e}from"../chunks/DXK58P_H.js";import{o as Ge}from"../chunks/CDI6HQlE.js";import{g as Je}from"../chunks/biEAIm_m.js";import{s as Le}from"../chunks/DNBAbfuW.js";import{n as Re}from"../chunks/BIh22nRF.js";import{b as We}from"../chunks/GbXSKhJq.js";const Ze=!1,Fe=async({fetch:B})=>{const A=await B("/data/skateboard-products/categories.json").then(g=>g.json()),v=await B("/data/rollerskate-products/categories.json").then(g=>g.json());return{skateCats:A,rollerCats:v}},Ct=Object.freeze(Object.defineProperty({__proto__:null,load:Fe,prerender:Ze},Symbol.toStringTag,{value:"Module"}));var Ke=x("<div> </div>"),Qe=x('<div class="balance-container svelte-14d17tj"><button class="close svelte-14d17tj">× Close</button> <p class="selected-description svelte-14d17tj"> </p> <input type="range" min="0" max="1" step="0.01" class="svelte-14d17tj"> <div class="slider-labels svelte-14d17tj"></div></div>');function Xe(B,A){he(A,!1);const v=u(),g=u(),z=u();let h=u(.5),se=_e(A,"onSliderChange",8,()=>{}),M=_e(A,"onClose",8,()=>{});const b=["Soft (78A–84A)","Hybrid (85A–91A)","Hard (92A–105A)"],p={"Soft (78A–84A)":"Soft – best on rough surfaces.","Hybrid (85A–91A)":"Hybrid – mix of speed & control.","Hard (92A–105A)":"Hard – ideal for street/skatepark."};function D(y){o(h,+y.target.value);const w={value:e(h),bucket:e(g)};se()(w)}U(()=>e(h),()=>{o(v,Math.round(e(h)*(b.length-1)))}),U(()=>e(v),()=>{o(g,b[e(v)].split(" ")[0])}),U(()=>e(v),()=>{o(z,p[b[e(v)]])}),ke(),we();var k=Qe(),C=l(k),N=i(C,2),E=l(N,!0);a(N);var _=i(N,2);De(_);var m=i(_,2);te(m,5,()=>b,fe,(y,w,K)=>{var H=Ke(),ae=l(H,!0);a(H),T(()=>{re(H,1,`label ${K===e(v)?"selected":""}`,"svelte-14d17tj"),I(ae,e(w))}),f(y,H)}),a(m),a(k),T(()=>I(E,e(z))),O("click",C,function(...y){var w;(w=M())==null||w.apply(this,y)}),We(_,()=>e(h),y=>o(h,y)),O("input",_,D),f(B,k),ye()}var Ye=x("<button> </button>"),et=x('<div class="top-nav svelte-x2ir8t"><button>Skateboard</button> <button>Rollerskate</button></div> <div class="category-nav svelte-x2ir8t"></div>',1),tt=x('<div class="slider svelte-x2ir8t"><!></div>'),rt=x('<img class="product-image svelte-x2ir8t">'),st=Oe('<svg viewBox="0 0 64 64" class="placeholder svelte-x2ir8t"><rect width="64" height="64" fill="var(--tertiary-color)"></rect><text x="32" y="36" text-anchor="middle" fill="var(--heading-color)" font-size="12">Image NA</text></svg>'),at=x('<p class="name svelte-x2ir8t"><strong>Durometer</strong>: <span class="product-highlight svelte-x2ir8t"> </span></p>'),ot=x('<tr class="svelte-x2ir8t"><td class="svelte-x2ir8t"><a target="_blank" rel="noopener" class="svelte-x2ir8t"> </a></td><td class="svelte-x2ir8t"> </td></tr>'),lt=x('<div class="card svelte-x2ir8t"><div class="product-content svelte-x2ir8t"><!> <p class="name svelte-x2ir8t"> </p></div> <!> <table class="price-table svelte-x2ir8t"><tbody></tbody></table> <!> <div class="buttons svelte-x2ir8t"><button class="build svelte-x2ir8t"><span class="svelte-x2ir8t">Add to Build</span></button> <button class="view svelte-x2ir8t"><span class="svelte-x2ir8t">View</span></button> <!></div> <!></div>'),it=x("<p>Loading…</p>"),nt=x('<div class="product-type-nav svelte-x2ir8t"><!> <!></div> <div class="grid svelte-x2ir8t"></div> <div class="sentinel"><!></div>',1);function Nt(B,A){he(A,!1);const v=u(),g=u(),z=u();let h=_e(A,"data",8);const se=50;let M=u(!1),b=u("skateboard"),p=u(""),D=1,k=u([]),C=!0,N=u(!1),E=u(),_,m=u(null);function y(t){o(b,t),w("bearings"),o(m,null),o(k,[]),D=1}async function w(t){o(p,t),o(m,null),o(k,[]),D=1,C=!0,o(M,t==="wheels"),await Me(),K(),H()}function K(){_&&_.disconnect(),_=new IntersectionObserver(([t])=>{t.isIntersecting&&H()},{rootMargin:"200px"}),e(E)&&_.observe(e(E))}async function H(){if(!e(p)||e(N)||!C)return;o(N,!0);const r=`/data/${e(b)==="skateboard"?"skateboard-products":"rollerskate-products"}/${e(p)}-page-${D}.json`;try{const s=await fetch(r);if(s.ok){const n=await s.json();o(k,[...e(k),...n]),D+=1,n.length<se&&(C=!1,_.disconnect())}else C=!1,_.disconnect()}catch(s){console.error("Error loading products:",s),C=!1,_.disconnect()}o(N,!1)}Ge(()=>{K()});function ae(t){const s={decks:"deck_slug",griptapes:"griptape_slug",risers:"risers_slug",boots:"boot_slug",toestops:"toestops_slug",slideblocks:"slideblock_slug",plates:"plates_slug",trucks:"trucks_slug",bearings:"bearings_slug",wheels:"wheels_slug",bushings:"bushings_slug"}[e(p)];Le.update(n=>({...n,[s]:t.slug})),Re.send({message:`${t.productName} added to build`,link:"/builds/new",linkText:"see more"})}function je(t){Je(`/product/${e(p)}/${t}`)}function Ae(t){const r=Object.keys(t).find(s=>s!=="url"&&s!=="productVendorUrl");return{vendor:r,price:t[r],url:t.url,productVendorUrl:t.productVendorUrl}}function oe(t){var s;const r=(s=t.productTags)==null?void 0:s.find(n=>n.field==="durometer");return r?parseInt(r.value.replace(/\D/g,""),10):NaN}function Ce({bucket:t}){o(m,t)}function Ne(){o(M,!1)}U(()=>(e(b),Be(h())),()=>{o(v,e(b)==="skateboard"?h().skateCats:h().rollerCats)}),U(()=>(e(v),e(p)),()=>{e(v).length>0&&!e(p)&&o(p,e(v)[0])}),U(()=>e(k),()=>{o(g,e(k).map(t=>{var r;return{...t,vendorPrices:((r=t.productPrices)==null?void 0:r.map(Ae))??[],productTags:t.productTags??[]}}))}),U(()=>(e(p),e(g),e(m)),()=>{o(z,e(p)==="wheels"?e(g).filter(t=>{if(!e(m))return!0;const r=oe(t);return isNaN(r)?!1:e(m)==="Soft"?r>=78&&r<=84:e(m)==="Hybrid"?r>=85&&r<=91:e(m)==="Hard"?r>=92:!0}).sort((t,r)=>{const s=oe(t),n=oe(r);return isNaN(s)?1:isNaN(n)?-1:s-n}):e(g))}),ke(),we();var ge=nt(),le=ue(ge),be=l(le);{var Se=t=>{var r=et(),s=ue(r),n=l(s);let G;var Q=i(n,2);let X;a(s);var J=i(s,2);te(J,5,()=>e(v),fe,(L,S)=>{var $=Ye();let q;var Y=l($,!0);a($),T(ee=>{q=re($,1,"svelte-x2ir8t",null,q,ee),I(Y,e(S))},[()=>({selected:e(S)===e(p)})],pe),O("click",$,()=>w(e(S))),f(L,$)}),a(J),T((L,S)=>{G=re(n,1,"svelte-x2ir8t",null,G,L),X=re(Q,1,"svelte-x2ir8t",null,X,S)},[()=>({selected:e(b)==="skateboard"}),()=>({selected:e(b)==="rollerskate"})],pe),O("click",n,()=>y("skateboard")),O("click",Q,()=>y("rollerskate")),f(t,r)};j(be,t=>{e(M)||t(Se)})}var Te=i(be,2);{var He=t=>{var r=tt(),s=l(r);Xe(s,{onSliderChange:Ce,onClose:Ne}),a(r),f(t,r)};j(Te,t=>{e(M)&&t(He)})}a(le);var ie=i(le,2);te(ie,5,()=>e(z),t=>t.slug,(t,r)=>{var s=lt(),n=l(s),G=l(n);{var Q=d=>{var c=rt();T(()=>{F(c,"src",e(r).cloudinaryUrl),F(c,"alt",e(r).productName),F(c,"width",e(r).imageWidth),F(c,"height",e(r).imageHeight)}),f(d,c)},X=d=>{var c=st();f(d,c)};j(G,d=>{e(r).cloudinaryUrl?d(Q):d(X,!1)})}var J=i(G,2),L=l(J,!0);a(J),a(n);var S=i(n,2);{var $=d=>{var c=Ue(),R=ue(c);{var W=V=>{var P=at(),Z=i(l(P),2),ce=l(Z,!0);a(Z),a(P),T(ve=>I(ce,ve),[()=>e(r).productTags.find(ve=>ve.field==="durometer").value],pe),f(V,P)};j(R,V=>{e(r).productTags.find(P=>P.field==="durometer")&&V(W)})}f(d,c)};j(S,d=>{e(r).productTags&&d($)})}var q=i(S,2),Y=l(q);te(Y,5,()=>e(r).vendorPrices,fe,(d,c)=>{var R=ot(),W=l(R),V=l(W),P=l(V,!0);a(V),a(W);var Z=i(W),ce=l(Z,!0);a(Z),a(R),T(()=>{F(V,"href",e(c).productVendorUrl||e(c).url),I(P,e(c).vendor),I(ce,e(c).price)}),f(d,R)}),a(Y),a(q);var ee=i(q,2);j(ee,d=>{});var de=i(ee,2),me=l(de),xe=i(me,2),Pe=i(xe,2);j(Pe,d=>{}),a(de);var Ie=i(de,2);j(Ie,d=>{}),a(s),T(()=>I(L,e(r).productName)),O("click",me,()=>ae(e(r))),O("click",xe,()=>je(e(r).slug)),Ee(1,s,()=>qe,()=>({duration:200})),f(t,s)}),a(ie);var ne=i(ie,2),$e=l(ne);{var Ve=t=>{var r=it();f(t,r)};j($e,t=>{e(N)&&t(Ve)})}a(ne),ze(ne,t=>o(E,t),()=>e(E)),f(B,ge),ye()}export{Nt as component,Ct as universal};
