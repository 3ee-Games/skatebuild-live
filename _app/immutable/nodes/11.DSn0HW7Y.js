import{t as x,a as y,n as Ve}from"../chunks/Cbs2TP5J.js";import"../chunks/DppSS1ZK.js";import{ak as fe,av as S,j as a,c as e,o as v,aw as ge,an as i,ao as o,am as n,ar as N,al as _e,aq as Pe,b as pe,ai as Ie,aH as Ue}from"../chunks/BQECxIka.js";import{s as I,e as P}from"../chunks/D7dhJHJ5.js";import{i as V}from"../chunks/BxIlQOsl.js";import{e as q,i as te}from"../chunks/_x8JZXJS.js";import{r as Be,s as B}from"../chunks/C1JmazWi.js";import{s as z}from"../chunks/DvGjbSh_.js";import{t as Me,f as Oe}from"../chunks/CY7ypGvK.js";import{b as Ee}from"../chunks/j8cbvAr4.js";import{i as be}from"../chunks/-1FsuQLY.js";import{p as me}from"../chunks/Ct2zQ0GF.js";import{o as qe}from"../chunks/BNi7mzQR.js";import{g as ze}from"../chunks/CjO3ZPNV.js";import{s as De}from"../chunks/CF6V_E0z.js";import{n as Ge}from"../chunks/C4-pA70s.js";import{b as Le}from"../chunks/BHVgj7FX.js";const Re=!1,We=async({fetch:$})=>{const w=await $("/data/skateboard-products/categories.json").then(f=>f.json()),d=await $("/data/rollerskate-products/categories.json").then(f=>f.json());return{skateCats:w,rollerCats:d}},kt=Object.freeze(Object.defineProperty({__proto__:null,load:We,prerender:Re},Symbol.toStringTag,{value:"Module"}));var Ze=x("<div> </div>"),Fe=x('<div class="balance-container svelte-1iokwgx"><p class="selected-description svelte-1iokwgx"> </p> <input type="range" min="0" max="1" step="0.01" class="svelte-1iokwgx"> <div class="slider-labels svelte-1iokwgx"></div></div>');function Je($,w){fe(w,!1);const d=v(),f=v(),U=v();let b=v(.5),D=me(w,"onSliderChange",8,()=>{});const g=["Soft (78A–84A)","Hybrid (85A–91A)","Hard (92A–105A)"],c={"Soft (78A–84A)":"Soft – best on rough surfaces.","Hybrid (85A–91A)":"Hybrid – mix of speed & control.","Hard (92A–105A)":"Hard – ideal for street/skatepark."};function C(u){a(b,+u.target.value);const T={value:e(b),bucket:e(f)};D()(T)}S(()=>e(b),()=>{a(d,Math.round(e(b)*(g.length-1)))}),S(()=>e(d),()=>{a(f,g[e(d)].split(" ")[0])}),S(()=>e(d),()=>{a(U,c[g[e(d)]])}),ge(),be();var m=Fe(),k=i(m),H=i(k,!0);o(k);var j=n(k,2);Be(j);var h=n(j,2);q(h,5,()=>g,te,(u,T,M)=>{var A=Ze(),O=i(A,!0);o(A),N(()=>{z(A,1,`label ${M===e(d)?"selected":""}`,"svelte-1iokwgx"),I(O,e(T))}),y(u,A)}),o(h),o(m),N(()=>I(H,e(U))),Le(j,()=>e(b),u=>a(b,u)),P("input",j,C),y($,m),_e()}var Ke=x("<button> </button>"),Qe=x('<img class="product-image svelte-pohuj4">'),Xe=Ve('<svg viewBox="0 0 64 64" class="placeholder svelte-pohuj4"><rect width="64" height="64" fill="var(--tertiary-color)"></rect><text x="32" y="36" text-anchor="middle" fill="var(--heading-color)" font-size="12">Image NA</text></svg>'),Ye=x('<tr class="svelte-pohuj4"><td class="svelte-pohuj4"><a target="_blank" rel="noopener" class="svelte-pohuj4"> </a></td><td class="svelte-pohuj4"> </td></tr>'),et=x('<div class="card svelte-pohuj4"><div class="product-content svelte-pohuj4"><!> <p class="name svelte-pohuj4"> </p></div> <table class="price-table svelte-pohuj4"><tbody></tbody></table> <!> <div class="buttons svelte-pohuj4"><button class="build svelte-pohuj4"><span class="svelte-pohuj4">Add to Build</span></button> <button class="view svelte-pohuj4"><span class="svelte-pohuj4">View</span></button> <!></div> <!></div>'),tt=x("<p>Loading…</p>"),rt=x('<div class="top-nav svelte-pohuj4"><button>Skateboard</button> <button>Rollerskate</button></div> <div class="category-nav svelte-pohuj4"></div> <!> <div class="grid svelte-pohuj4"></div> <div class="sentinel"><!></div>',1);function jt($,w){fe(w,!1);const d=v(),f=v(),U=v();let b=me(w,"data",8);const D=50;let g=v("skateboard"),c=v(""),C=1,m=v([]),k=!0,H=v(!1),j=v(),h,u=v(null);function T(t){a(g,t),M("bearings"),a(u,null),a(m,[]),C=1}async function M(t){a(c,t),a(u,null),a(m,[]),C=1,k=!0,await Ue(),A(),O()}function A(){h&&h.disconnect(),h=new IntersectionObserver(([t])=>{t.isIntersecting&&O()},{rootMargin:"200px"}),e(j)&&h.observe(e(j))}async function O(){if(!e(c)||e(H)||!k)return;a(H,!0);const r=`/data/${e(g)==="skateboard"?"skateboard-products":"rollerskate-products"}/${e(c)}-page-${C}.json`;try{const s=await fetch(r);if(s.ok){const l=await s.json();a(m,[...e(m),...l]),C+=1,l.length<D&&(k=!1,h.disconnect())}else k=!1,h.disconnect()}catch(s){console.error("Error loading products:",s),k=!1,h.disconnect()}a(H,!1)}qe(()=>{A()});function he(t){const s={decks:"deck_slug",griptapes:"griptape_slug",risers:"risers_slug",boots:"boot_slug",toestops:"toestops_slug",slideblocks:"slideblock_slug",plates:"plates_slug",trucks:"trucks_slug",bearings:"bearings_slug",wheels:"wheels_slug",bushings:"bushings_slug"}[e(c)];De.update(l=>({...l,[s]:t.slug})),Ge.send({message:`${t.productName} added to build`,link:"/builds/new",linkText:"see more"})}function ke(t){ze(`/product/${e(c)}/${t}`)}function je(t){const r=Object.keys(t).find(s=>s!=="url"&&s!=="productVendorUrl");return{vendor:r,price:t[r],url:t.url,productVendorUrl:t.productVendorUrl}}function G(t){var s;const r=(s=t.productTags)==null?void 0:s.find(l=>l.field==="durometer");return r?parseInt(r.value.replace(/\D/g,""),10):NaN}function ye({bucket:t}){a(u,t)}S(()=>(e(g),Ie(b())),()=>{a(d,e(g)==="skateboard"?b().skateCats:b().rollerCats)}),S(()=>(e(d),e(c)),()=>{e(d).length>0&&!e(c)&&a(c,e(d)[0])}),S(()=>e(m),()=>{a(f,e(m).map(t=>{var r;return{...t,vendorPrices:((r=t.productPrices)==null?void 0:r.map(je))??[],productTags:t.productTags??[]}}))}),S(()=>(e(c),e(f),e(u)),()=>{a(U,e(c)==="wheels"?e(f).filter(t=>{if(!e(u))return!0;const r=G(t);return isNaN(r)?!1:e(u)==="Soft"?r>=78&&r<=84:e(u)==="Hybrid"?r>=85&&r<=91:e(u)==="Hard"?r>=92:!0}).sort((t,r)=>{const s=G(t),l=G(r);return isNaN(s)?1:isNaN(l)?-1:s-l}):e(f))}),ge(),be();var re=rt(),L=Pe(re),R=i(L);let se;var ae=n(R,2);let oe;o(L);var W=n(L,2);q(W,5,()=>e(d),te,(t,r)=>{var s=Ke();let l;var E=i(s,!0);o(s),N(J=>{l=z(s,1,"svelte-pohuj4",null,l,J),I(E,e(r))},[()=>({selected:e(r)===e(c)})],pe),P("click",s,()=>M(e(r))),y(t,s)}),o(W);var le=n(W,2);{var xe=t=>{Je(t,{onSliderChange:ye})};V(le,t=>{e(c)==="wheels"&&t(xe)})}var Z=n(le,2);q(Z,5,()=>e(U),t=>t.slug,(t,r)=>{var s=et(),l=i(s),E=i(l);{var J=_=>{var p=Qe();N(()=>{B(p,"src",e(r).cloudinaryUrl),B(p,"alt",e(r).productName),B(p,"width",e(r).imageWidth),B(p,"height",e(r).imageHeight)}),y(_,p)},Ne=_=>{var p=Xe();y(_,p)};V(E,_=>{e(r).cloudinaryUrl?_(J):_(Ne,!1)})}var ne=n(E,2),Se=i(ne,!0);o(ne),o(l);var K=n(l,2),ie=i(K);q(ie,5,()=>e(r).vendorPrices,te,(_,p)=>{var X=Ye(),Y=i(X),ee=i(Y),He=i(ee,!0);o(ee),o(Y);var ve=n(Y),Te=i(ve,!0);o(ve),o(X),N(()=>{B(ee,"href",e(p).productVendorUrl||e(p).url),I(He,e(p).vendor),I(Te,e(p).price)}),y(_,X)}),o(ie),o(K);var de=n(K,2);V(de,_=>{});var Q=n(de,2),ce=i(Q),ue=n(ce,2),$e=n(ue,2);V($e,_=>{}),o(Q);var Ce=n(Q,2);V(Ce,_=>{}),o(s),N(()=>I(Se,e(r).productName)),P("click",ce,()=>he(e(r))),P("click",ue,()=>ke(e(r).slug)),Me(1,s,()=>Oe,()=>({duration:200})),y(t,s)}),o(Z);var F=n(Z,2),we=i(F);{var Ae=t=>{var r=tt();y(t,r)};V(we,t=>{e(H)&&t(Ae)})}o(F),Ee(F,t=>a(j,t),()=>e(j)),N((t,r)=>{se=z(R,1,"svelte-pohuj4",null,se,t),oe=z(ae,1,"svelte-pohuj4",null,oe,r)},[()=>({selected:e(g)==="skateboard"}),()=>({selected:e(g)==="rollerskate"})],pe),P("click",R,()=>T("skateboard")),P("click",ae,()=>T("rollerskate")),y($,re),_e()}export{jt as component,kt as universal};
