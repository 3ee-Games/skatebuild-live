import{e as Ne}from"../chunks/BDT2A7tT.js";import{g as Ue}from"../chunks/B-PIdrVz.js";import{s as _e}from"../chunks/C0jP24D9.js";import{t as $,a as y}from"../chunks/Dyx7IcD8.js";import"../chunks/DCFqVp-V.js";import{al as ve,ar as O,am as be,an as n,ao as o,ap as l,at as ne,c as a,av as M,aw as De,o as B,j as C,ai as Ee,ak as Ve,b as Me}from"../chunks/CqSBzqQc.js";import{e as ee,s as v}from"../chunks/BrymZGSQ.js";import{i as q}from"../chunks/C2mwve1f.js";import{e as ce,i as de}from"../chunks/CnzoR5j3.js";import{r as pe,s as k,b as qe}from"../chunks/dkLHxQIu.js";import{i as he}from"../chunks/Gey7JNpV.js";import{p as x}from"../chunks/D8HLCSjA.js";import{s as ze,a as Ge}from"../chunks/CN80ba6N.js";import{a as We}from"../chunks/ChUaDgMI.js";import{g as Ae}from"../chunks/ecQM-7zy.js";import{c as He}from"../chunks/BxjodTjc.js";const Ie=!1,Je=!1,Ke=async({params:r,fetch:u})=>{const{username:g,slug:h}=r;let _;const i=Ue(_e);if(i.slug===h&&i.owner_username===g)_={name:i.name,slug:i.slug,build_type:i.build_type,skating_type:i.skating_type,deck_slug:i.deck_slug||void 0,griptape_slug:i.griptape_slug||void 0,rails_slug:i.rails_slug||void 0,risers_slug:i.risers_slug||void 0,boot_slug:i.boot_slug||void 0,plates_slug:i.plates_slug||void 0,slideblock_slug:i.slideblock_slug||void 0,toestops_slug:i.toestops_slug||void 0,trucks_slug:i.trucks_slug,bearings_slug:i.bearings_slug,wheels_slug:i.wheels_slug,bushings_slug:i.bushings_slug,owner_username:i.owner_username};else{const e=await u(`/data/builds/${g}/${h}.json`);if(e.ok)_=await e.json();else throw Ne(404,`Build not found: ${g}/${h}`)}const m=Le(_,u),w=await Promise.all(Object.entries(m).filter(([,e])=>e!==null).map(async([e,b])=>{const f=await b;return f.ok?[e,await f.json()]:[e,null]})),P=Object.fromEntries(w);return{build:_,products:P}};function Le(r,u){const g=r.build_type==="skateboard"?"skateboard-products":"rollerskate-products",h={bearings:u(`/data/${g}/bearings/${r.bearings_slug}.json`),bushings:u(`/data/${g}/bushings/${r.bushings_slug}.json`),trucks:u(`/data/${g}/trucks/${r.trucks_slug}.json`),wheels:u(`/data/${g}/wheels/${r.wheels_slug}.json`)},_={decks:r.deck_slug?u(`/data/${g}/decks/${r.deck_slug}.json`):null,griptape:r.griptape_slug?u(`/data/${g}/griptape/${r.griptape_slug}.json`):null,rails:r.rails_slug?u(`/data/${g}/rails/${r.rails_slug}.json`):null,risers:r.risers_slug?u(`/data/${g}/risers/${r.risers_slug}.json`):null},i={boots:r.boot_slug?u(`/data/${g}/boots/${r.boot_slug}.json`):null,slideblocks:r.slideblock_slug?u(`/data/${g}/slideblocks/${r.slideblock_slug}.json`):null,plates:r.plates_slug?u(`/data/${g}/plates/${r.plates_slug}.json`):null,toestops:r.toestops_slug?u(`/data/${g}/toestops/${r.toestops_slug}.json`):null};return{...h,...r.build_type==="skateboard"?_:i}}const ms=Object.freeze(Object.defineProperty({__proto__:null,load:Ke,prerender:Ie,ssr:Je},Symbol.toStringTag,{value:"Module"}));var Qe=$('<p class="svelte-11fic08"> </p>'),Re=$('<div class="option-container svelte-11fic08"><article class="main svelte-11fic08"><h4 class="highlight large svelte-11fic08"> </h4> <!></article> <aside class="aside aside-1 svelte-11fic08"><input type="checkbox" class="svelte-11fic08"> <label class="svelte-11fic08"> </label></aside></div>');function Xe(r,u){ve(u,!1);let g=x(u,"id",8,""),h=x(u,"name",8,""),_=x(u,"label",8,""),i=x(u,"description",8,""),m=x(u,"checked",12,!1),w=x(u,"onChange",8,()=>{});function P(p){w()({id:p.target.id,checked:p.target.checked})}he();var e=Re(),b=o(e),f=o(b),z=o(f,!0);l(f);var S=n(f,2);{var se=p=>{var j=Qe(),W=o(j,!0);l(j),O(()=>v(W,i())),y(p,j)};q(S,p=>{i()&&p(se)})}l(b);var T=n(b,2),d=o(T);pe(d);var N=n(d,2),G=o(N,!0);l(N),l(T),l(e),O(()=>{v(z,_()),k(d,"id",g()),k(d,"name",h()),k(N,"for",g()),v(G,_())}),He(d,m),ee("change",d,P),y(r,e),be()}var Ye=$('<div class="edit-container svelte-hggv5b"><button class="edit-button svelte-hggv5b">Edit Build</button></div>'),Ze=$('<tr class="svelte-hggv5b"><td class="svelte-hggv5b"><input type="radio"></td><td data-label="Vendor" class="svelte-hggv5b"><a target="_blank" rel="noopener" class="svelte-hggv5b"> </a></td><td data-label="Price" class="svelte-hggv5b"> </td></tr>'),Fe=$('<table class="price-table svelte-hggv5b"><thead class="svelte-hggv5b"><tr class="svelte-hggv5b"><th class="svelte-hggv5b">Select</th><th class="svelte-hggv5b">Vendor</th><th class="svelte-hggv5b">Price</th></tr></thead><tbody class="svelte-hggv5b"></tbody></table>'),es=$('<section class="build-section svelte-hggv5b"><div class="section-inner svelte-hggv5b"><img class="section-image svelte-hggv5b"> <div class="section-info svelte-hggv5b"><h2 class="svelte-hggv5b"> </h2> <p><a class="svelte-hggv5b"><strong> </strong></a> </p> <!></div></div></section>'),ss=$('<section class="build-section svelte-hggv5b"><h2 class="svelte-hggv5b">Grand Total</h2> <p class="grand-total svelte-hggv5b"> </p></section>'),ts=$('<div class="container svelte-hggv5b"><h1 class="svelte-hggv5b"> </h1> <p>Created by: <a class="svelte-hggv5b"> </a></p> <!> <!> <p>This build is designed for <strong> </strong>.</p> <!> <!></div>');function fs(r,u){ve(u,!1);const[g,h]=ze(),_=()=>Ge(We,"$accountData",g),i=B(),m=B(),w=B(),P=B();let e=x(u,"data",8),b=B(!1);function f({id:t,checked:s}){C(b,s)}function z(t){const s=Object.keys(t).find(c=>c!=="url");return{vendor:s,price:t[s],url:t.url}}function S(t){const s=t.split("-").pop().trim(),c=parseFloat(s.replace(/[^0-9.]/g,""));return isNaN(c)?0:Math.round(c*100)}const T=[{key:"decks",label:"Deck",slug:e().build.deck_slug},{key:"griptape",label:"griptape",slug:e().build.griptape_slug},{key:"boots",label:"Boots",slug:e().build.boot_slug},{key:"plates",label:"Plates",slug:e().build.plates_slug},{key:"trucks",label:"Trucks",slug:e().build.trucks_slug},{key:"slideblocks",label:"SlideBlocks",slug:e().build.slideblock_slug},{key:"wheels",label:"Wheels",slug:e().build.wheels_slug},{key:"bearings",label:"Bearings",slug:e().build.bearings_slug},{key:"toestops",label:"Toestops",slug:e().build.toestops_slug},{key:"rails",label:"rails",slug:e().build.rails_slug},{key:"risers",label:"risers",slug:e().build.risers_slug},{key:"bushings",label:"Bushings",slug:e().build.bushings_slug}].map(t=>{const s=e().products[t.key];if(!s||!t.slug)return null;const c=s.productPrices.map(z);return{key:t.key,label:t.label,slug:t.slug,productName:s.productName,productBrand:s.productBrand,cloudinaryUrl:s.cloudinaryUrl,vendorPrices:c}}).filter(Boolean),d=B({});T.forEach(t=>{t.vendorPrices.length&&ne(d,a(d)[t.key]=S(t.vendorPrices[0].price))});function N(t,s){ne(d,a(d)[t]=s)}function G(){_e.set({slug:e().build.slug,name:e().build.name,skater_type:[],build_type:[],skating_type:e().build.skating_type,stance:e().build.stance??"",deck_slug:e().build.deck_slug??"",griptape_slug:e().build.griptape_slug??"",risers_slug:e().build.risers_slug??"",boot_slug:e().build.boot_slug??"",toestops_slug:e().build.toestops_slug??"",slideblock_slug:e().build.slideblock_slug??"",rails_slug:e().build.rails_slug??"",plates_slug:e().build.plates_slug??"",trucks_slug:e().build.trucks_slug,bearings_slug:e().build.bearings_slug,wheels_slug:e().build.wheels_slug,bushings_slug:e().build.bushings_slug}),Ae("/builds/new")}M(()=>_(),()=>{var t;C(i,(t=_())==null?void 0:t.username)}),M(()=>Ee(e()),()=>{C(m,e().build.owner_username)}),M(()=>a(d),()=>{C(w,Object.values(a(d)).reduce((t,s)=>t+s,0))}),M(()=>a(w),()=>{C(P,`$${(a(w)/100).toFixed(2)}`)}),De(),he();var p=ts(),j=o(p),W=o(j);l(j);var A=n(j,2),H=n(o(A)),ke=o(H,!0);l(H),l(A);var te=n(A,2);{var me=t=>{var s=Ye(),c=o(s);l(s),ee("click",c,G),y(t,s)};q(te,t=>{a(i)===a(m)&&t(me)})}var ae=n(te,2);Xe(ae,{id:"toggle_prices",name:"toggle_prices",label:"Show Prices",description:"Compare prices.",onChange:f,get checked(){return a(b)},set checked(t){C(b,t)},$$legacy:!0});var I=n(ae,2),le=n(o(I)),fe=o(le,!0);l(le),Ve(),l(I);var re=n(I,2);ce(re,1,()=>T,de,(t,s)=>{var c=es(),D=o(c),J=o(D),oe=n(J,2),K=o(oe),we=o(K,!0);l(K);var L=n(K,2),E=o(L),ie=o(E),je=o(ie,!0);l(ie),l(E);var xe=n(E);l(L);var Pe=n(L,2);{var Be=Q=>{var R=Fe(),ue=n(o(R));ce(ue,5,()=>a(s).vendorPrices,de,(Ce,U)=>{var X=Ze(),Y=o(X),V=o(Y);pe(V),l(Y);var Z=n(Y),F=o(Z),Oe=o(F,!0);l(F),l(Z);var ge=n(Z),Se=o(ge,!0);l(ge),l(X),O(Te=>{k(V,"name","selected_"+a(s).key),qe(V,Te),k(F,"href",a(U).url),v(Oe,a(U).vendor),v(Se,a(U).price)},[()=>a(d)[a(s).key]===S(a(U).price)],Me),ee("change",V,()=>N(a(s).key,S(a(U).price))),y(Ce,X)}),l(ue),l(R),y(Q,R)};q(Pe,Q=>{a(b)&&Q(Be)})}l(oe),l(D),l(c),O(()=>{k(J,"src",a(s).cloudinaryUrl),k(J,"alt",a(s).productName),v(we,a(s).label),k(E,"href",`/product/${a(s).key}/${a(s).slug}`),v(je,a(s).productName),v(xe,`  by ${a(s).productBrand??""}`)}),y(t,c)});var ye=n(re,2);{var $e=t=>{var s=ss(),c=n(o(s),2),D=o(c,!0);l(c),l(s),O(()=>v(D,a(P))),y(t,s)};q(ye,t=>{a(b)&&t($e)})}l(p),O(()=>{v(W,`Build: ${e().build.name??""}`),k(H,"href",`/profiles/${a(m)}`),v(ke,a(m)),v(fe,e().build.skating_type)}),y(r,p),be(),h()}export{fs as component,ms as universal};
