import{t as x,a as k,n as Ve}from"../chunks/CjWepltc.js";import"../chunks/CTpKGYhS.js";import{al as pe,av as S,j as o,c as e,o as v,aw as _e,ao as l,ap as s,an as i,ar as N,am as ge,aq as Ie,b as fe,ai as Pe,aI as Ue}from"../chunks/DueBzpoQ.js";import{s as I,e as V}from"../chunks/lHISf35f.js";import{i as T}from"../chunks/D-tWdrT5.js";import{e as E,i as ae}from"../chunks/Bws3CwNn.js";import{r as Be,s as U}from"../chunks/Dju2emq_.js";import{s as z}from"../chunks/DzR8BbL1.js";import{t as Me,f as Oe}from"../chunks/CizEAwrK.js";import{b as Ee}from"../chunks/HMpj_zHy.js";import{i as be}from"../chunks/Cj4OnVxG.js";import{p as me}from"../chunks/ah6MTnGQ.js";import{o as ze}from"../chunks/BlydPtAX.js";import{g as De}from"../chunks/RvOCVyfi.js";import{s as Ge}from"../chunks/rui2Db1X.js";import{n as Le}from"../chunks/C8qMAo0z.js";import{b as Re}from"../chunks/D7vYIUz_.js";const We=!1,Ze=async({fetch:$})=>{const q=await $("/data/skateboard-products/categories.json").then(p=>p.json()),d=await $("/data/rollerskate-products/categories.json").then(p=>p.json());return{skateCats:q,rollerCats:d}},ht=Object.freeze(Object.defineProperty({__proto__:null,load:Ze,prerender:We},Symbol.toStringTag,{value:"Module"}));var Fe=x("<div> </div>"),Je=x('<div class="balance-container svelte-1482xuk"><p class="selected-description svelte-1482xuk"> </p> <input type="range" min="0" max="1" step="0.01" class="svelte-1482xuk"> <div class="slider-labels svelte-1482xuk"></div></div>');function Ke($,q){pe(q,!1);const d=v(),p=v(),P=v();let b=v(.5),D=me(q,"onSliderChange",8,()=>{});const _=["Soft (78A–84A)","Hybrid (85A–91A)","Hard (92A–105A)"],c={"Soft (78A–84A)":"Soft – best on rough surfaces.","Hybrid (85A–91A)":"Hybrid – mix of speed & control.","Hard (92A–105A)":"Hard – ideal for street/skatepark."};function j(u){o(b,+u.target.value);const H={value:e(b),bucket:e(p)};D()(H)}S(()=>e(b),()=>{o(d,Math.round(e(b)*(_.length-1)))}),S(()=>e(d),()=>{o(p,_[e(d)].split(" ")[0])}),S(()=>e(d),()=>{o(P,c[_[e(d)]])}),_e(),be();var m=Je(),w=l(m),C=l(w,!0);s(w);var h=i(w,2);Be(h);var y=i(h,2);E(y,5,()=>_,ae,(u,H,B)=>{var A=Fe(),M=l(A,!0);s(A),N(()=>{z(A,1,`label ${B===e(d)?"selected":""}`,"svelte-1482xuk"),I(M,e(H))}),k(u,A)}),s(y),s(m),N(()=>I(C,e(P))),Re(h,()=>e(b),u=>o(b,u)),V("input",h,j),k($,m),ge()}var Qe=x("<button> </button>"),Xe=x('<div class="slider svelte-f8wyaq"><!></div>'),Ye=x('<img class="product-image svelte-f8wyaq">'),et=Ve('<svg viewBox="0 0 64 64" class="placeholder svelte-f8wyaq"><rect width="64" height="64" fill="var(--tertiary-color)"></rect><text x="32" y="36" text-anchor="middle" fill="var(--heading-color)" font-size="12">Image NA</text></svg>'),tt=x('<tr class="svelte-f8wyaq"><td class="svelte-f8wyaq"><a target="_blank" rel="noopener" class="svelte-f8wyaq"> </a></td><td class="svelte-f8wyaq"> </td></tr>'),at=x('<div class="card svelte-f8wyaq"><div class="product-content svelte-f8wyaq"><!> <p class="name svelte-f8wyaq"> </p></div> <table class="price-table svelte-f8wyaq"><tbody></tbody></table> <!> <div class="buttons svelte-f8wyaq"><button class="build svelte-f8wyaq"><span class="svelte-f8wyaq">Add to Build</span></button> <button class="view svelte-f8wyaq"><span class="svelte-f8wyaq">View</span></button> <!></div> <!></div>'),rt=x("<p>Loading…</p>"),st=x('<div class="product-type-nav svelte-f8wyaq"><div class="top-nav svelte-f8wyaq"><button>Skateboard</button> <button>Rollerskate</button></div> <div class="category-nav svelte-f8wyaq"></div> <!></div> <div class="grid svelte-f8wyaq"></div> <div class="sentinel"><!></div>',1);function xt($,q){pe(q,!1);const d=v(),p=v(),P=v();let b=me(q,"data",8);const D=50;let _=v("skateboard"),c=v(""),j=1,m=v([]),w=!0,C=v(!1),h=v(),y,u=v(null);function H(t){o(_,t),B("bearings"),o(u,null),o(m,[]),j=1}async function B(t){o(c,t),o(u,null),o(m,[]),j=1,w=!0,await Ue(),A(),M()}function A(){y&&y.disconnect(),y=new IntersectionObserver(([t])=>{t.isIntersecting&&M()},{rootMargin:"200px"}),e(h)&&y.observe(e(h))}async function M(){if(!e(c)||e(C)||!w)return;o(C,!0);const a=`/data/${e(_)==="skateboard"?"skateboard-products":"rollerskate-products"}/${e(c)}-page-${j}.json`;try{const r=await fetch(a);if(r.ok){const n=await r.json();o(m,[...e(m),...n]),j+=1,n.length<D&&(w=!1,y.disconnect())}else w=!1,y.disconnect()}catch(r){console.error("Error loading products:",r),w=!1,y.disconnect()}o(C,!1)}ze(()=>{A()});function ye(t){const r={decks:"deck_slug",griptapes:"griptape_slug",risers:"risers_slug",boots:"boot_slug",toestops:"toestops_slug",slideblocks:"slideblock_slug",plates:"plates_slug",trucks:"trucks_slug",bearings:"bearings_slug",wheels:"wheels_slug",bushings:"bushings_slug"}[e(c)];Ge.update(n=>({...n,[r]:t.slug})),Le.send({message:`${t.productName} added to build`,link:"/builds/new",linkText:"see more"})}function ke(t){De(`/product/${e(c)}/${t}`)}function we(t){const a=Object.keys(t).find(r=>r!=="url"&&r!=="productVendorUrl");return{vendor:a,price:t[a],url:t.url,productVendorUrl:t.productVendorUrl}}function G(t){var r;const a=(r=t.productTags)==null?void 0:r.find(n=>n.field==="durometer");return a?parseInt(a.value.replace(/\D/g,""),10):NaN}function he({bucket:t}){o(u,t)}S(()=>(e(_),Pe(b())),()=>{o(d,e(_)==="skateboard"?b().skateCats:b().rollerCats)}),S(()=>(e(d),e(c)),()=>{e(d).length>0&&!e(c)&&o(c,e(d)[0])}),S(()=>e(m),()=>{o(p,e(m).map(t=>{var a;return{...t,vendorPrices:((a=t.productPrices)==null?void 0:a.map(we))??[],productTags:t.productTags??[]}}))}),S(()=>(e(c),e(p),e(u)),()=>{o(P,e(c)==="wheels"?e(p).filter(t=>{if(!e(u))return!0;const a=G(t);return isNaN(a)?!1:e(u)==="Soft"?a>=78&&a<=84:e(u)==="Hybrid"?a>=85&&a<=91:e(u)==="Hard"?a>=92:!0}).sort((t,a)=>{const r=G(t),n=G(a);return isNaN(r)?1:isNaN(n)?-1:r-n}):e(p))}),_e(),be();var re=st(),L=Ie(re),R=l(L),W=l(R);let se;var oe=i(W,2);let le;s(R);var Z=i(R,2);E(Z,5,()=>e(d),ae,(t,a)=>{var r=Qe();let n;var O=l(r,!0);s(r),N(K=>{n=z(r,1,"svelte-f8wyaq",null,n,K),I(O,e(a))},[()=>({selected:e(a)===e(c)})],fe),V("click",r,()=>B(e(a))),k(t,r)}),s(Z);var xe=i(Z,2);{var qe=t=>{var a=Xe(),r=l(a);Ke(r,{onSliderChange:he}),s(a),k(t,a)};T(xe,t=>{e(c)==="wheels"&&t(qe)})}s(L);var F=i(L,2);E(F,5,()=>e(P),t=>t.slug,(t,a)=>{var r=at(),n=l(r),O=l(n);{var K=g=>{var f=Ye();N(()=>{U(f,"src",e(a).cloudinaryUrl),U(f,"alt",e(a).productName),U(f,"width",e(a).imageWidth),U(f,"height",e(a).imageHeight)}),k(g,f)},Se=g=>{var f=et();k(g,f)};T(O,g=>{e(a).cloudinaryUrl?g(K):g(Se,!1)})}var ne=i(O,2),$e=l(ne,!0);s(ne),s(n);var Q=i(n,2),ie=l(Q);E(ie,5,()=>e(a).vendorPrices,ae,(g,f)=>{var Y=tt(),ee=l(Y),te=l(ee),He=l(te,!0);s(te),s(ee);var ve=i(ee),Te=l(ve,!0);s(ve),s(Y),N(()=>{U(te,"href",e(f).productVendorUrl||e(f).url),I(He,e(f).vendor),I(Te,e(f).price)}),k(g,Y)}),s(ie),s(Q);var de=i(Q,2);T(de,g=>{});var X=i(de,2),ce=l(X),ue=i(ce,2),je=i(ue,2);T(je,g=>{}),s(X);var Ce=i(X,2);T(Ce,g=>{}),s(r),N(()=>I($e,e(a).productName)),V("click",ce,()=>ye(e(a))),V("click",ue,()=>ke(e(a).slug)),Me(1,r,()=>Oe,()=>({duration:200})),k(t,r)}),s(F);var J=i(F,2),Ae=l(J);{var Ne=t=>{var a=rt();k(t,a)};T(Ae,t=>{e(C)&&t(Ne)})}s(J),Ee(J,t=>o(h,t),()=>e(h)),N((t,a)=>{se=z(W,1,"svelte-f8wyaq",null,se,t),le=z(oe,1,"svelte-f8wyaq",null,le,a)},[()=>({selected:e(_)==="skateboard"}),()=>({selected:e(_)==="rollerskate"})],fe),V("click",W,()=>H("skateboard")),V("click",oe,()=>H("rollerskate")),k($,re),ge()}export{xt as component,ht as universal};
