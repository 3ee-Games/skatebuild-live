import{t as E,a as C}from"../chunks/DRiVrBMz.js";import"../chunks/BLulYnNU.js";import{ak as N,ar as O,g as a,al as z,am as o,an as n,v as i,A as d,ao as l,ap as R}from"../chunks/DGYefiCd.js";import{e as w,s as V}from"../chunks/ByZ5mbbd.js";import{i as B}from"../chunks/CWD507PG.js";import{r as j}from"../chunks/BVgT1Vhj.js";import{s as x}from"../chunks/DsOQ9nNt.js";import{c as T}from"../chunks/BRzKQYUk.js";import{b as _}from"../chunks/DEDQ5tvs.js";import{i as F}from"../chunks/BoHxMQP1.js";import{g as G}from"../chunks/DKAYtLTS.js";import{a as H}from"../chunks/DjSiL-jg.js";var I=E('<div class="error"> </div>'),K=E('<form class="container svelte-1vntyoj"><h1>Create an account</h1> <div class="field svelte-1vntyoj"><label for="email">email address:</label> <input id="email" name="email" type="email" placeholder="enter your email address" required></div> <div class="field svelte-1vntyoj"><label for="username">username:</label> <input id="username" name="username" type="text" placeholder="enter a username" required></div> <div class="field svelte-1vntyoj"><label for="password">password:</label> <input id="password" name="password" type="password" placeholder="enter a secure password" required class="svelte-1vntyoj"></div> <!> <button type="submit" class="svelte-1vntyoj"><span>Create Account</span></button></form>');function oe(S,q){N(q,!1);let v=d(""),u=d(""),f=d(""),r=d(null);async function P(e){e.preventDefault(),i(r,null);try{const t=await fetch("https://3ee.dev/account/create/",{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"https://skatebuild.pro"},mode:"cors",body:JSON.stringify({email:a(v),username:a(u),password:a(f)})}),s=await t.json();if(!t.ok)throw new Error(s.error||"Account creation failed");H.set(s);const k=await fetch("https://3ee.dev/skatebuild/api/profiles/save/",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","Access-Control-Allow-Origin":"https://skatebuild.pro",Authorization:`Token ${s.token}`},mode:"cors",body:JSON.stringify({name:s.username})});if(!k.ok){const J=await k.json();console.warn("Profile creation warning:",J)}G("/profile")}catch(t){console.error(t),i(r,t.message)}}function g(){i(r,null)}F();var p=K(),y=o(n(p),2),c=o(n(y),2);j(c),l(y);var b=o(y,2),m=o(n(b),2);j(m),l(b);var h=o(b,2),A=o(n(h),2);j(A),l(h);var $=o(h,2);{var D=e=>{var t=I(),s=n(t,!0);l(t),O(()=>V(s,a(r))),C(e,t)};B($,e=>{a(r)&&e(D)})}R(2),l(p),O(()=>{x(c,1,T(a(r)?"validation-error":""),"svelte-1vntyoj"),x(m,1,T(a(r)?"validation-error":""),"svelte-1vntyoj")}),_(c,()=>a(v),e=>i(v,e)),w("input",c,g),_(m,()=>a(u),e=>i(u,e)),w("input",m,g),_(A,()=>a(f),e=>i(f,e)),w("submit",p,P),C(S,p),z()}export{oe as component};
