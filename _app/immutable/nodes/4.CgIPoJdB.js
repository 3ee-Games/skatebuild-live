import{e as We}from"../chunks/DsyNHAFX.js";import{g as He}from"../chunks/BvIipBL0.js";import{s as ye}from"../chunks/D7A9f9vv.js";import{t as b,b as _}from"../chunks/CtZTu4By.js";import"../chunks/CDWt5krY.js";import{ak as $e,ar as N,al as we,an as r,ao as l,am as d,aw as me,g as a,at as H,au as Je,A as q,v as A,j as Ke,ap as ke,n as fe}from"../chunks/CJKD5S76.js";import{e as J,s as v}from"../chunks/BbLPYoYc.js";import{i as O}from"../chunks/C8kyZyQg.js";import{e as ie,i as ue}from"../chunks/DvTTU5Xd.js";import{r as je,s as p,b as Le}from"../chunks/Cxroz1Nw.js";import{s as Qe}from"../chunks/DCAjMP5H.js";import{s as Xe}from"../chunks/CDqde_O8.js";import{i as xe}from"../chunks/Bx-_Ia0P.js";import{p as T}from"../chunks/Ci853rAn.js";import{s as Ye,a as Ze}from"../chunks/JtTExv-t.js";import{a as Fe}from"../chunks/BVsUSx6m.js";import{g as es}from"../chunks/C8YfgHks.js";import{c as ss}from"../chunks/D373IDgI.js";import{s as ts,r as as}from"../chunks/DqAaAC6z.js";const ls=!1,rs=!1,os=async({params:o,fetch:u})=>{const{username:c,slug:y}=o;let h;const i=He(ye);if(i.slug===y&&i.owner_username===c)h={name:i.name,slug:i.slug,build_type:i.build_type,skating_type:i.skating_type,deck_slug:i.deck_slug||void 0,griptape_slug:i.griptape_slug||void 0,rails_slug:i.rails_slug||void 0,risers_slug:i.risers_slug||void 0,boot_slug:i.boot_slug||void 0,plates_slug:i.plates_slug||void 0,slideblock_slug:i.slideblock_slug||void 0,toestops_slug:i.toestops_slug||void 0,trucks_slug:i.trucks_slug,bearings_slug:i.bearings_slug,wheels_slug:i.wheels_slug,bushings_slug:i.bushings_slug,owner_username:i.owner_username,attributes:i.attributes??[]};else{const e=await u(`/data/builds/${c}/${y}.json`);if(e.ok){const m=await e.json();h={...m,attributes:m.attributes??[]}}else throw We(404,`Build not found: ${c}/${y}`)}const w=is(h,u),x=await Promise.all(Object.entries(w).filter(([,e])=>e!==null).map(async([e,m])=>{const k=await m;return k.ok?[e,await k.json()]:[e,null]})),V=Object.fromEntries(x);return{build:h,products:V}};function is(o,u){const c=o.build_type==="skateboard"?"skateboard-products":"rollerskate-products",y={bearings:u(`/data/${c}/bearings/${o.bearings_slug}.json`),bushings:u(`/data/${c}/bushings/${o.bushings_slug}.json`),trucks:u(`/data/${c}/trucks/${o.trucks_slug}.json`),wheels:u(`/data/${c}/wheels/${o.wheels_slug}.json`)},h={decks:o.deck_slug?u(`/data/${c}/decks/${o.deck_slug}.json`):null,griptape:o.griptape_slug?u(`/data/${c}/griptape/${o.griptape_slug}.json`):null,rails:o.rails_slug?u(`/data/${c}/rails/${o.rails_slug}.json`):null,risers:o.risers_slug?u(`/data/${c}/risers/${o.risers_slug}.json`):null},i={boots:o.boot_slug?u(`/data/${c}/boots/${o.boot_slug}.json`):null,slideblocks:o.slideblock_slug?u(`/data/${c}/slideblocks/${o.slideblock_slug}.json`):null,plates:o.plates_slug?u(`/data/${c}/plates/${o.plates_slug}.json`):null,toestops:o.toestops_slug?u(`/data/${c}/toestops/${o.toestops_slug}.json`):null};return{...y,...o.build_type==="skateboard"?h:i}}const Gs=Object.freeze(Object.defineProperty({__proto__:null,load:os,prerender:ls,ssr:rs},Symbol.toStringTag,{value:"Module"}));var us=b('<p class="svelte-11fic08"> </p>'),ds=b('<div class="option-container svelte-11fic08"><article class="main svelte-11fic08"><h4 class="highlight large svelte-11fic08"> </h4> <!></article> <aside class="aside aside-1 svelte-11fic08"><input type="checkbox" class="svelte-11fic08"> <label class="svelte-11fic08"> </label></aside></div>');function ns(o,u){$e(u,!1);let c=T(u,"id",8,""),y=T(u,"name",8,""),h=T(u,"label",8,""),i=T(u,"description",8,""),w=T(u,"checked",12,!1),x=T(u,"onChange",8,()=>{});function V(j){x()({id:j.target.id,checked:j.target.checked})}xe();var e=ds(),m=r(e),k=r(m),P=r(k,!0);l(k);var K=d(k,2);{var L=j=>{var E=us(),G=r(E,!0);l(E),N(()=>v(G,i())),_(j,E)};O(K,j=>{i()&&j(L)})}l(m);var D=d(m,2),B=r(D);je(B);var M=d(B,2),$=r(M,!0);l(M),l(D),l(e),N(()=>{v(P,h()),p(B,"id",c()),p(B,"name",y()),p(M,"for",c()),v($,h())}),ss(B,w),J("change",B,V),_(o,e),we()}var cs=b('<img alt="Skateboard build" class="build-icon svelte-54dh2">'),gs=b('<img alt="Rollerskate build" class="build-icon svelte-54dh2">'),_s=b('<div class="edit-container svelte-54dh2"><button class="edit-button svelte-54dh2">Edit Build</button></div>'),vs=b('<div class="edit-container svelte-54dh2"><button class="edit-button svelte-54dh2">Modify Build</button></div>'),ps=b('<div class="attribute-item svelte-54dh2"><span class="attr-name svelte-54dh2"> </span> <div class="attr-bar-container svelte-54dh2"><div class="attr-bar svelte-54dh2"></div></div></div>'),bs=b('<section class="attributes-section svelte-54dh2"><h2 class="svelte-54dh2">Stats</h2> <!></section>'),hs=b('<tr class="svelte-54dh2"><td class="svelte-54dh2"><input type="radio" class="svelte-54dh2"></td><td data-label="Vendor" class="svelte-54dh2"><a target="_blank" rel="noopener" class="svelte-54dh2"> </a></td><td data-label="Price" class="svelte-54dh2"> </td></tr>'),ms=b('<table class="price-table svelte-54dh2"><thead class="svelte-54dh2"><tr class="svelte-54dh2"><th class="svelte-54dh2">Select</th><th class="svelte-54dh2">Vendor</th><th class="svelte-54dh2">Price</th></tr></thead><tbody class="svelte-54dh2"></tbody></table>'),ks=b('<section class="build-section svelte-54dh2"><div class="section-inner svelte-54dh2"><img> <div class="section-info svelte-54dh2"><h2 class="svelte-54dh2"> </h2> <p><a class="svelte-54dh2"><strong> </strong></a> </p> <!></div></div></section>'),fs=b(`<section class="build-section svelte-54dh2"><h2 class="svelte-54dh2">Grand Total</h2> <p class="grand-total svelte-54dh2"> </p> <p class="disclaimer svelte-54dh2">Prices are an estimate. Check to make sure all parts are compatible and the correct size
				before purchasing.</p></section>`),ys=b('<div class="container svelte-54dh2"><h1 class="svelte-54dh2"><!> </h1> <p>Created by <a class="svelte-54dh2"> </a></p> <!> <p>This build is designed for <strong><span class="highlight"> </span></strong>.</p> <!> <!> <!> <!></div>');function Is(o,u){$e(u,!1);const[c,y]=Ye(),h=()=>Ze(Fe,"$accountData",c),i=q(),w=q(),x=q(),V=q();let e=T(u,"data",8);const m=new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),k=e().build.attributes??[];let P=q(!1);function K({id:s,checked:t}){A(P,t)}function L(s){const t=Object.keys(s).find(n=>n!=="url"&&n!=="productVendorUrl");return{vendor:t,price:s[t],url:s.url,productVendorUrl:s.productVendorUrl}}function D(s){const t=s.split("-").pop().trim(),n=parseFloat(t.replace(/[^0-9.]/g,""));return isNaN(n)?0:Math.round(n*100)}const M=[{key:"decks",label:"Deck",slug:e().build.deck_slug},{key:"griptape",label:"griptape",slug:e().build.griptape_slug},{key:"boots",label:"Boots",slug:e().build.boot_slug},{key:"plates",label:"Plates",slug:e().build.plates_slug},{key:"trucks",label:"Trucks",slug:e().build.trucks_slug},{key:"slideblocks",label:"SlideBlocks",slug:e().build.slideblock_slug},{key:"wheels",label:"Wheels",slug:e().build.wheels_slug},{key:"bearings",label:"Bearings",slug:e().build.bearings_slug},{key:"toestops",label:"Toestops",slug:e().build.toestops_slug},{key:"rails",label:"rails",slug:e().build.rails_slug},{key:"risers",label:"risers",slug:e().build.risers_slug},{key:"bushings",label:"Bushings",slug:e().build.bushings_slug}].map(s=>{const t=e().products[s.key];if(!t||!s.slug)return null;const n=t.productPrices.map(L);return{key:s.key,label:s.label,slug:s.slug,productName:t.productName,productBrand:t.productBrand,cloudinaryUrl:t.cloudinaryUrl,vendorPrices:n}}).filter(Boolean),$=q({});M.forEach(s=>{s.vendorPrices.length&&me($,a($)[s.key]=D(s.vendorPrices[0].price))});function j(s,t){me($,a($)[s]=t)}function E(){ye.set({slug:e().build.slug,name:e().build.name,skater_type:[],build_type:e().build.build_type,skating_type:e().build.skating_type,stance:e().build.stance??"",deck_slug:e().build.deck_slug??"",griptape_slug:e().build.griptape_slug??"",risers_slug:e().build.risers_slug??"",boot_slug:e().build.boot_slug??"",toestops_slug:e().build.toestops_slug??"",slideblock_slug:e().build.slideblock_slug??"",rails_slug:e().build.rails_slug??"",plates_slug:e().build.plates_slug??"",trucks_slug:e().build.trucks_slug,bearings_slug:e().build.bearings_slug,wheels_slug:e().build.wheels_slug,bushings_slug:e().build.bushings_slug,attributes:k,owner_username:e().build.owner_username??""}),es("/builds/new")}H(()=>h(),()=>{var s;A(i,(s=h())==null?void 0:s.username)}),H(()=>Ke(e()),()=>{A(w,e().build.owner_username)}),H(()=>a($),()=>{A(x,Object.values(a($)).reduce((s,t)=>s+t,0))}),H(()=>a(x),()=>{A(V,`$${m.format(a(x)/100)}`)}),Je(),xe();var G=ys(),Q=r(G),de=r(Q);{var Pe=s=>{var t=cs();p(t,"src",ts),_(s,t)},Be=(s,t)=>{{var n=f=>{var g=gs();p(g,"src",as),_(f,g)};O(s,f=>{e().build.build_type==="rollerskate"&&f(n)},t)}};O(de,s=>{e().build.build_type==="skateboard"?s(Pe):s(Be,!1)})}var Se=d(de);l(Q);var X=d(Q,2),Y=d(r(X)),Ue=r(Y,!0);l(Y),l(X);var ne=d(X,2);{var Ce=s=>{var t=_s(),n=r(t);l(t),J("click",n,E),_(s,t)},Oe=s=>{var t=vs(),n=r(t);l(t),J("click",n,E),_(s,t)};O(ne,s=>{a(i)===a(w)?s(Ce):s(Oe,!1)})}var Z=d(ne,2),ce=d(r(Z)),ge=r(ce),Te=r(ge,!0);l(ge),l(ce),ke(),l(Z);var _e=d(Z,2);{var Ne=s=>{var t=bs(),n=d(r(t),2);ie(n,1,()=>k,ue,(f,g)=>{var S=ps(),U=r(S),F=r(U,!0);l(U);var z=d(U,2),C=r(z);l(z),l(S),N((R,ee)=>{p(S,"data-value",R),v(F,a(g).name),p(C,"data-color",a(g).value<=.3?"low":a(g).value<=.7?"medium":"high"),Xe(C,`width: ${ee??""}%;`)},[()=>`${Math.round(a(g).value*100)}%`,()=>Math.round(a(g).value*100)],fe),_(f,S)}),l(t),_(s,t)};O(_e,s=>{k.length&&s(Ne)})}var ve=d(_e,2);ns(ve,{id:"toggle_prices",name:"toggle_prices",label:"Show Prices",description:"Compare prices.",onChange:K,get checked(){return a(P)},set checked(s){A(P,s)},$$legacy:!0});var pe=d(ve,2);ie(pe,1,()=>M,ue,(s,t)=>{var n=ks(),f=r(n),g=r(f),S=d(g,2),U=r(S),F=r(U,!0);l(U);var z=d(U,2),C=r(z),R=r(C),ee=r(R,!0);l(R),l(C);var Me=d(C);l(z);var Ee=d(z,2);{var ze=se=>{var te=ms(),be=d(r(te));ie(be,5,()=>a(t).vendorPrices,ue,(qe,I)=>{var ae=hs(),le=r(ae),W=r(le);je(W),l(le);var re=d(le),oe=r(re),Ae=r(oe,!0);l(oe),l(re);var he=d(re),Ge=r(he);l(he),l(ae),N((Ie,Re)=>{p(W,"name","selected_"+a(t).key),Le(W,Ie),p(oe,"href",a(I).productVendorUrl),v(Ae,a(I).vendor),v(Ge,`$${Re??""}`)},[()=>a($)[a(t).key]===D(a(I).price),()=>m.format(a(I).price)],fe),J("change",W,()=>j(a(t).key,D(a(I).price))),_(qe,ae)}),l(be),l(te),_(se,te)};O(Ee,se=>{a(P)&&se(ze)})}l(S),l(f),l(n),N(()=>{p(g,"src",a(t).cloudinaryUrl),p(g,"alt",a(t).productName),Qe(g,1,`section-image ${a(t).key??""}`,"svelte-54dh2"),v(F,a(t).label),p(C,"href",`/product/${a(t).key}/${a(t).slug}`),v(ee,a(t).productName),v(Me,`  by ${a(t).productBrand??""}`)}),_(s,n)});var Ve=d(pe,2);{var De=s=>{var t=fs(),n=d(r(t),2),f=r(n,!0);l(n),ke(2),l(t),N(()=>v(f,a(V))),_(s,t)};O(Ve,s=>{a(P)&&s(De)})}l(G),N(()=>{v(Se,` ${e().build.name??""}`),p(Y,"href",`/profiles/${a(w)}`),v(Ue,a(w)),v(Te,e().build.skating_type)}),_(o,G),we(),y()}export{Is as component,Gs as universal};
