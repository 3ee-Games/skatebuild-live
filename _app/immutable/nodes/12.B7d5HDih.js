import{t as b,b as p,n as Ie,c as Ue}from"../chunks/DfXK_jSs.js";import"../chunks/DBxjm7Y_.js";import{ak as ye,at as B,v as o,g as e,A as u,au as xe,an as l,am as n,ao as a,ar as j,al as we,aq as pe,j as Ee,n as fe,ap as ke,aO as De}from"../chunks/CWOhmV2c.js";import{s as M,e as O}from"../chunks/CwUoD2Kj.js";import{i as A}from"../chunks/DLKYxPPN.js";import{e as re,i as ge}from"../chunks/CMljKicW.js";import{r as qe,s as $}from"../chunks/C32hVi81.js";import{s as ae}from"../chunks/Bde2N4K0.js";import{t as Ge,f as Le}from"../chunks/DbMgvxo3.js";import{b as Re}from"../chunks/D33Jp0k3.js";import{i as Ae}from"../chunks/BtpCMNU_.js";import{p as _e}from"../chunks/BuPKHJej.js";import{o as We}from"../chunks/CA7ktlnG.js";import{g as Ze}from"../chunks/DvdyA6tl.js";import{s as Fe}from"../chunks/D7-f-tgC.js";import{n as Je}from"../chunks/D88uZkrL.js";import{h as Ke}from"../chunks/CPRV9u04.js";import{b as Qe}from"../chunks/CAUEGmdr.js";const Xe=!1,Ye=async({fetch:I})=>{const C=await I("/data/skateboard-products/categories.json").then(_=>_.json()),v=await I("/data/rollerskate-products/categories.json").then(_=>_.json());return{skateCats:C,rollerCats:v}},Pt=Object.freeze(Object.defineProperty({__proto__:null,load:Ye,prerender:Xe},Symbol.toStringTag,{value:"Module"})),et="data:image/svg+xml,%3csvg%20style='height:%20512px;%20width:%20512px;'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M0%200h512v512H0z'%20fill='%23d6e010'%20fill-opacity='0'%3e%3c/path%3e%3cg%20class=''%20style=''%20transform='translate(0,0)'%3e%3cpath%20d='M230.844%2047.688c-28.215.083-58.57%202.925-91%208.78C339.666%2041.874%20441.95%20144.504%20495.938%20292.75c0-143.316-92.67-245.57-265.094-245.063zm-2.656%2033.624c-56.703%2022.374-97.407%2081.194-97.407%20150.844%200%2049.006%2020.153%2092.64%2051.845%20122%2022.64%208.588%2046.563%2010.904%2071.406%209.563-26.212-96.096-8.522-185.37%2032.5-271-18.534-6.51-37.96-10.382-58.342-11.407zm-41.844%201.782c-43.318%205.686-90.65%2023.297-142.5%2054.53%2024.987%2097.103%2056.545%20155.038%2092.78%20187.97-15.558-27.26-24.53-59.27-24.53-93.438%200-61.93%2029.422-116.84%2074.25-149.062zm134.156%2025a396.208%20396.208%200%200%201%204.156%2018.844%2028.23%2028.23%200%200%200-5.5-.532c-15.486%200-28.03%2012.55-28.03%2028.03%200%2015.483%2012.544%2028.033%2028.03%2028.033%204.33%200%208.432-.967%2012.094-2.72%203.26%2062.225-9.635%20123.823-41.03%20179.844%2032.597-5.38%2066.42-14.65%20100.78-22.406%2022.463-28.085%2036.094-64.734%2036.094-105.032%200-8.02-.553-15.9-1.594-23.594-31.27-44.417-66.02-78.693-105-100.468zm-301.875%2048.47C36.78%20459.957%20249.36%20479.842%20493.063%20343.717%20306.578%20348.125%20115.88%20532.286%2018.625%20156.56zm427%2082.75c-1.25%2033.993-11.342%2065.633-27.938%2092.28%2023.992-4.595%2048.14-7.793%2072.22-7.813-13.924-30.585-28.636-58.848-44.282-84.467zm41.53%20129.81c-127.06%2079.076-267.344%20111.63-421.03%2039.126%20130.246%20115.856%20342.11%2082.373%20421.03-39.125z'%20fill='%23000000'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e";var tt=b("<div> </div>"),st=b('<div class="balance-container svelte-t04hmu"><button class="close svelte-t04hmu">× Close</button> <p class="selected-description svelte-t04hmu"> </p> <input type="range" min="0" max="1" step="0.01" class="svelte-t04hmu"> <div class="slider-labels svelte-t04hmu"></div></div>');function rt(I,C){ye(C,!1);const v=u(),_=u(),G=u();let k=u(.5),oe=_e(C,"onSliderChange",8,()=>{}),U=_e(C,"onClose",8,()=>{});const f=["Soft (78A–84A)","Hybrid (85A–91A)","Hard (92A–105A)"],m={"Soft (78A–84A)":"Soft – best on rough surfaces.","Hybrid (85A–91A)":"Hybrid – mix of speed & control.","Hard (92A–105A)":"Hard – ideal for street/skatepark."};function E(x){o(k,+x.target.value);const w={value:e(k),bucket:e(_)};oe()(w)}B(()=>e(k),()=>{o(v,Math.round(e(k)*(f.length-1)))}),B(()=>e(v),()=>{o(_,f[e(v)].split(" ")[0])}),B(()=>e(v),()=>{o(G,m[f[e(v)]])}),xe(),Ae();var y=st(),N=l(y),S=n(N,2),D=l(S,!0);a(S);var g=n(S,2);qe(g);var h=n(g,2);re(h,5,()=>f,ge,(x,w,K)=>{var z=tt(),le=l(z,!0);a(z),j(()=>{ae(z,1,`label ${K===e(v)?"selected":""}`,"svelte-t04hmu"),M(le,e(w))}),p(x,z)}),a(h),a(y),j(()=>M(D,e(G))),O("click",N,function(...x){var w;(w=U())==null||w.apply(this,x)}),Qe(g,()=>e(k),x=>o(k,x)),O("input",g,E),p(I,y),we()}var at=b("<button> </button>"),ot=b('<div class="top-nav svelte-1h6dmsk"><button>Skateboard</button> <button>Rollerskate</button></div> <div class="category-nav svelte-1h6dmsk"></div>',1),lt=b('<div class="slider svelte-1h6dmsk"><!></div>'),nt=b('<img class="product-image svelte-1h6dmsk">'),it=Ie('<svg viewBox="0 0 64 64" class="placeholder svelte-1h6dmsk"><rect width="64" height="64" fill="var(--tertiary-color)"></rect><text x="32" y="36" text-anchor="middle" fill="var(--heading-color)" font-size="12">Image NA</text></svg>'),dt=b('<p class="name svelte-1h6dmsk"><strong>Durometer</strong>: <span class="product-highlight svelte-1h6dmsk"> </span></p>'),ct=b('<tr class="svelte-1h6dmsk"><td class="svelte-1h6dmsk"><a target="_blank" rel="noopener" class="svelte-1h6dmsk"> </a></td><td class="svelte-1h6dmsk"> </td></tr>'),vt=b('<div class="card svelte-1h6dmsk"><div class="product-content svelte-1h6dmsk"><!> <p class="name svelte-1h6dmsk"> </p></div> <!> <table class="price-table svelte-1h6dmsk"><tbody></tbody></table> <!> <div class="buttons svelte-1h6dmsk"><button class="build svelte-1h6dmsk"><img alt="Add to Build" class="svelte-1h6dmsk"> <span class="svelte-1h6dmsk">Add to build</span></button> <button class="view svelte-1h6dmsk"><img alt="View Product" class="svelte-1h6dmsk"> <span class="svelte-1h6dmsk">View</span></button> <!></div> <!></div>'),ut=b("<p>Loading…</p>"),mt=b('<div class="product-type-nav svelte-1h6dmsk"><!> <!></div> <div class="grid svelte-1h6dmsk"></div> <div class="sentinel"><!></div>',1);function Vt(I,C){ye(C,!1);const v=u(),_=u(),G=u();let k=_e(C,"data",8);const oe=50;let U=u(!1),f=u("skateboard"),m=u(""),E=1,y=u([]),N=!0,S=u(!1),D=u(),g,h=u(null);function x(t){o(f,t),e(f)==="skateboard"?w("decks"):w("boots"),o(h,null),o(y,[]),E=1}async function w(t){o(m,t),o(h,null),o(y,[]),E=1,N=!0,o(U,t==="wheels"),await De(),K(),z()}function K(){g&&g.disconnect(),g=new IntersectionObserver(([t])=>{t.isIntersecting&&z()},{rootMargin:"200px"}),e(D)&&g.observe(e(D))}async function z(){if(!e(m)||e(S)||!N)return;o(S,!0);const s=`/data/${e(f)==="skateboard"?"skateboard-products":"rollerskate-products"}/${e(m)}-page-${E}.json`;try{const r=await fetch(s);if(r.ok){const i=await r.json();o(y,[...e(y),...i]),E+=1,i.length<oe&&(N=!1,g.disconnect())}else N=!1,g.disconnect()}catch(r){console.error("Error loading products:",r),N=!1,g.disconnect()}o(S,!1)}We(()=>{K()});function le(t){const r={decks:"deck_slug",griptapes:"griptape_slug",risers:"risers_slug",rails:"rails_slug",boots:"boot_slug",toestops:"toestops_slug",slideblocks:"slideblock_slug",plates:"plates_slug",trucks:"trucks_slug",bearings:"bearings_slug",wheels:"wheels_slug",bushings:"bushings_slug"}[e(m)];Fe.update(i=>({...i,[r]:t.slug})),Je.send({message:`${t.productName} added to build`,link:"/builds/new",linkText:"see more"})}function Ce(t){Ze(`/product/${e(m)}/${t}`)}function Ne(t){const s=Object.keys(t).find(r=>r!=="url"&&r!=="productVendorUrl");return{vendor:s,price:t[s],url:t.url,productVendorUrl:t.productVendorUrl}}function ne(t){var r;const s=(r=t.productTags)==null?void 0:r.find(i=>i.field==="durometer");return s?parseInt(s.value.replace(/\D/g,""),10):NaN}function Se({bucket:t}){o(h,t)}function Te(){o(U,!1)}B(()=>(e(f),Ee(k())),()=>{o(v,e(f)==="skateboard"?k().skateCats:k().rollerCats)}),B(()=>(e(v),e(m)),()=>{e(v).length>0&&!e(m)&&o(m,e(v)[0])}),B(()=>e(y),()=>{o(_,e(y).map(t=>{var s;return{...t,vendorPrices:((s=t.productPrices)==null?void 0:s.map(Ne))??[],productTags:t.productTags??[]}}))}),B(()=>(e(m),e(_),e(h)),()=>{o(G,e(m)==="wheels"?e(_).filter(t=>{if(!e(h))return!0;const s=ne(t);return isNaN(s)?!1:e(h)==="Soft"?s>=78&&s<=84:e(h)==="Hybrid"?s>=85&&s<=91:e(h)==="Hard"?s>=92:!0}).sort((t,s)=>{const r=ne(t),i=ne(s);return isNaN(r)?1:isNaN(i)?-1:r-i}):e(_))}),xe(),Ae();var he=mt(),ie=pe(he),be=l(ie);{var je=t=>{var s=ot(),r=pe(s),i=l(r);let L;var Q=n(i,2);let X;a(r);var R=n(r,2);re(R,5,()=>e(v),ge,(W,T)=>{var H=at();let q;var Y=l(H,!0);a(H),j(ee=>{q=ae(H,1,"svelte-1h6dmsk",null,q,ee),M(Y,e(T))},[()=>({selected:e(T)===e(m)})],fe),O("click",H,()=>w(e(T))),p(W,H)}),a(R),j((W,T)=>{L=ae(i,1,"svelte-1h6dmsk",null,L,W),X=ae(Q,1,"svelte-1h6dmsk",null,X,T)},[()=>({selected:e(f)==="skateboard"}),()=>({selected:e(f)==="rollerskate"})],fe),O("click",i,()=>x("skateboard")),O("click",Q,()=>x("rollerskate")),p(t,s)};A(be,t=>{e(U)||t(je)})}var ze=n(be,2);{var He=t=>{var s=lt(),r=l(s);rt(r,{onSliderChange:Se,onClose:Te}),a(s),p(t,s)};A(ze,t=>{e(U)&&t(He)})}a(ie);var de=n(ie,2);re(de,5,()=>e(G),t=>t.slug,(t,s)=>{var r=vt(),i=l(r),L=l(i);{var Q=d=>{var c=nt();j(()=>{$(c,"src",e(s).cloudinaryUrl),$(c,"alt",e(s).productName),$(c,"width",e(s).imageWidth),$(c,"height",e(s).imageHeight)}),p(d,c)},X=d=>{var c=it();p(d,c)};A(L,d=>{e(s).cloudinaryUrl?d(Q):d(X,!1)})}var R=n(L,2),W=l(R,!0);a(R),a(i);var T=n(i,2);{var H=d=>{var c=Ue(),Z=pe(c);{var F=P=>{var V=dt(),J=n(l(V),2),ue=l(J,!0);a(J),a(V),j(me=>M(ue,me),[()=>e(s).productTags.find(me=>me.field==="durometer").value],fe),p(P,V)};A(Z,P=>{e(s).productTags.find(V=>V.field==="durometer")&&P(F)})}p(d,c)};A(T,d=>{e(s).productTags&&d(H)})}var q=n(T,2),Y=l(q);re(Y,5,()=>e(s).vendorPrices,ge,(d,c)=>{var Z=ct(),F=l(Z),P=l(F),V=l(P,!0);a(P),a(F);var J=n(F),ue=l(J,!0);a(J),a(Z),j(()=>{$(P,"href",e(c).productVendorUrl||e(c).url),M(V,e(c).vendor),M(ue,e(c).price)}),p(d,Z)}),a(Y),a(q);var ee=n(q,2);A(ee,d=>{});var ve=n(ee,2),te=l(ve),$e=l(te);$($e,"src",Ke),ke(2),a(te);var se=n(te,2),Me=l(se);$(Me,"src",et),ke(2),a(se);var Oe=n(se,2);A(Oe,d=>{}),a(ve);var Be=n(ve,2);A(Be,d=>{}),a(r),j(()=>M(W,e(s).productName)),O("click",te,()=>le(e(s))),O("click",se,()=>Ce(e(s).slug)),Ge(1,r,()=>Le,()=>({duration:200})),p(t,r)}),a(de);var ce=n(de,2),Pe=l(ce);{var Ve=t=>{var s=ut();p(t,s)};A(Pe,t=>{e(S)&&t(Ve)})}a(ce),Re(ce,t=>o(D,t),()=>e(D)),p(I,he),we()}export{Vt as component,Pt as universal};
