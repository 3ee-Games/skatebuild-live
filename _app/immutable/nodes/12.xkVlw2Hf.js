import{t as v,e as c,h as Fe}from"../chunks/D5sV2v-t.js";import"../chunks/D8N2IpKH.js";import{ao as we,ap as $,v as o,g as e,A as n,aq as xe,au as l,aw as i,av as a,ak as A,as as Ce,ar as he,ax as Le,j as Ue,n as de,ay as ce,aH as Re}from"../chunks/KsHbyUNR.js";import{s as P,e as j}from"../chunks/-k1GO34d.js";import{i as R}from"../chunks/CtV-pIfB.js";import{e as Z,i as ve}from"../chunks/DoBij9eO.js";import{r as Ve,s as O}from"../chunks/BPQtVfJb.js";import{s as ee}from"../chunks/CTRqQ_l3.js";import{b as qe}from"../chunks/CUj6M3NL.js";import{i as Ae}from"../chunks/BAI0Ud4A.js";import{p as ue}from"../chunks/DZQkes7P.js";import{s as Ee,a as Ke}from"../chunks/CPBfQeIv.js";import{o as Ge}from"../chunks/Cn8aehMD.js";import{g as Je}from"../chunks/DgM7Pa5_.js";import{p as Qe}from"../chunks/DDnZF508.js";import{s as We}from"../chunks/ZoJKLrrX.js";import{n as ye}from"../chunks/BdRBcRuZ.js";import{h as Xe}from"../chunks/CPRV9u04.js";import{b as Ye}from"../chunks/DOAI4MeL.js";const Ze=async()=>({skateCategories:["decks","griptape","trucks","wheels","bearings","bushings","rails","risers"],rollerCategories:["boots","plates","trucks","wheels","slideblocks","bearings","bushings","toestops"]}),Nt=Object.freeze(Object.defineProperty({__proto__:null,load:Ze},Symbol.toStringTag,{value:"Module"})),et="data:image/svg+xml,%3csvg%20style='height:%20512px;%20width:%20512px;'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M0%200h512v512H0z'%20fill='%23d6e010'%20fill-opacity='0'%3e%3c/path%3e%3cg%20class=''%20style=''%20transform='translate(0,0)'%3e%3cpath%20d='M230.844%2047.688c-28.215.083-58.57%202.925-91%208.78C339.666%2041.874%20441.95%20144.504%20495.938%20292.75c0-143.316-92.67-245.57-265.094-245.063zm-2.656%2033.624c-56.703%2022.374-97.407%2081.194-97.407%20150.844%200%2049.006%2020.153%2092.64%2051.845%20122%2022.64%208.588%2046.563%2010.904%2071.406%209.563-26.212-96.096-8.522-185.37%2032.5-271-18.534-6.51-37.96-10.382-58.342-11.407zm-41.844%201.782c-43.318%205.686-90.65%2023.297-142.5%2054.53%2024.987%2097.103%2056.545%20155.038%2092.78%20187.97-15.558-27.26-24.53-59.27-24.53-93.438%200-61.93%2029.422-116.84%2074.25-149.062zm134.156%2025a396.208%20396.208%200%200%201%204.156%2018.844%2028.23%2028.23%200%200%200-5.5-.532c-15.486%200-28.03%2012.55-28.03%2028.03%200%2015.483%2012.544%2028.033%2028.03%2028.033%204.33%200%208.432-.967%2012.094-2.72%203.26%2062.225-9.635%20123.823-41.03%20179.844%2032.597-5.38%2066.42-14.65%20100.78-22.406%2022.463-28.085%2036.094-64.734%2036.094-105.032%200-8.02-.553-15.9-1.594-23.594-31.27-44.417-66.02-78.693-105-100.468zm-301.875%2048.47C36.78%20459.957%20249.36%20479.842%20493.063%20343.717%20306.578%20348.125%20115.88%20532.286%2018.625%20156.56zm427%2082.75c-1.25%2033.993-11.342%2065.633-27.938%2092.28%2023.992-4.595%2048.14-7.793%2072.22-7.813-13.924-30.585-28.636-58.848-44.282-84.467zm41.53%20129.81c-127.06%2079.076-267.344%20111.63-421.03%2039.126%20130.246%20115.856%20342.11%2082.373%20421.03-39.125z'%20fill='%23000000'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e";var tt=v("<div> </div>"),st=v('<div class="balance-container svelte-t04hmu"><button class="close svelte-t04hmu">× Close</button> <p class="selected-description svelte-t04hmu"> </p> <input type="range" min="0" max="1" step="0.01" class="svelte-t04hmu"> <div class="slider-labels svelte-t04hmu"></div></div>');function at(J,H){we(H,!1);const S=n(),Q=n(),V=n();let d=n(.5),z=ue(H,"onSliderChange",8,()=>{}),M=ue(H,"onClose",8,()=>{});const B=["Soft (78A–84A)","Hybrid (85A–91A)","Hard (92A–105A)"],W={"Soft (78A–84A)":"Soft – best on rough surfaces.","Hybrid (85A–91A)":"Hybrid – mix of speed & control.","Hard (92A–105A)":"Hard – ideal for street/skatepark."};function I(p){o(d,+p.target.value);const m={value:e(d),bucket:e(Q)};z()(m)}$(()=>e(d),()=>{o(S,Math.round(e(d)*(B.length-1)))}),$(()=>e(S),()=>{o(Q,B[e(S)].split(" ")[0])}),$(()=>e(S),()=>{o(V,W[B[e(S)]])}),xe(),Ae();var h=st(),u=l(h),_=i(u,2),D=l(_,!0);a(_);var y=i(_,2);Ve(y);var F=i(y,2);Z(F,5,()=>B,ve,(p,m,q)=>{var w=tt(),te=l(w,!0);a(w),A(()=>{ee(w,1,`label ${q===e(S)?"selected":""}`,"svelte-t04hmu"),P(te,e(m))}),c(p,w)}),a(F),a(h),A(()=>P(D,e(V))),j("click",u,function(...p){var m;(m=M())==null||m.apply(this,p)}),Ye(y,()=>e(d),p=>o(d,p)),j("input",y,I),c(J,h),Ce()}var rt=v('<meta name="description" content="Browse and price products, from skateboards to rollerskates.">'),ot=v('<p class="brand-banner svelte-betbke">Showing all <span class="highlight svelte-betbke"> </span> products</p>'),lt=v("<button> </button>"),it=v('<div class="category-nav svelte-betbke"></div>'),nt=v('<div class="top-nav svelte-betbke"><button>Skateboard</button> <button>Rollerskate</button></div> <!>',1),dt=v('<div class="slider svelte-betbke"><!></div>'),ct=v('<img class="product-image svelte-betbke">'),vt=v('<p class="name svelte-betbke"><strong>Durometer</strong>: <span class="product-highlight svelte-betbke"> </span></p>'),ut=v('<tr class="svelte-betbke"><td class="svelte-betbke"><a target="_blank" rel="noopener" class="svelte-betbke"> </a></td><td class="svelte-betbke"> </td></tr>'),bt=v('<div class="card svelte-betbke"><div class="product-content svelte-betbke"><!> <p class="name svelte-betbke"> </p></div> <!> <table class="price-table svelte-betbke"><tbody></tbody></table> <div class="buttons svelte-betbke"><button class="build svelte-betbke"><img alt="Add to Build" class="svelte-betbke"><span class="svelte-betbke">Add to build</span></button> <button class="view svelte-betbke"><img alt="View Product" class="svelte-betbke"><span class="svelte-betbke">View</span></button></div></div>'),pt=v("<p>Loading…</p>"),mt=v('<div class="product-type-nav svelte-betbke"><!> <!></div> <div class="grid svelte-betbke"></div> <div class="sentinel"><!></div>',1);function Ot(J,H){we(H,!1);const[S,Q]=Ee(),V=()=>Ke(Qe,"$page",S),d=n(),z=n(),M=n(),B=n(),W=n();let I=ue(H,"data",8),h=n("skateboard"),u=n(),_=n(null),D=n(!1),y=n([]),F=1,p=!0,m=n(!1),q=n(),w;const te=new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2});Ge(()=>{be(),pe()});function be(){w==null||w.disconnect(),w=new IntersectionObserver(([t])=>t.isIntersecting&&pe(),{rootMargin:"200px"}),w.observe(e(q))}async function pe(){if(e(m)||!p)return;o(m,!0);const t=new URLSearchParams;t.set("category",e(h)),t.set("type",e(u)),e(d)&&t.set("brand",e(d)),t.set("page",String(F));const s=await fetch(`https://3ee.dev/skatebuild/api/products/?${t}`);if(!s.ok){p=!1,o(m,!1);return}const r=await s.json();o(y,[...e(y),...r.results]),p=!!r.next,F++,o(m,!1)}async function me(t){o(h,t),o(u,(t==="skateboard"?I().skateCategories:I().rollerCategories)[0]),ge()}async function $e(t){o(u,t),o(D,t==="wheels"),o(_,null),ge()}function Se({bucket:t}){o(_,t)}function ge(){o(y,[]),F=1,p=!0,Re().then(be)}const Be={decks:"deck",griptape:"griptape",risers:"risers",rails:"rails",boots:"boot",toestops:"toestops",slideblocks:"slideblock",plates:"plates",trucks:"trucks",bearings:"bearings",wheels:"wheels",bushings:"bushings"};function Pe(t){const s=Be[t.type];if(!s){console.error(`Unknown product type: ${t.type}`),ye.send({message:`Cannot add ${t.name} to build: unknown product type`,type:"error"});return}We.update(r=>{const x={...r,[`${s}_slug`]:t.slug,[`${s}_id`]:t.id,[`${s}_name`]:t.name};return console.log("Updated selectedBuild:",x),x}),ye.send({message:`${t.name} added to build`,link:"/builds/new",linkText:"Preview Build"})}function He(t){Je(`/product/${t.type}/${t.slug}`)}$(()=>V(),()=>{var t;o(d,((t=V().url.searchParams.get("brand"))==null?void 0:t.trim().toLowerCase())??null)}),$(()=>e(d),()=>{o(z,!!e(d))}),$(()=>(e(h),Ue(I())),()=>{o(M,e(h)==="skateboard"?I().skateCategories:I().rollerCategories)}),$(()=>(e(M),e(u)),()=>{var t;(t=e(M))!=null&&t.length&&!e(u)&&o(u,e(M)[0])}),$(()=>e(y),()=>{o(B,e(y).map(t=>({...t,vendorPrices:t.prices.map(s=>({vendor:s.vendor.name,price:parseFloat(s.price),url:s.product_url})).sort((s,r)=>s.price-r.price)})))}),$(()=>(e(B),e(z),e(d),e(u),e(_)),()=>{o(W,(()=>{let t=e(B);return e(z)&&(t=t.filter(s=>s.brand.toLowerCase()===e(d))),!e(z)&&e(u)==="wheels"&&e(_)&&(t=t.filter(s=>{const r=parseInt(s.durometer);return isNaN(r)?!1:e(_)==="Soft"?r>=78&&r<=84:e(_)==="Hybrid"?r>=85&&r<=91:e(_)==="Hard"?r>=92:!0}).sort((s,r)=>parseInt(s.durometer)-parseInt(r.durometer))),t})())}),xe(),Ae();var fe=mt();Fe(t=>{var s=rt();Le.title="Browse products to build skateboards and rollerskates",c(t,s)});var se=he(fe),_e=l(se);{var ze=t=>{var s=nt(),r=he(s),x=l(r);let E;var X=i(x,2);let K;a(r);var oe=i(r,2);{var Y=g=>{var f=ot(),T=i(l(f)),C=l(T,!0);a(T),ce(),a(f),A(()=>P(C,e(d))),c(g,f)},le=g=>{var f=it();Z(f,5,()=>e(M),ve,(T,C)=>{var N=lt();let L;var ie=l(N,!0);a(N),A(k=>{L=ee(N,1,"svelte-betbke",null,L,k),P(ie,e(C))},[()=>({selected:e(C)===e(u)})],de),j("click",N,()=>$e(e(C))),c(T,N)}),a(f),c(g,f)};R(oe,g=>{e(z)?g(Y):g(le,!1)})}A((g,f)=>{E=ee(x,1,"svelte-betbke",null,E,g),K=ee(X,1,"svelte-betbke",null,K,f)},[()=>({selected:e(h)==="skateboard"}),()=>({selected:e(h)==="rollerskate"})],de),j("click",x,()=>me("skateboard")),j("click",X,()=>me("rollerskate")),c(t,s)};R(_e,t=>{e(D)||t(ze)})}var Me=i(_e,2);{var Ie=t=>{var s=dt(),r=l(s);at(r,{onSliderChange:Se,onClose:()=>o(D,!1)}),a(s),c(t,s)};R(Me,t=>{e(D)&&t(Ie)})}a(se);var ae=i(se,2);Z(ae,5,()=>e(W),t=>t.slug,(t,s)=>{var r=bt(),x=l(r),E=l(x);{var X=k=>{var b=ct();A(()=>{O(b,"src",e(s).image_url),O(b,"alt",e(s).name),O(b,"width",e(s).image_width),O(b,"height",e(s).image_height)}),c(k,b)};R(E,k=>{e(s).image_url&&k(X)})}var K=i(E,2),oe=l(K,!0);a(K),a(x);var Y=i(x,2);{var le=k=>{var b=vt(),U=i(l(b),2),G=l(U,!0);a(U),a(b),A(()=>P(G,e(s).durometer)),c(k,b)};R(Y,k=>{e(u)==="wheels"&&e(s).durometer&&k(le)})}var g=i(Y,2),f=l(g);Z(f,5,()=>e(s).vendorPrices,ve,(k,b)=>{var U=ut(),G=l(U),ne=l(G),Oe=l(ne,!0);a(ne),a(G);var ke=i(G),je=l(ke);a(ke),a(U),A(De=>{O(ne,"href",e(b).url),P(Oe,e(b).vendor),P(je,`$${De??""}`)},[()=>te.format(e(b).price)],de),c(k,U)}),a(f),a(g);var T=i(g,2),C=l(T),N=l(C);O(N,"src",Xe),ce(),a(C);var L=i(C,2),ie=l(L);O(ie,"src",et),ce(),a(L),a(T),a(r),A(()=>P(oe,e(s).name)),j("click",C,()=>Pe(e(s))),j("click",L,()=>He(e(s))),c(t,r)}),a(ae);var re=i(ae,2),Te=l(re);{var Ne=t=>{var s=pt();c(t,s)};R(Te,t=>{e(m)&&t(Ne)})}a(re),qe(re,t=>o(q,t),()=>e(q)),c(J,fe),Ce(),Q()}export{Ot as component,Nt as universal};
