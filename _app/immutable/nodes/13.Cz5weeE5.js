import{c as n0,a as k,t as L}from"../chunks/DI9w5OQQ.js";import"../chunks/BxUFmY4z.js";import{ak as c0,aq as g2,al as v0,j as e,o as h,c as t,am as a,an as s,ao as l,ap as S,ar as J,av as U,aH as O2}from"../chunks/BpViCVQb.js";import{e as H,s as q2}from"../chunks/CPOfcv9_.js";import{i as Q}from"../chunks/WmZ9OhnZ.js";import{e as _2,i as z2}from"../chunks/DT_QGUp8.js";import{r as x,s as w,b as p0}from"../chunks/BDn2O-US.js";import{b as A,a as U2}from"../chunks/DJ-rPqZL.js";import{b as V2}from"../chunks/C2ObWKCn.js";import{p as d0}from"../chunks/CWmzcjye.js";import{i as m0}from"../chunks/CPZJgrMF.js";import{o as u0}from"../chunks/DVRc__YI.js";import{g as E}from"../chunks/Cko_2ExL.js";import{g as b2}from"../chunks/C2EbI2Tk.js";import{a as V}from"../chunks/BWRsyZQo.js";import{s as w2}from"../chunks/D66J3OLF.js";import{h as y2}from"../chunks/CPRV9u04.js";const f0="data:image/svg+xml,%3csvg%20style='height:%20512px;%20width:%20512px;'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M0%200h512v512H0z'%20fill='%23d6e010'%20fill-opacity='0'%3e%3c/path%3e%3cg%20class=''%20style=''%20transform='translate(0,0)'%3e%3cpath%20d='M143.627%2036.361c-2.18%200-16.495%2038.303-18.258%2039.584-1.763%201.281-42.615%203.06-43.289%205.133-.673%202.073%2031.33%2027.523%2032.004%2029.596.674%202.073-10.26%2041.475-8.496%2042.756%201.763%201.28%2035.86-21.291%2038.039-21.291%202.18%200%2036.276%2022.572%2038.039%2021.29%201.763-1.28-9.17-40.682-8.496-42.755.673-2.073%2032.677-27.523%2032.004-29.596-.674-2.073-41.526-3.852-43.29-5.133-1.763-1.28-16.077-39.584-18.257-39.584zm224.746%200c-2.18%200-16.494%2038.303-18.258%2039.584-1.763%201.281-42.615%203.06-43.289%205.133-.673%202.073%2031.33%2027.523%2032.004%2029.596.674%202.073-10.26%2041.475-8.496%2042.756%201.763%201.28%2035.86-21.291%2038.039-21.291%202.18%200%2036.276%2022.572%2038.04%2021.29%201.762-1.28-9.17-40.682-8.497-42.755.674-2.073%2032.677-27.523%2032.004-29.596-.674-2.073-41.526-3.852-43.29-5.133-1.762-1.28-16.077-39.584-18.257-39.584zM256%2039.883c-7.12%200-53.884%20125.123-59.645%20129.308-5.76%204.185-139.211%209.996-141.412%2016.768-2.2%206.772%20102.349%2089.912%20104.55%2096.684%202.2%206.771-33.513%20135.486-27.753%20139.671C137.5%20426.5%20248.88%20352.76%20256%20352.76c7.12%200%20118.5%2073.74%20124.26%2069.554%205.76-4.185-29.952-132.9-27.752-139.671%202.2-6.772%20106.749-89.912%20104.549-96.684-2.2-6.772-135.652-12.583-141.412-16.768-5.76-4.185-52.525-129.308-59.645-129.308zM77.973%20243.102c-2.18%200-16.495%2038.302-18.258%2039.584-1.763%201.28-42.616%203.06-43.29%205.132-.673%202.073%2031.333%2027.523%2032.007%2029.596.673%202.073-10.26%2041.475-8.496%2042.756%201.763%201.281%2035.857-21.291%2038.037-21.291%202.18%200%2036.275%2022.572%2038.039%2021.29%201.763-1.28-9.17-40.682-8.496-42.755.673-2.073%2032.679-27.523%2032.005-29.596-.673-2.073-41.525-3.851-43.289-5.132-1.763-1.282-16.08-39.584-18.26-39.584zm356.054%200c-2.18%200-16.496%2038.302-18.26%2039.584-1.763%201.28-42.615%203.06-43.288%205.132-.674%202.073%2031.332%2027.523%2032.005%2029.596.674%202.073-10.26%2041.475-8.496%2042.756%201.764%201.281%2035.86-21.291%2038.04-21.291%202.179%200%2036.273%2022.572%2038.036%2021.29%201.764-1.28-9.17-40.682-8.496-42.755.674-2.073%2032.68-27.523%2032.006-29.596-.673-2.073-41.526-3.851-43.289-5.132-1.763-1.282-16.078-39.584-18.258-39.584zM256%20369.932c-2.18%200-16.494%2038.302-18.258%2039.584-1.763%201.28-42.615%203.06-43.289%205.132-.673%202.073%2031.33%2027.525%2032.004%2029.598.674%202.073-10.26%2041.475-8.496%2042.756%201.763%201.281%2035.86-21.293%2038.039-21.293%202.18%200%2036.276%2022.574%2038.04%2021.293%201.762-1.281-9.17-40.683-8.497-42.756.673-2.073%2032.677-27.525%2032.004-29.598-.674-2.072-41.526-3.851-43.29-5.132-1.763-1.282-16.077-39.584-18.257-39.584z'%20fill='%23ff7a20'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e",h0="data:image/svg+xml,%3csvg%20style='height:%20512px;%20width:%20512px;'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M0%200h512v512H0z'%20fill='%23d6e010'%20fill-opacity='0'%3e%3c/path%3e%3cg%20class=''%20style=''%20transform='translate(0,0)'%3e%3cpath%20d='M98.398%2021.146a17.092%2017.092%200%200%200-4.636.521c-20.49%205.262-33.163%2020.63-36.116%2038.649-2.952%2018.019%202.168%2038.346%2012.676%2058.193%2020.695%2039.086%2063.262%2077.08%20117.852%2085.85-5.61-6.72-11.05-14.246-16.274-22.375-39.008-12.57-70.021-42.344-85.67-71.899-9.206-17.387-12.846-34.491-10.82-46.857C77.437%2050.862%2083.482%2042.89%2098.238%2039.1c.065-.017.068-.034.092-.053-.065-.143.105-.08%200%200a.68.68%200%200%200%20.176.217c.527.493%201.689%202.24%202.207%205.14%201.036%205.804-.413%2015.593-8.135%2025.68l14.293%2010.942c10.418-13.61%2013.65-28.086%2011.56-39.785-1.044-5.85-3.396-11.165-7.628-15.124-3.174-2.969-7.747-4.868-12.405-4.972zm315.204%200c-4.658.104-9.23%202.003-12.405%204.972-4.232%203.96-6.584%209.274-7.629%2015.124-2.089%2011.699%201.143%2026.174%2011.56%2039.785l14.294-10.942c-7.722-10.087-9.171-19.876-8.135-25.68.518-2.9%201.68-4.647%202.207-5.14a.695.695%200%200%200%20.176-.217c-.105-.08.065-.143%200%200%20.024.019.027.036.092.053%2014.756%203.79%2020.801%2011.76%2022.828%2024.127%202.026%2012.366-1.614%2029.47-10.82%2046.857-15.649%2029.555-46.662%2059.33-85.67%2071.899-5.223%208.129-10.665%2015.655-16.274%2022.375%2054.59-8.77%2097.157-46.764%20117.852-85.85%2010.508-19.847%2015.628-40.174%2012.676-58.193-2.953-18.02-15.626-33.387-36.116-38.649a17.092%2017.092%200%200%200-4.636-.521zm-276.166%207.713c2.146%2036.533%2016.76%2083.07%2036.537%20120.824%2010.707%2020.442%2022.876%2038.334%2034.761%2050.685C220.62%20212.72%20232%20218.858%20240%20218.858h32c8%200%2019.38-6.138%2031.266-18.49%2011.885-12.351%2024.054-30.243%2034.761-50.685%2019.777-37.755%2034.39-84.29%2036.537-120.824H137.436zm95.564%20208v16h46v-16h-46zm6.445%2034c-2.458%2025.967-12.796%2057.873-24.437%2076h81.984c-11.64-18.127-21.979-50.033-24.437-76h-33.11zm-38.445%2094v14h110v-14H201zm-32%2032v94h174v-94H169zm23%2023h128v48H192v-48z'%20fill='%23ff7a20'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e",g0=""+new URL("../assets/take-my-money.x1l8TnRV.svg",import.meta.url).href,x2="data:image/svg+xml,%3csvg%20style='height:%20512px;%20width:%20512px;'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M0%200h512v512H0z'%20fill='%23d6e010'%20fill-opacity='0'%3e%3c/path%3e%3cg%20class=''%20style=''%20transform='translate(0,0)'%3e%3cpath%20d='M372.48%2031.215c-77.65%200-116.48%2065.73-116.48%2065.73s-38.83-65.72-116.48-65.72c-37.14%200-107.77%2033.72-107.77%20125.13%200%20161.24%20224.25%20324.43%20224.25%20324.43s224.25-163.19%20224.25-324.43c0-91.42-70.63-125.13-107.77-125.14zM146.924%20225.65h220v60.7h-220z'%20fill='rgb(250,%2044,%20202)'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e",_0="data:image/svg+xml,%3csvg%20style='height:%20512px;%20width:%20512px;'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M0%200h512v512H0z'%20fill='%23d6e010'%20fill-opacity='0'%3e%3c/path%3e%3cg%20class=''%20style=''%20transform='translate(0,0)'%3e%3cpath%20d='M64%2048c-8.726%200-16%207.274-16%2016v384c0%208.726%207.274%2016%2016%2016h215v-16H64V64h63.375v97.53c0%203.924%203.443%207.095%207.72%207.095h169.81c4.277%200%207.72-3.17%207.72-7.094V64h69.22c.428.318.8.548%201.467%201.094%202.05%201.675%204.962%204.264%208.375%207.406%206.827%206.283%2015.65%2014.837%2024.313%2023.5%208.663%208.663%2017.217%2017.486%2023.5%2024.313%203.142%203.413%205.73%206.324%207.406%208.374.546.668.776%201.04%201.094%201.47V330.25l16%2016V128c0-2.68-.657-3.402-1.03-4.156a15.312%2015.312%200%200%200-1.095-1.844c-.74-1.1-1.575-2.19-2.594-3.438-2.036-2.492-4.768-5.55-8.03-9.093-6.524-7.09-15.155-16-23.938-24.782-8.782-8.783-17.692-17.414-24.78-23.938-3.545-3.262-6.6-5.994-9.094-8.03-1.247-1.02-2.337-1.855-3.438-2.595-.55-.37-1.09-.72-1.844-1.094-.754-.373-1.477-1.03-4.156-1.03H64zm87.72%2016h48.56c4.277%200%207.72%204.425%207.72%209.938v70.124c0%205.513-3.443%209.938-7.72%209.938h-48.56c-4.277%200-7.72-4.425-7.72-9.938V73.938c0-5.512%203.443-9.937%207.72-9.937zM114%20212c-4.432%200-8%203.568-8%208v184c0%204.432%203.568%208%208%208h165v-28h-76.72l15.345-15.375%20128-128L352%20234.28l6.375%206.345L406%20288.25V220c0-4.432-3.568-8-8-8H114zm238%2047.75L245.75%20366H297v128h110V366h51.25L352%20259.75zM448%20384v64h-23v16h23c8.726%200%2016-7.274%2016-16v-64h-16z'%20fill='%23000000'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e";var z0=L("<p>Loading profile…</p>"),b0=L('<div class="error-banner svelte-1tz9403"> </div>'),w0=L('<progress class="progress-bar svelte-1tz9403" max="100"></progress> <p> </p>',1),y0=L('<div class="field svelte-1tz9403"><label for="stance" class="svelte-1tz9403">Stance</label> <select id="stance" class="svelte-1tz9403"><option>Regular</option><option>Goofy</option></select></div>'),x0=L('<div class="list-row svelte-1tz9403"><input type="url" placeholder="https://" class="svelte-1tz9403"> <button class="svelte-1tz9403"><img alt="Find Skateboard builds" class="svelte-1tz9403"></button></div>'),k0=L('<div class="list-row svelte-1tz9403"><input placeholder="Sponsor name" required class="svelte-1tz9403"> <button class="svelte-1tz9403"><img alt="Find Skateboard builds" class="svelte-1tz9403"></button></div>'),S0=L('<div class="contest-row svelte-1tz9403"><input class="contest-name svelte-1tz9403" placeholder="Contest name" required> <input class="contest-division svelte-1tz9403" placeholder="Division"> <input class="contest-date svelte-1tz9403" type="date"> <input class="contest-placement svelte-1tz9403" type="number" placeholder="placement"> <button type="button" class="remove-btn svelte-1tz9403"><img alt="Find Skateboard builds" class="svelte-1tz9403"></button></div>'),M0=L('<!> <div class="container svelte-1tz9403"><h1 class="svelte-1tz9403">Edit Your Profile</h1> <div class="avatar-section svelte-1tz9403"><img alt="Avatar preview" class="avatar-img svelte-1tz9403"> <input type="file" accept="image/*" class="svelte-1tz9403"> <!></div> <form><div class="field svelte-1tz9403"><label for="name" class="svelte-1tz9403">Name</label> <input id="name" required class="svelte-1tz9403"></div> <div class="field svelte-1tz9403"><label for="hometown" class="svelte-1tz9403">Location</label> <input id="hometown" class="svelte-1tz9403"></div> <div class="field-group svelte-1tz9403"><label class="svelte-1tz9403"><input type="checkbox" class="svelte-1tz9403"> Skateboarder</label> <label class="svelte-1tz9403"><input type="checkbox" class="svelte-1tz9403"> Roller Skater</label></div> <!> <div class="field svelte-1tz9403"><label for="status" class="svelte-1tz9403">Skill Level</label> <select id="status" class="svelte-1tz9403"><option>Amateur</option><option>Pro</option></select></div> <section class="svelte-1tz9403"><h2 class="svelte-1tz9403"><img width="32px" height="32px" alt="social media section" class="svelte-1tz9403"> Social</h2> <!> <button type="button" class="svelte-1tz9403"><img alt="Add social media account" class="svelte-1tz9403"> <span class="svelte-1tz9403">Add Social Link</span></button></section> <section class="svelte-1tz9403"><h2 class="svelte-1tz9403"><img width="32px" height="32px" alt="sponsors section" class="svelte-1tz9403"> Sponsors</h2> <!> <button type="button" class="svelte-1tz9403"><img alt="Add social media account" class="svelte-1tz9403"> <span class="svelte-1tz9403">Add Social Link</span></button></section> <section class="svelte-1tz9403"><h2 class="svelte-1tz9403"><img width="32px" height="32px" alt="contest section" class="svelte-1tz9403"> Contest Results</h2> <div class="contest-header svelte-1tz9403"><span>Contest Name</span> <span>Division</span> <span>Date</span> <span>Placement</span> <span></span></div> <!> <button type="button" class="svelte-1tz9403"><img alt="Add social media account" class="svelte-1tz9403"> <span class="svelte-1tz9403">Add Result</span></button></section> <hr class="svelte-1tz9403"> <button type="submit" class="svelte-1tz9403"><img alt="Save profile" class="svelte-1tz9403"> <span class="svelte-1tz9403">Save Profile</span></button></form></div>',1);function B0(F2,N2){c0(N2,!1);const k2=[];let F=h(""),j="",D="",N=h(""),M=h([]),O=h("regular"),q=h("amateur"),z=h([]),g=h([]),b=h([]),X=h(null),$=h(!1),G=h(0),S2=h(!0),R=h(null);u0(async()=>{const o=E(w2);e(F,o.name),e(N,o.hometown),e(M,[...o.skater_type]),e(O,o.stance||"regular"),e(q,o.status||"amateur"),e(z,[...o.sponsors||[]]),e(g,[...o.contest_results||[]]),e(b,[...o.social_urls||[]]),j=o.image,D=o.imageSmall,e(X,o.imageSmall);try{const{username:c,token:u}=E(V);if(!c||!u){b2("/login");return}const _=await fetch(`/data/profiles/${c}.json`);if(_.ok){const r=await _.json();e(F,r.name),e(N,r.hometown),e(M,r.skater_type),e(O,r.stance||"regular"),e(q,r.status.toLowerCase()),e(z,r.sponsors||[]),e(g,r.contest_results||[]),e(b,r.social_urls||[]),j=r.image,D=r.imageSmall,e(X,r.imageSmall)}}catch(c){console.error("Failed to load profile JSON, using draft:",c)}finally{e(S2,!1)}});async function $2(o){var I;const c=o.currentTarget;if(!((I=c.files)!=null&&I[0]))return;const u=c.files[0];e(X,URL.createObjectURL(u)),e($,!0),e(G,0);const{token:_}=E(V),r=new FormData;r.append("file",u),r.append("useDiffusion","false");const d=new XMLHttpRequest;d.open("POST","https://3ee.dev/account/upload/",!0),d.setRequestHeader("Accept","application/json"),d.setRequestHeader("Access-Control-Allow-Origin","https://skatebuild.pro"),d.setRequestHeader("Authorization",`Token ${_}`),d.upload.onprogress=y=>{y.lengthComputable&&e(G,Math.round(y.loaded/y.total*100))},d.onload=()=>{if(e($,!1),d.status===401){V.set({}),b2("/login");return}if(d.status>=200&&d.status<300){const y=JSON.parse(d.responseText);j=y.image,D=y.imageSmall;const B={...E(V)};B.profile={...B.profile,image:j,imageSmall:D},V.set(B),w2.update(W=>({...W,image:j,imageSmall:D}))}else console.error("Upload failed:",d.statusText),e(R,"Image upload failed")},d.onerror=()=>{e($,!1),console.error("Upload XHR error"),e(R,"Image upload failed")},d.send(r)}function I2(){e(z,[...t(z),""])}function B2(o){e(z,t(z).filter((c,u)=>u!==o))}function J2(){e(g,[...t(g),{name:"",division:"",date:new Date().toISOString().slice(0,10),placement:1}])}function E2(o){e(g,t(g).filter((c,u)=>u!==o))}function X2(){e(b,[...t(b),""])}function G2(o){e(b,t(b).filter((c,u)=>u!==o))}async function Y2(){e(R,null);const{username:o,token:c}=E(V);if(!o||!c){e(R,"Not authenticated");return}const u={name:t(F),hometown:t(N),skater_type:t(M),stance:t(O),status:t(q),sponsors:t(z),contest_results:t(g),image:j,imageSmall:D,social_urls:t(b)};try{const _=await fetch("https://3ee.dev/skatebuild/api/profiles/save/",{method:"POST",headers:{Accept:"application/json","Access-Control-Allow-Origin":"https://skatebuild.pro","Content-Type":"application/json",Authorization:`Token ${c}`},mode:"cors",body:JSON.stringify(u)}),r=await _.json();if(w2.set(r),!_.ok)throw new Error(r.detail||"Save failed");await b2(`/profiles/${o}`)}catch(_){console.error(_),e(R,_.message)}}m0();var M2=n0(),K2=g2(M2);{var Q2=o=>{var c=z0();k(o,c)},W2=o=>{var c=M0(),u=g2(c);{var _=i=>{var n=b0(),v=s(n,!0);l(n),J(()=>q2(v,t(R))),k(i,n)};Q(u,i=>{t(R)&&i(_)})}var r=a(u,2),d=a(s(r),2),I=s(d),y=a(I,2),B=a(y,2);{var W=i=>{var n=w0(),v=g2(n),p=a(v,2),m=s(p);l(p),J(()=>{p0(v,t(G)),q2(m,`Uploading… ${t(G)??""}%`)}),k(i,n)};Q(B,i=>{t($)&&i(W)})}l(d);var Z=a(d,2),t2=s(Z),H2=a(s(t2),2);x(H2),l(t2);var e2=a(t2,2),A2=a(s(e2),2);x(A2),l(e2);var a2=a(e2,2),s2=s(a2),Y=s(s2);x(Y),Y.value=Y.__value="skateboarder",S(),l(s2);var L2=a(s2,2),K=s(L2);x(K),K.value=K.__value="roller skater",S(),l(L2),l(a2);var R2=a(a2,2);{var Z2=i=>{var n=y0(),v=a(s(n),2);J(()=>{t(O),U(()=>{})});var p=s(v);p.value=p.__value="regular";var m=a(p);m.value=m.__value="goofy",l(v),l(n),V2(v,()=>t(O),f=>e(O,f)),k(i,n)};Q(R2,i=>{t(M).includes("skateboarder")&&i(Z2)})}var l2=a(R2,2),o2=a(s(l2),2);J(()=>{t(q),U(()=>{})});var i2=s(o2);i2.value=i2.__value="amateur";var C2=a(i2);C2.value=C2.__value="pro",l(o2),l(l2);var r2=a(l2,2),n2=s(r2),t0=s(n2);w(t0,"src",f0),S(),l(n2);var P2=a(n2,2);_2(P2,1,()=>t(b),z2,(i,n,v)=>{var p=x0(),m=s(p);x(m);var f=a(m,2),C=s(f);w(C,"src",x2),l(f),l(p),A(m,()=>t(b)[v],P=>O2(b,t(b)[v]=P)),H("click",f,()=>G2(v)),k(i,p)});var c2=a(P2,2),e0=s(c2);w(e0,"src",y2),S(2),l(c2),l(r2);var v2=a(r2,2),p2=s(v2),a0=s(p2);w(a0,"src",g0),S(),l(p2);var T2=a(p2,2);_2(T2,1,()=>t(z),z2,(i,n,v)=>{var p=k0(),m=s(p);x(m);var f=a(m,2),C=s(f);w(C,"src",x2),l(f),l(p),A(m,()=>t(z)[v],P=>O2(z,t(z)[v]=P)),H("click",f,()=>B2(v)),k(i,p)});var d2=a(T2,2),s0=s(d2);w(s0,"src",y2),S(2),l(d2),l(v2);var m2=a(v2,2),u2=s(m2),l0=s(u2);w(l0,"src",h0),S(),l(u2);var j2=a(u2,4);_2(j2,1,()=>t(g),z2,(i,n,v)=>{var p=S0(),m=s(p);x(m);var f=a(m,2);x(f);var C=a(f,2);x(C);var P=a(C,2);x(P);var h2=a(P,2),r0=s(h2);w(r0,"src",x2),l(h2),l(p),A(m,()=>t(n).name,T=>(t(n).name=T,U(()=>t(g)))),A(f,()=>t(n).division,T=>(t(n).division=T,U(()=>t(g)))),A(C,()=>t(n).date,T=>(t(n).date=T,U(()=>t(g)))),A(P,()=>t(n).placement,T=>(t(n).placement=T,U(()=>t(g)))),H("click",h2,()=>E2(v)),k(i,p)});var f2=a(j2,2),o0=s(f2);w(o0,"src",y2),S(2),l(f2),l(m2);var D2=a(m2,4),i0=s(D2);w(i0,"src",_0),S(2),l(D2),l(Z),l(r),J(()=>{w(I,"src",t(X)||"/default-avatar.png"),y.disabled=t($)}),H("change",y,$2),A(H2,()=>t(F),i=>e(F,i)),A(A2,()=>t(N),i=>e(N,i)),U2(k2,[],Y,()=>t(M),i=>e(M,i)),U2(k2,[],K,()=>t(M),i=>e(M,i)),V2(o2,()=>t(q),i=>e(q,i)),H("click",c2,X2),H("click",d2,I2),H("click",f2,J2),H("submit",Z,d0(Y2)),k(o,c)};Q(K2,o=>{t(S2)?o(Q2):o(W2,!1)})}k(F2,M2),v0()}export{B0 as component};
