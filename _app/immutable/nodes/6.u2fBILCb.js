import{f as Je}from"../chunks/19TPhq2Y.js";import{t as w,a as m}from"../chunks/DRiVrBMz.js";import"../chunks/BLulYnNU.js";import{ak as Ie,A as N,ar as d,an as r,g as e,al as Le,am as l,n as Me,v as g,ao as s,av as q,ap as ol,aq as $,aw as Ue}from"../chunks/DGYefiCd.js";import{i as Ve}from"../chunks/BoHxMQP1.js";import{p as ee,s as rl}from"../chunks/OZP53ftb.js";import{o as We}from"../chunks/ezTx0NwI.js";import{g as Ee}from"../chunks/IxWn49b3.js";import{e as Z,s as T}from"../chunks/ByZ5mbbd.js";import{i as Be}from"../chunks/CWD507PG.js";import{e as A,i as B}from"../chunks/k-lROdaV.js";import{r as ie,a as il}from"../chunks/BVgT1Vhj.js";import{b as Ge,a as vl}from"../chunks/DEDQ5tvs.js";import{b as j}from"../chunks/D8k2iUjG.js";import{s as Te}from"../chunks/BVyUmpUc.js";import{a as nl}from"../chunks/DjSiL-jg.js";import{g as ul}from"../chunks/DKAYtLTS.js";const _l=!1,dl=async({fetch:G})=>{const R=await Je(G,"skateboard-products/index.json"),I=await Je(G,"rollerskate-products/index.json");return{skateboardProducts:R,rollerskateProducts:I}},Xl=Object.freeze(Object.defineProperty({__proto__:null,load:dl,prerender:_l},Symbol.toStringTag,{value:"Module"}));var pl=w('<label class="svelte-1w56bhl"><input type="radio" required class="svelte-1w56bhl"> </label>'),cl=w("<option>Street</option> <option>Vert</option> <option>Freestyle</option> <option>Park</option> <option>Downhill</option> <option>Cruisin</option>",1),bl=w("<option>Artistic skating</option> <option>Roller dance</option> <option>Speed skating</option> <option>Roller derby</option> <option>Park skating</option> <option>Roller hockey</option>",1),gl=w("<option> </option>"),fl=w("<option> </option>"),hl=w("<option> </option>"),ml=w("<option> </option>"),wl=w('<div class="field svelte-1w56bhl"><label class="svelte-1w56bhl">Deck</label> <select required class="svelte-1w56bhl"><option disabled>Select deck</option><!></select></div> <div class="field svelte-1w56bhl"><label class="svelte-1w56bhl">Griptape</label> <select class="svelte-1w56bhl"><option disabled>Select griptape</option><!></select></div> <div class="field svelte-1w56bhl"><label class="svelte-1w56bhl">Rails</label> <select class="svelte-1w56bhl"><option disabled>Select rail</option><!></select></div> <div class="field svelte-1w56bhl"><label class="svelte-1w56bhl">Risers</label> <select class="svelte-1w56bhl"><option disabled>Select risers</option><!></select></div>',1),kl=w("<option> </option>"),yl=w("<option> </option>"),Sl=w("<option> </option>"),xl=w("<option> </option>"),Nl=w('<div class="field svelte-1w56bhl"><label class="svelte-1w56bhl">Boot</label> <select required class="svelte-1w56bhl"><option disabled>Select boot</option><!></select></div> <div class="field svelte-1w56bhl"><label class="svelte-1w56bhl">Toestops</label> <select class="svelte-1w56bhl"><option disabled>Select toestops</option><!></select></div> <div class="field svelte-1w56bhl"><label class="svelte-1w56bhl">Slideblocks</label> <select class="svelte-1w56bhl"><option disabled>Select slideblocks</option><!></select></div> <div class="field svelte-1w56bhl"><label class="svelte-1w56bhl">Plates</label> <select required class="svelte-1w56bhl"><option disabled>Select plates</option><!></select></div>',1),Pl=w("<option> </option>"),ql=w("<option> </option>"),Al=w("<option> </option>"),Bl=w("<option> </option>"),Tl=w('<div class="attribute-row svelte-1w56bhl"><input type="text" placeholder="Name" required class="svelte-1w56bhl"> <input class="attribute-slider svelte-1w56bhl" type="range" min="0" max="1" step="0.01"> <button class="removeBtn svelte-1w56bhl" type="button">âœ•</button></div>'),jl=w('<form class="container svelte-1w56bhl"><div class="field svelte-1w56bhl"><label class="svelte-1w56bhl">Build Name</label> <input required class="svelte-1w56bhl"></div> <div class="field-group svelte-1w56bhl"></div> <div class="field svelte-1w56bhl"><label class="svelte-1w56bhl">Style</label> <select required class="svelte-1w56bhl"><option disabled>Select style</option><!></select></div> <!> <!> <div class="field svelte-1w56bhl"><label class="svelte-1w56bhl">Trucks</label> <select required class="svelte-1w56bhl"><option disabled>Select trucks</option><!></select></div> <div class="field svelte-1w56bhl"><label class="svelte-1w56bhl">Bearings</label> <select required class="svelte-1w56bhl"><option disabled>Select bearings</option><!></select></div> <div class="field svelte-1w56bhl"><label class="svelte-1w56bhl">Wheels</label> <select required class="svelte-1w56bhl"><option disabled>Select wheels</option><!></select></div> <div class="field svelte-1w56bhl"><label class="svelte-1w56bhl">Bushings</label> <select required class="svelte-1w56bhl"><option disabled>Select bushings</option><!></select></div> <div class="field svelte-1w56bhl"><label class="svelte-1w56bhl">Stats (max 5)</label> <!> <button type="button" class="add-attr-btn svelte-1w56bhl"><span class="svelte-1w56bhl">+ Add Stat</span></button></div> <button type="submit" class="svelte-1w56bhl"><span>Save Build</span></button></form>');function Ol(G,R){Ie(R,!1);const I=[];let k=ee(R,"skateboardProducts",8),y=ee(R,"rollerskateProducts",8),f=ee(R,"prefill",8),le=ee(R,"submit",8),L=N(f().name||"");f().slug;let ve=f().skater_type,C=N(f().skating_type),V=N(f().deck_slug),W=N(f().griptape_slug),D=N(f().rails_slug),z=N(f().risers_slug),Y=N(f().boot_slug),H=N(f().toestops_slug),K=N(f().slideblock_slug),Q=N(f().plates_slug),te=N(f().trucks_slug),ae=N(f().bearings_slug),se=N(f().wheels_slug),oe=N(f().bushings_slug),p=N(f().build_type||"");const Ye=["skateboard","rollerskate"];let x=N(f().attributes??[]);We(()=>{const o=e(Y)||e(H)||e(K)||e(Q);g(p,o?"rollerskate":"skateboard")});async function He(o){o.preventDefault();const i={name:e(L),build_type:e(p),skater_type:ve,skating_type:e(C),deck_slug:e(p)==="skateboard"?e(V):void 0,griptape_slug:e(p)==="skateboard"?e(W):void 0,rails_slug:e(p)==="skateboard"?e(D):void 0,risers_slug:e(p)==="skateboard"?e(z):void 0,boot_slug:e(p)==="rollerskate"?e(Y):void 0,toestops_slug:e(p)==="rollerskate"?e(H):void 0,slideblock_slug:e(p)==="rollerskate"?e(K):void 0,plates_slug:e(p)==="rollerskate"?e(Q):void 0,trucks_slug:e(te),bearings_slug:e(ae),wheels_slug:e(se),bushings_slug:e(oe),...e(x).length?{attributes:e(x)}:{}},t=await le()({detail:i});t!=null&&t.slug&&t.slug}const je=()=>e(x).length<5;function Ke(){je()&&g(x,[...e(x),{name:"",value:.5}])}Ve();var re=jl(),ne=r(re),Oe=l(r(ne),2);ie(Oe),s(ne);var ue=l(ne,2);A(ue,5,()=>Ye,B,(o,i)=>{var t=pl(),v=r(t);ie(v);var n,S=l(v);s(t),d(b=>{n!==(n=e(i))&&(v.value=(v.__value=e(i))??""),T(S,` ${b??""}`)},[()=>e(i).charAt(0).toUpperCase()+e(i).slice(1)],Me),vl(I,[],v,()=>(e(i),e(p)),b=>g(p,b)),m(o,t)}),s(ue);var _e=l(ue,2),de=l(r(_e),2);d(()=>{e(C),q(()=>{e(p)})});var pe=r(de);pe.value=pe.__value="";var Qe=l(pe);{var Xe=o=>{var i=cl(),t=$(i);t.value=t.__value="street";var v=l(t,2);v.value=v.__value="vert";var n=l(v,2);n.value=n.__value="freestyle";var S=l(n,2);S.value=S.__value="park";var b=l(S,2);b.value=b.__value="downhill";var h=l(b,2);h.value=h.__value="cruisin",m(o,i)},Ze=o=>{var i=bl(),t=$(i);t.value=t.__value="artistic skating";var v=l(t,2);v.value=v.__value="roller dance";var n=l(v,2);n.value=n.__value="speed skating";var S=l(n,2);S.value=S.__value="roller derby";var b=l(S,2);b.value=b.__value="park skating";var h=l(b,2);h.value=h.__value="roller hockey",m(o,i)};Be(Qe,o=>{e(p)==="skateboard"?o(Xe):o(Ze,!1)})}s(de),s(_e);var Re=l(_e,2);{var $e=o=>{var i=wl(),t=$(i),v=l(r(t),2);d(()=>{e(V),q(()=>{k()})});var n=r(v);n.value=n.__value="";var S=l(n);A(S,1,()=>k().decks,B,(u,_)=>{var a=gl(),c={},P=r(a,!0);s(a),d(()=>{c!==(c=e(_).slug)&&(a.value=(a.__value=e(_).slug)??""),T(P,e(_).productName)}),m(u,a)}),s(v),s(t);var b=l(t,2),h=l(r(b),2);d(()=>{e(W),q(()=>{k()})});var O=r(h);O.value=O.__value="";var Pe=l(O);A(Pe,1,()=>k().griptape,B,(u,_)=>{var a=fl(),c={},P=r(a,!0);s(a),d(()=>{c!==(c=e(_).slug)&&(a.value=(a.__value=e(_).slug)??""),T(P,e(_).productName)}),m(u,a)}),s(h),s(b);var F=l(b,2),J=l(r(F),2);d(()=>{e(D),q(()=>{k()})});var M=r(J);M.value=M.__value="";var qe=l(M);A(qe,1,()=>k().rails,B,(u,_)=>{var a=hl(),c={},P=r(a,!0);s(a),d(()=>{c!==(c=e(_).slug)&&(a.value=(a.__value=e(_).slug)??""),T(P,e(_).productName)}),m(u,a)}),s(J),s(F);var X=l(F,2),U=l(r(X),2);d(()=>{e(z),q(()=>{k()})});var E=r(U);E.value=E.__value="";var Ae=l(E);A(Ae,1,()=>k().risers,B,(u,_)=>{var a=ml(),c={},P=r(a,!0);s(a),d(()=>{c!==(c=e(_).slug)&&(a.value=(a.__value=e(_).slug)??""),T(P,e(_).productName)}),m(u,a)}),s(U),s(X),j(v,()=>e(V),u=>g(V,u)),j(h,()=>e(W),u=>g(W,u)),j(J,()=>e(D),u=>g(D,u)),j(U,()=>e(z),u=>g(z,u)),m(o,i)};Be(Re,o=>{e(p)==="skateboard"&&o($e)})}var Ce=l(Re,2);{var el=o=>{var i=Nl(),t=$(i),v=l(r(t),2);d(()=>{e(Y),q(()=>{y()})});var n=r(v);n.value=n.__value="";var S=l(n);A(S,1,()=>y().boots,B,(u,_)=>{var a=kl(),c={},P=r(a,!0);s(a),d(()=>{c!==(c=e(_).slug)&&(a.value=(a.__value=e(_).slug)??""),T(P,e(_).productName)}),m(u,a)}),s(v),s(t);var b=l(t,2),h=l(r(b),2);d(()=>{e(H),q(()=>{y()})});var O=r(h);O.value=O.__value="";var Pe=l(O);A(Pe,1,()=>y().toestops,B,(u,_)=>{var a=yl(),c={},P=r(a,!0);s(a),d(()=>{c!==(c=e(_).slug)&&(a.value=(a.__value=e(_).slug)??""),T(P,e(_).productName)}),m(u,a)}),s(h),s(b);var F=l(b,2),J=l(r(F),2);d(()=>{e(K),q(()=>{y()})});var M=r(J);M.value=M.__value="";var qe=l(M);A(qe,1,()=>y().slideblocks,B,(u,_)=>{var a=Sl(),c={},P=r(a,!0);s(a),d(()=>{c!==(c=e(_).slug)&&(a.value=(a.__value=e(_).slug)??""),T(P,e(_).productName)}),m(u,a)}),s(J),s(F);var X=l(F,2),U=l(r(X),2);d(()=>{e(Q),q(()=>{y()})});var E=r(U);E.value=E.__value="";var Ae=l(E);A(Ae,1,()=>y().plates,B,(u,_)=>{var a=xl(),c={},P=r(a,!0);s(a),d(()=>{c!==(c=e(_).slug)&&(a.value=(a.__value=e(_).slug)??""),T(P,e(_).productName)}),m(u,a)}),s(U),s(X),j(v,()=>e(Y),u=>g(Y,u)),j(h,()=>e(H),u=>g(H,u)),j(J,()=>e(K),u=>g(K,u)),j(U,()=>e(Q),u=>g(Q,u)),m(o,i)};Be(Ce,o=>{e(p)==="rollerskate"&&o(el)})}var ce=l(Ce,2),be=l(r(ce),2);d(()=>{e(te),q(()=>{e(p),k(),y()})});var ge=r(be);ge.value=ge.__value="";var ll=l(ge);A(ll,1,()=>e(p)==="skateboard"?k().trucks:y().trucks,B,(o,i)=>{var t=Pl(),v={},n=r(t,!0);s(t),d(()=>{v!==(v=e(i).slug)&&(t.value=(t.__value=e(i).slug)??""),T(n,e(i).productName)}),m(o,t)}),s(be),s(ce);var fe=l(ce,2),he=l(r(fe),2);d(()=>{e(ae),q(()=>{e(p),k(),y()})});var me=r(he);me.value=me.__value="";var tl=l(me);A(tl,1,()=>e(p)==="skateboard"?k().bearings:y().bearings,B,(o,i)=>{var t=ql(),v={},n=r(t,!0);s(t),d(()=>{v!==(v=e(i).slug)&&(t.value=(t.__value=e(i).slug)??""),T(n,e(i).productName)}),m(o,t)}),s(he),s(fe);var we=l(fe,2),ke=l(r(we),2);d(()=>{e(se),q(()=>{e(p),k(),y()})});var ye=r(ke);ye.value=ye.__value="";var al=l(ye);A(al,1,()=>e(p)==="skateboard"?k().wheels:y().wheels,B,(o,i)=>{var t=Al(),v={},n=r(t,!0);s(t),d(()=>{v!==(v=e(i).slug)&&(t.value=(t.__value=e(i).slug)??""),T(n,e(i).productName)}),m(o,t)}),s(ke),s(we);var Se=l(we,2),xe=l(r(Se),2);d(()=>{e(oe),q(()=>{e(p),k(),y()})});var Ne=r(xe);Ne.value=Ne.__value="";var sl=l(Ne);A(sl,1,()=>e(p)==="skateboard"?k().bushings:y().bushings,B,(o,i)=>{var t=Bl(),v={},n=r(t,!0);s(t),d(()=>{v!==(v=e(i).slug)&&(t.value=(t.__value=e(i).slug)??""),T(n,e(i).productName)}),m(o,t)}),s(xe),s(Se);var De=l(Se,2),ze=l(r(De),2);A(ze,1,()=>e(x),B,(o,i,t)=>{var v=Tl(),n=r(v);ie(n);var S=l(n,2);ie(S);var b=l(S,2);s(v),d(()=>il(S,e(i).value)),Ge(n,()=>e(i).name,h=>(e(i).name=h,q(()=>e(x)))),Z("input",n,h=>{Ue(x,e(x)[t].name=h.currentTarget.value),g(x,[...e(x)])}),Z("input",S,h=>{const O=+h.currentTarget.value;Ue(x,e(x)[t].value=O),g(x,[...e(x)])}),Z("click",b,()=>{g(x,e(x).filter((h,O)=>O!==t))}),m(o,v)});var Fe=l(ze,2);s(De),ol(2),s(re),d(o=>Fe.disabled=o,[()=>!je()],Me),Ge(Oe,()=>e(L),o=>g(L,o)),j(de,()=>e(C),o=>g(C,o)),j(be,()=>e(te),o=>g(te,o)),j(he,()=>e(ae),o=>g(ae,o)),j(ke,()=>e(se),o=>g(se,o)),j(xe,()=>e(oe),o=>g(oe,o)),Z("click",Fe,Ke),Z("submit",re,He),m(G,re),Le()}var Rl=w('<h1>Create a New Build</h1> <div class="container"><!></div>',1);function Zl(G,R){Ie(R,!1);let I=N({}),k=ee(R,"data",8);const y=Ee(Te);We(()=>{Te.subscribe(C=>{g(I,C||{})})});async function f(C){const V=C.detail,{token:W}=Ee(nl),D=await fetch("https://3ee.dev/skatebuild/api/builds/save/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"https://skatebuild.pro",Authorization:"Token "+W},mode:"cors",body:JSON.stringify(V)});if(D.ok){const z=await D.json();Te.set(z),await ul(`/builds/${z.owner_username}/${z.slug}`)}else console.error("Save failed",await D.json())}Ve();var le=Rl(),L=l($(le),2),ve=r(L);Ol(ve,rl(()=>e(I),{get skateboardProducts(){return k().skateboardProducts},get rollerskateProducts(){return k().rollerskateProducts},prefill:y,submit:f})),s(L),m(G,le),Le()}export{Zl as component,Xl as universal};
