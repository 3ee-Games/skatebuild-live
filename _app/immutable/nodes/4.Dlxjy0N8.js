import{e as ze}from"../chunks/DIpzsIK_.js";import{g as qe}from"../chunks/Cko_2ExL.js";import{s as ve}from"../chunks/n4x5aNlg.js";import{t as m,a as b}from"../chunks/DI9w5OQQ.js";import"../chunks/BxUFmY4z.js";import{ak as be,ar as T,al as ke,an as r,ao as l,am as d,aH as de,c as a,at as H,au as Ge,o as S,j as U,ai as He,ap as ge,b as Re}from"../chunks/BpViCVQb.js";import{e as R,s as _}from"../chunks/CPOfcv9_.js";import{i as O}from"../chunks/WmZ9OhnZ.js";import{e as pe,i as _e}from"../chunks/DT_QGUp8.js";import{r as me,s as k,a as We}from"../chunks/BDn2O-US.js";import{s as Ae}from"../chunks/DIEvTXIm.js";import{i as he}from"../chunks/CPZJgrMF.js";import{p as B}from"../chunks/CCxe2xhz.js";import{s as Ie,a as Je}from"../chunks/B2bUYdYO.js";import{a as Ke}from"../chunks/BWRsyZQo.js";import{g as Le}from"../chunks/DgSEKFT3.js";import{c as Qe}from"../chunks/DJ-rPqZL.js";import{s as Xe,r as Ye}from"../chunks/DqAaAC6z.js";const Ze=!1,Fe=!1,es=async({params:o,fetch:u})=>{const{username:n,slug:f}=o;let p;const i=qe(ve);if(i.slug===f&&i.owner_username===n)p={name:i.name,slug:i.slug,build_type:i.build_type,skating_type:i.skating_type,deck_slug:i.deck_slug||void 0,griptape_slug:i.griptape_slug||void 0,rails_slug:i.rails_slug||void 0,risers_slug:i.risers_slug||void 0,boot_slug:i.boot_slug||void 0,plates_slug:i.plates_slug||void 0,slideblock_slug:i.slideblock_slug||void 0,toestops_slug:i.toestops_slug||void 0,trucks_slug:i.trucks_slug,bearings_slug:i.bearings_slug,wheels_slug:i.wheels_slug,bushings_slug:i.bushings_slug,owner_username:i.owner_username};else{const e=await u(`/data/builds/${n}/${f}.json`);if(e.ok)p=await e.json();else throw ze(404,`Build not found: ${n}/${f}`)}const y=ss(p,u),w=await Promise.all(Object.entries(y).filter(([,e])=>e!==null).map(async([e,v])=>{const j=await v;return j.ok?[e,await j.json()]:[e,null]})),C=Object.fromEntries(w);return{build:p,products:C}};function ss(o,u){const n=o.build_type==="skateboard"?"skateboard-products":"rollerskate-products",f={bearings:u(`/data/${n}/bearings/${o.bearings_slug}.json`),bushings:u(`/data/${n}/bushings/${o.bushings_slug}.json`),trucks:u(`/data/${n}/trucks/${o.trucks_slug}.json`),wheels:u(`/data/${n}/wheels/${o.wheels_slug}.json`)},p={decks:o.deck_slug?u(`/data/${n}/decks/${o.deck_slug}.json`):null,griptape:o.griptape_slug?u(`/data/${n}/griptape/${o.griptape_slug}.json`):null,rails:o.rails_slug?u(`/data/${n}/rails/${o.rails_slug}.json`):null,risers:o.risers_slug?u(`/data/${n}/risers/${o.risers_slug}.json`):null},i={boots:o.boot_slug?u(`/data/${n}/boots/${o.boot_slug}.json`):null,slideblocks:o.slideblock_slug?u(`/data/${n}/slideblocks/${o.slideblock_slug}.json`):null,plates:o.plates_slug?u(`/data/${n}/plates/${o.plates_slug}.json`):null,toestops:o.toestops_slug?u(`/data/${n}/toestops/${o.toestops_slug}.json`):null};return{...f,...o.build_type==="skateboard"?p:i}}const Ts=Object.freeze(Object.defineProperty({__proto__:null,load:es,prerender:Ze,ssr:Fe},Symbol.toStringTag,{value:"Module"}));var ts=m('<p class="svelte-11fic08"> </p>'),as=m('<div class="option-container svelte-11fic08"><article class="main svelte-11fic08"><h4 class="highlight large svelte-11fic08"> </h4> <!></article> <aside class="aside aside-1 svelte-11fic08"><input type="checkbox" class="svelte-11fic08"> <label class="svelte-11fic08"> </label></aside></div>');function ls(o,u){be(u,!1);let n=B(u,"id",8,""),f=B(u,"name",8,""),p=B(u,"label",8,""),i=B(u,"description",8,""),y=B(u,"checked",12,!1),w=B(u,"onChange",8,()=>{});function C(h){w()({id:h.target.id,checked:h.target.checked})}he();var e=as(),v=r(e),j=r(v),W=r(j,!0);l(j);var V=d(j,2);{var se=h=>{var x=ts(),z=r(x,!0);l(x),T(()=>_(z,i())),b(h,x)};O(V,h=>{i()&&h(se)})}l(v);var N=d(v,2),g=r(N);me(g);var D=d(g,2),M=r(D,!0);l(D),l(N),l(e),T(()=>{_(W,p()),k(g,"id",n()),k(g,"name",f()),k(D,"for",n()),_(M,p())}),Qe(g,y),R("change",g,C),b(o,e),ke()}var rs=m('<img alt="Skateboard build" class="build-icon svelte-p132j5">'),os=m('<img alt="Rollerskate build" class="build-icon svelte-p132j5">'),is=m('<div class="edit-container svelte-p132j5"><button class="edit-button svelte-p132j5">Edit Build</button></div>'),us=m('<div class="edit-container svelte-p132j5"><button class="edit-button svelte-p132j5">Modify Build</button></div>'),ns=m('<tr class="svelte-p132j5"><td class="svelte-p132j5"><input type="radio" class="svelte-p132j5"></td><td data-label="Vendor" class="svelte-p132j5"><a target="_blank" rel="noopener" class="svelte-p132j5"> </a></td><td data-label="Price" class="svelte-p132j5"> </td></tr>'),cs=m('<table class="price-table svelte-p132j5"><thead class="svelte-p132j5"><tr class="svelte-p132j5"><th class="svelte-p132j5">Select</th><th class="svelte-p132j5">Vendor</th><th class="svelte-p132j5">Price</th></tr></thead><tbody class="svelte-p132j5"></tbody></table>'),ds=m('<section class="build-section svelte-p132j5"><div class="section-inner svelte-p132j5"><img> <div class="section-info svelte-p132j5"><h2 class="svelte-p132j5"> </h2> <p><a class="svelte-p132j5"><strong> </strong></a> </p> <!></div></div></section>'),gs=m(`<section class="build-section svelte-p132j5"><h2 class="svelte-p132j5">Grand Total</h2> <p class="grand-total svelte-p132j5"> </p> <p class="disclaimer svelte-p132j5">Prices are an estimate. Check to make sure all parts are compatible and the correct size
				before purchasing.</p></section>`),ps=m('<div class="container svelte-p132j5"><h1 class="svelte-p132j5"><!> </h1> <p>Created by <a class="svelte-p132j5"> </a></p> <!> <p>This build is designed for <strong><span class="highlight"> </span></strong>.</p> <!> <!> <!></div>');function Vs(o,u){be(u,!1);const[n,f]=Ie(),p=()=>Je(Ke,"$accountData",n),i=S(),y=S(),w=S(),C=S();let e=B(u,"data",8),v=S(!1);function j({id:s,checked:t}){U(v,t)}function W(s){const t=Object.keys(s).find(c=>c!=="url"&&c!=="productVendorUrl");return{vendor:t,price:s[t],url:s.url,productVendorUrl:s.productVendorUrl}}function V(s){const t=s.split("-").pop().trim(),c=parseFloat(t.replace(/[^0-9.]/g,""));return isNaN(c)?0:Math.round(c*100)}const N=[{key:"decks",label:"Deck",slug:e().build.deck_slug},{key:"griptape",label:"griptape",slug:e().build.griptape_slug},{key:"boots",label:"Boots",slug:e().build.boot_slug},{key:"plates",label:"Plates",slug:e().build.plates_slug},{key:"trucks",label:"Trucks",slug:e().build.trucks_slug},{key:"slideblocks",label:"SlideBlocks",slug:e().build.slideblock_slug},{key:"wheels",label:"Wheels",slug:e().build.wheels_slug},{key:"bearings",label:"Bearings",slug:e().build.bearings_slug},{key:"toestops",label:"Toestops",slug:e().build.toestops_slug},{key:"rails",label:"rails",slug:e().build.rails_slug},{key:"risers",label:"risers",slug:e().build.risers_slug},{key:"bushings",label:"Bushings",slug:e().build.bushings_slug}].map(s=>{const t=e().products[s.key];if(!t||!s.slug)return null;const c=t.productPrices.map(W);return{key:s.key,label:s.label,slug:s.slug,productName:t.productName,productBrand:t.productBrand,cloudinaryUrl:t.cloudinaryUrl,vendorPrices:c}}).filter(Boolean),g=S({});N.forEach(s=>{s.vendorPrices.length&&de(g,a(g)[s.key]=V(s.vendorPrices[0].price))});function D(s,t){de(g,a(g)[s]=t)}function M(){ve.set({slug:e().build.slug,name:e().build.name,skater_type:[],build_type:e().build.build_type,skating_type:e().build.skating_type,stance:e().build.stance??"",deck_slug:e().build.deck_slug??"",griptape_slug:e().build.griptape_slug??"",risers_slug:e().build.risers_slug??"",boot_slug:e().build.boot_slug??"",toestops_slug:e().build.toestops_slug??"",slideblock_slug:e().build.slideblock_slug??"",rails_slug:e().build.rails_slug??"",plates_slug:e().build.plates_slug??"",trucks_slug:e().build.trucks_slug,bearings_slug:e().build.bearings_slug,wheels_slug:e().build.wheels_slug,bushings_slug:e().build.bushings_slug}),Le("/builds/new")}H(()=>p(),()=>{var s;U(i,(s=p())==null?void 0:s.username)}),H(()=>He(e()),()=>{U(y,e().build.owner_username)}),H(()=>a(g),()=>{U(w,Object.values(a(g)).reduce((s,t)=>s+t,0))}),H(()=>a(w),()=>{U(C,`$${(a(w)/100).toFixed(2)}`)}),Ge(),he();var h=ps(),x=r(h),z=r(x);{var fe=s=>{var t=rs();k(t,"src",Xe),b(s,t)},ye=(s,t)=>{{var c=$=>{var P=os();k(P,"src",Ye),b($,P)};O(s,$=>{e().build.build_type==="rollerskate"&&$(c)},t)}};O(z,s=>{e().build.build_type==="skateboard"?s(fe):s(ye,!1)})}var je=d(z);l(x);var A=d(x,2),I=d(r(A)),$e=r(I,!0);l(I),l(A);var te=d(A,2);{var we=s=>{var t=is(),c=r(t);l(t),R("click",c,M),b(s,t)},xe=s=>{var t=us(),c=r(t);l(t),R("click",c,M),b(s,t)};O(te,s=>{a(i)===a(y)?s(we):s(xe,!1)})}var J=d(te,2),ae=d(r(J)),le=r(ae),Pe=r(le,!0);l(le),l(ae),ge(),l(J);var re=d(J,2);ls(re,{id:"toggle_prices",name:"toggle_prices",label:"Show Prices",description:"Compare prices.",onChange:j,get checked(){return a(v)},set checked(s){U(v,s)},$$legacy:!0});var oe=d(re,2);pe(oe,1,()=>N,_e,(s,t)=>{var c=ds(),$=r(c),P=r($),ie=d(P,2),K=r(ie),Se=r(K,!0);l(K);var L=d(K,2),q=r(L),ue=r(q),Ue=r(ue,!0);l(ue),l(q);var Oe=d(q);l(L);var Te=d(L,2);{var Ve=Q=>{var X=cs(),ne=d(r(X));pe(ne,5,()=>a(t).vendorPrices,_e,(Ne,E)=>{var Y=ns(),Z=r(Y),G=r(Z);me(G),l(Z);var F=d(Z),ee=r(F),De=r(ee,!0);l(ee),l(F);var ce=d(F),Ee=r(ce,!0);l(ce),l(Y),T(Me=>{k(G,"name","selected_"+a(t).key),We(G,Me),k(ee,"href",a(E).productVendorUrl),_(De,a(E).vendor),_(Ee,a(E).price)},[()=>a(g)[a(t).key]===V(a(E).price)],Re),R("change",G,()=>D(a(t).key,V(a(E).price))),b(Ne,Y)}),l(ne),l(X),b(Q,X)};O(Te,Q=>{a(v)&&Q(Ve)})}l(ie),l($),l(c),T(()=>{k(P,"src",a(t).cloudinaryUrl),k(P,"alt",a(t).productName),Ae(P,1,`section-image ${a(t).key??""}`,"svelte-p132j5"),_(Se,a(t).label),k(q,"href",`/product/${a(t).key}/${a(t).slug}`),_(Ue,a(t).productName),_(Oe,`  by ${a(t).productBrand??""}`)}),b(s,c)});var Be=d(oe,2);{var Ce=s=>{var t=gs(),c=d(r(t),2),$=r(c,!0);l(c),ge(2),l(t),T(()=>_($,a(C))),b(s,t)};O(Be,s=>{a(v)&&s(Ce)})}l(h),T(()=>{_(je,` ${e().build.name??""}`),k(I,"href",`/profiles/${a(y)}`),_($e,a(y)),_(Pe,e().build.skating_type)}),b(o,h),ke(),f()}export{Vs as component,Ts as universal};
