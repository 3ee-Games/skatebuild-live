import{a as te}from"../chunks/DjSiL-jg.js";import{g as Z}from"../chunks/IxWn49b3.js";import{t as E,a as g,c as fe,d as de}from"../chunks/DRiVrBMz.js";import{ak as re,am as l,an as n,ao as s,g as t,aQ as H,ar as K,al as ie,aN as se,v as a,aq as $,ap as ee,o as he}from"../chunks/DGYefiCd.js";import{d as le,s as J,e as me}from"../chunks/ByZ5mbbd.js";import{i as Y}from"../chunks/CWD507PG.js";import{s as X,r as we}from"../chunks/BVgT1Vhj.js";import{s as ne}from"../chunks/BYCnfF3S.js";import{s as ge}from"../chunks/D-mBL8zO.js";import{p as W}from"../chunks/OZP53ftb.js";import{e as ke,i as Pe}from"../chunks/k-lROdaV.js";import{b as Se}from"../chunks/DEDQ5tvs.js";import{o as ze}from"../chunks/ezTx0NwI.js";import"../chunks/BLulYnNU.js";const Ce=async({fetch:C})=>{let e=null,r;const{token:P}=Z(te)||{};if(!P)return{subscription:e,paymentResponse:{success:!1}};const h=await(await C("https://3ee.dev/account/get-stripe-user-subscription/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Token "+P},mode:"cors"})).json();return e=h&&Object.keys(h).length>0?h:null,r=await(await C("https://3ee.dev/account/payments/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Token "+P},mode:"cors"})).json(),{subscription:e,paymentResponse:r}},kt=Object.freeze(Object.defineProperty({__proto__:null,load:Ce},Symbol.toStringTag,{value:"Module"})),xe="data:image/svg+xml,%3csvg%20style='height:%20512px;%20width:%20512px;'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M0%200h512v512H0z'%20fill='%23d6e010'%20fill-opacity='0'%3e%3c/path%3e%3cg%20class=''%20style=''%20transform='translate(0,0)'%3e%3cpath%20d='M256%2016C123.45%2016%2016%20123.45%2016%20256s107.45%20240%20240%20240%20240-107.45%20240-240S388.55%2016%20256%2016zm0%2060c99.41%200%20180%2080.59%20180%20180s-80.59%20180-180%20180S76%20355.41%2076%20256%20156.59%2076%20256%2076zm-80.625%2060c-.97-.005-2.006.112-3.063.313v-.032c-18.297%203.436-45.264%2034.743-33.375%2046.626l73.157%2073.125-73.156%2073.126c-14.63%2014.625%2029.275%2058.534%2043.906%2043.906L256%20299.906l73.156%2073.156c14.63%2014.628%2058.537-29.28%2043.906-43.906l-73.156-73.125%2073.156-73.124c14.63-14.625-29.275-58.5-43.906-43.875L256%20212.157l-73.156-73.125c-2.06-2.046-4.56-3.015-7.47-3.03z'%20fill='%23ffffff'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e",pe="data:image/svg+xml,%3csvg%20style='height:%20512px;%20width:%20512px;'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M0%200h512v512H0z'%20fill='%23d6e010'%20fill-opacity='0'%3e%3c/path%3e%3cg%20class=''%20style=''%20transform='translate(0,0)'%3e%3cpath%20d='M247%2025.076%20107.053%20130.004l64.996%2032.486L247%20106.297v-81.22zm18%200v81.22l74.95%2056.194%2065-32.488L265%2025.076zm9.277%2022.307%2036.63%2026.437c-25.125-4.207-29.74%209.2-37.348%2028.8l.717-55.237zm-37.79%203.926-.274%2033.362c-22.052%201.182-56.787%2014.423-107.893%2043.99L236.488%2051.31zM256%20122.044l-74%2055.48v156.948l74%2055.482%2074-55.482V177.527l-74-55.482zm4.215%2017.67c-37.503%2033.84-60.642%20164.833-63.65%20199.094l-.35-151.095%2064-48zM99%20146.1v219.8l65-32.488V178.588L99%20146.1zm314%200-65%2032.488v154.824l65%2032.488V146.1zm-301.352%2023.31%2040.473%2020.83c-46.28%2038.757-30.79%20122.693-41.876%20162.572l1.404-183.402zm60.4%20180.1-64.995%2032.486L247%20486.924v-81.22l-74.95-56.194zm167.903%200L265%20405.703v81.22l139.947-104.927-64.996-32.486zm-169.415%2017.172c-19.594%2016.282-16.745%2024.365%204.477%2054.412l-44.246-38.018%2039.77-16.394z'%20fill='%23ffffff'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e";var je=(C,e,r)=>e(r),Ae=(C,e,r)=>e(r),Te=E('<p class="error svelte-j6itnc"> </p>'),Me=E(`<div class="marketing-plans svelte-j6itnc"><h2>Support SkateBuild</h2> <p>SkateBuild is just getting started—and we need your help to keep the servers running and improve
		features. Early supporters will be immortalized with a limited “Early Supporter” badge on their
		profile. Your contribution helps cover hosting costs and shows you're part of our founding
		community.</p> <h3>Choose Your Support Level</h3> <div class="build-grid svelte-j6itnc"><div class="card svelte-j6itnc"><div class="card-content svelte-j6itnc"><h3 class="svelte-j6itnc">Monthly</h3> <p class="priceText">$2.00 per month</p> <button class="svelte-j6itnc"><span> </span></button></div></div> <div class="card svelte-j6itnc"><div class="card-content svelte-j6itnc"><h3 class="svelte-j6itnc">Yearly</h3> <p class="priceText">$12.00 per year</p> <button class="svelte-j6itnc"><span> </span></button></div></div></div> <!></div>`);function be(C,e){re(e,!0);let r=W(e,"payments",19,()=>[]),P=W(e,"onRequirePayment",3,()=>{}),I=W(e,"onSubscribed",3,()=>{});const h="price_1RW5SMERvP25GWwRdcl3huBf",v="price_1RW5UxERvP25GWwRvIfpesTp";let m=se(()=>r().length>0?r()[0].id:null),_=H(!1),S=H("");async function w(z){if(!t(m)){P()();return}a(_,!0),a(S,"");const{token:T}=Z(te)||{};if(!T){a(S,"Not authenticated."),a(_,!1);return}const y=r().find(F=>F.id===t(m));if(!y||!y.customer){P()(),a(_,!1);return}const N=y.customer;try{const R=await(await fetch("https://3ee.dev/account/subscribe/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${T}`},mode:"cors",body:JSON.stringify({customer_id:N,payment_method_id:t(m),price_id:z,modifySubscription:!1})})).json();if(R.success){I()();const D=Z(ne),O=await fetch("https://3ee.dev/skatebuild/api/profiles/save/",{method:"POST",headers:{Accept:"application/json","Access-Control-Allow-Origin":"https://skatebuild.pro","Content-Type":"application/json",Authorization:`Token ${T}`},mode:"cors",body:JSON.stringify(D)}),G=await O.json();O.ok?ne.set(G):console.error("Profile save failed:",G.detail||"Unknown error")}else a(S,R.message||"Subscription failed.",!0)}catch(F){console.error("Error subscribing:",F),a(S,"Unable to subscribe at this time.")}a(_,!1)}var L=Me(),q=l(n(L),6),M=n(q),V=n(M),b=l(n(V),4);b.__click=[je,w,h];var B=n(b),u=n(B,!0);s(B),s(b),s(V),s(M);var f=l(M,2),j=n(f),x=l(n(j),4);x.__click=[Ae,w,v];var A=n(x),i=n(A,!0);s(A),s(x),s(j),s(f),s(q);var c=l(q,2);{var p=z=>{var T=Te(),y=n(T,!0);s(T),K(()=>J(y,t(S))),g(z,T)};Y(c,z=>{t(S)&&z(p)})}s(L),K(()=>{ge(M,`opacity: ${t(_)?.5:1}`),b.disabled=t(_),J(u,t(_)?"Processing…":"Subscribe"),ge(f,`opacity: ${t(_)?.5:1}`),x.disabled=t(_),J(i,t(_)?"Processing…":"Subscribe")}),g(C,L),ie()}le(["click"]);const ye="data:image/svg+xml,%3csvg%20style='height:%20512px;%20width:%20512px;'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M0%200h512v512H0z'%20fill='%23d6e010'%20fill-opacity='0'%3e%3c/path%3e%3cg%20class=''%20style=''%20transform='translate(0,0)'%3e%3cpath%20d='M235.344%2031.188c-35.92.543-70.472%206.628-102.97%2018l5.72%2017.468c30.61-10.843%2063.185-16.653%2097.187-17.156l.064-18.313zm18.687.187-.06%2018.375c46.9%201.963%2096.236%2013.842%20146.56%2036.47l9.376-16.25C356.84%2045.9%20304.253%2033.282%20254.03%2031.374zm-139.093%2024.5c-20.133%208.42-39.376%2018.953-57.562%2031.5l8.813%2016.53c17.207-12.117%2035.41-22.284%2054.468-30.436l-5.72-17.595zm312.97%2020.25-61.5%20106.53%2055.124%2031.814%2061.5-106.532-55.124-31.813zm-174.063%206.313-.03%2018.406c39.736%201.29%2080.36%2011.3%20120.342%2031.062l9.375-16.22c-42.846-21.33-86.708-32.012-129.686-33.25zm-18.688.062c-29.644%201.034-58.722%206.555-86.625%2016.156l5.72%2017.53c26.066-9.063%2053.198-14.28%2080.875-15.28l.03-18.406zM42.126%2098.53a335.26%20335.26%200%200%200-23.876%2020.5l9.97%2016.345a322.214%20322.214%200%200%201%2022.874-20.125l-8.938-16.72h-.03zm88.905%206.72c-17.292%207.142-34.04%2015.886-50.124%2026.125l8.813%2016.5c15.13-9.78%2030.847-18.16%2047.06-25l-5.75-17.625zm122.626%2035.28-.062%2018.44c30.17%201.18%2061.405%207.815%2093.156%2020.405l9.438-16.344c-34.7-14.046-69.15-21.353-102.532-22.5zm-18.687.032c-23.744.82-46.85%204.73-69%2011.563l5.718%2017.5c20.297-6.28%2041.433-9.915%2063.218-10.688l.063-18.375zm-169.626%201.375a349.067%20349.067%200%200%200-22.406%2017.5l9.874%2016.157a337.1%20337.1%200%200%201%2021.407-17.063l-8.876-16.593zm82.97%2016.344c-14.515%205.62-28.545%2012.503-42.033%2020.595l8.782%2016.406c12.534-7.633%2025.55-14.124%2039-19.436l-5.75-17.563zM90.53%20189.03a295.09%20295.09%200%200%200-20.155%2015.314l9.844%2016.125a282.991%20282.991%200%200%201%2019.155-14.876L90.53%20189.03zm279.19%2017.126L292.28%20340.25a135.268%20135.268%200%200%201%2031.94%2013.563l75.31-130.47-29.81-17.187zm-114.033%20147.78c-60.607.002-110.206%2045.816-116.406%20104.752h82.126a35.826%2035.826%200%200%201-3.437-15.344c0-19.872%2016.315-36.156%2036.186-36.156%2019.872%200%2036.188%2016.284%2036.188%2036.156%200%205.475-1.23%2010.674-3.438%2015.344h85.188c-6.2-58.936-55.8-104.75-116.406-104.75zm-1.53%2071.94c-9.773%200-17.5%207.696-17.5%2017.468%200%206.678%203.626%2012.39%209.03%2015.344h16.938c5.404-2.955%209.03-8.666%209.03-15.344%200-9.772-7.727-17.47-17.5-17.47zm-153.47%2051.5v15.687h303.344v-15.688H100.69z'%20fill='%23ffffff'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e",_e="data:image/svg+xml,%3csvg%20style='height:%20512px;%20width:%20512px;'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M0%200h512v512H0z'%20fill='%23d6e010'%20fill-opacity='0'%3e%3c/path%3e%3cg%20class=''%20style=''%20transform='translate(0,0)'%3e%3cpath%20d='M256%2027.845c-21.563%200-48.67%201.224-69.041%209.357C166.589%2045.336%20153%2058.047%20153%2086.845v51.847a125.34%20125.34%200%200%201%2019.988-1.732c3.353-.02%206.693.103%2010.012.355v-38.47c0-16%2011.186-28.155%2024.975-35.05%2013.788-6.893%2030.9-9.95%2048.025-9.95s34.237%203.057%2048.025%209.95C317.815%2070.69%20329%2082.846%20329%2098.846v38.478a124.58%20124.58%200%200%201%2030%201.377V86.845c0-28.798-13.589-41.51-33.959-49.643-20.37-8.133-47.478-9.357-69.041-9.357zm-83.12%20127.093a107.73%20107.73%200%200%200-22.886%202.682C109.396%20166.847%2073%20198.594%2073%20258.845c0%2043%2037.72%2089.974%2081.213%20131.49%2021.747%2020.758%2044.64%2040.173%2064.25%2057.52%2015.099%2013.356%2028.124%2025.257%2037.537%2036.3%209.413-11.043%2022.438-22.944%2037.537-36.3%2019.61-17.347%2042.503-36.762%2064.25-57.52C401.28%20348.819%20439%20301.845%20439%20258.845c0-60.25-36.396-91.998-76.994-101.225-40.598-9.227-83.648%205.56-97.65%2040.567L256%20219.075l-8.355-20.888c-11.377-28.443-41.931-43.537-74.764-43.249zM256%20234.845a44.488%2044.488%200%200%201%2044.488%2044.488A44.488%2044.488%200%200%201%20284%20313.876l16.488%2098.922h-88.976l16.49-98.936a44.488%2044.488%200%200%201-16.49-34.529A44.488%2044.488%200%200%201%20256%20234.845z'%20fill='%23ffffff'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e";var Re=E('<button class="svelte-nlvgrs"><img alt="Switch" class="svelte-nlvgrs"> <span class="svelte-nlvgrs"> </span></button> <button disabled class="svelte-nlvgrs"><img alt="Current" class="svelte-nlvgrs"> <span class="svelte-nlvgrs">Monthly (current)</span></button>',1),Ee=E('<button disabled class="svelte-nlvgrs"><img alt="Current" class="svelte-nlvgrs"> <span class="svelte-nlvgrs">Yearly (current)</span></button> <button class="svelte-nlvgrs"><img alt="Switch" class="svelte-nlvgrs"> <span class="svelte-nlvgrs"> </span></button>',1),Oe=E('<p class="error svelte-nlvgrs"> </p>'),Ie=E('<div class="current-subscription svelte-nlvgrs"><h2 class="greenHighlight svelte-nlvgrs">Your Subscription</h2> <p class="svelte-nlvgrs"><strong>Plan:</strong> <span class="priceHighlight svelte-nlvgrs"> </span></p> <p class="svelte-nlvgrs"><strong>Start:</strong> <!> - <strong>Ends:</strong> <!></p> <p class="svelte-nlvgrs"><strong>Status:</strong> </p> <div class="switch-options svelte-nlvgrs"><!></div> <!></div>');function Le(C,e){re(e,!0);let r=W(e,"onSubscriptionChange",3,()=>{});const P="price_1RW5SMERvP25GWwRdcl3huBf",I="price_1RW5UxERvP25GWwRvIfpesTp",h={[P]:{amount:2,interval:"month"},[I]:{amount:12,interval:"year"}};let v=H(!1),m=H(""),_=se(()=>{var b;return((b=e.subscription)==null?void 0:b.price_id)===P?"monthly":"yearly"}),S=se(()=>{var b;return(b=e.subscription)!=null&&b.price_id&&h[e.subscription.price_id]?`$${h[e.subscription.price_id].amount.toFixed(2)} / ${h[e.subscription.price_id].interval}`:""});async function w(b){if(!e.subscription||b===t(_))return;a(v,!0),a(m,"");const{token:B}=Z(te)||{};if(!B){a(m,"Not authenticated."),a(v,!1);return}let u;try{const i=await(await fetch("https://3ee.dev/account/payments/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${B}`},mode:"cors"})).json();if(!i.success||!Array.isArray(i.payments)||!i.payments.length){a(m,"No payment methods available to switch plan."),a(v,!1);return}u=i.payments[0]}catch(A){console.error("Error fetching payments:",A),a(m,"Unable to retrieve payment methods."),a(v,!1);return}const f=u.customer,j=u.id,x=b==="monthly"?P:I;try{const i=await(await fetch("https://3ee.dev/account/subscribe/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${B}`},mode:"cors",body:JSON.stringify({customer_id:f,payment_method_id:j,price_id:x,modifySubscription:!0})})).json();if(i.success){r()();const c=Z(ne),p=await fetch("https://3ee.dev/skatebuild/api/profiles/save/",{method:"POST",headers:{Accept:"application/json","Access-Control-Allow-Origin":"https://skatebuild.pro","Content-Type":"application/json",Authorization:`Token ${B}`},mode:"cors",body:JSON.stringify(c)}),z=await p.json();p.ok?ne.set(z):console.error("Profile save failed:",z.detail||"Unknown error")}else a(m,i.message||"Unable to switch plan.",!0)}catch(A){console.error("Error modifying subscription:",A),a(m,"Failed to switch plan.")}a(v,!1)}var L=fe(),q=$(L);{var M=b=>{var B=Ie(),u=l(n(B),2),f=l(n(u),2),j=n(f,!0);s(f),s(u);var x=l(u,2),A=l(n(x),2);{var i=o=>{var d=de();K(k=>J(d,k),[()=>new Date(e.subscription.current_period_start).toLocaleDateString()]),g(o,d)},c=o=>{var d=de("N/A");g(o,d)};Y(A,o=>{e.subscription.current_period_start?o(i):o(c,!1)})}var p=l(A,4);{var z=o=>{var d=de();K(k=>J(d,k),[()=>new Date(e.subscription.current_period_end).toLocaleDateString()]),g(o,d)},T=o=>{var d=de("N/A");g(o,d)};Y(p,o=>{e.subscription.current_period_end?o(z):o(T,!1)})}s(x);var y=l(x,2),N=l(n(y));s(y);var F=l(y,2),R=n(F);{var D=o=>{var d=Re(),k=$(d),U=n(k);X(U,"src",ye);var ae=l(U,2),ce=n(ae,!0);s(ae),s(k);var oe=l(k,2),ve=n(oe);X(ve,"src",_e),ee(2),s(oe),K(ue=>{k.disabled=t(v),J(ce,ue)},[()=>t(v)?"Processing…":`Switch $${h[I].amount.toFixed(2)}/year`]),me("click",k,()=>w("yearly")),g(o,d)},O=o=>{var d=Ee(),k=$(d),U=n(k);X(U,"src",_e),ee(2),s(k);var ae=l(k,2),ce=n(ae);X(ce,"src",ye);var oe=l(ce,2),ve=n(oe,!0);s(oe),s(ae),K(ue=>{ae.disabled=t(v),J(ve,ue)},[()=>t(v)?"Processing…":`Switch $${h[P].amount.toFixed(2)}/month`]),me("click",ae,()=>w("monthly")),g(o,d)};Y(R,o=>{t(_)==="monthly"?o(D):o(O,!1)})}s(F);var G=l(F,2);{var Q=o=>{var d=Oe(),k=n(d,!0);s(d),K(()=>J(k,t(m))),g(o,d)};Y(G,o=>{t(m)&&o(Q)})}s(B),K(()=>{J(j,t(S)),J(N,` ${e.subscription.status??""}`)}),g(b,B)},V=b=>{};Y(q,b=>{e.subscription?b(M):b(V,!1)})}g(C,L),ie()}function Be(C,e){e()()}var Ne=E('<p style="color: #e53e3e; margin-top: 0.5rem;"> </p>'),De=E('<button type="button" class="cancel-button svelte-wz1uxj"><span>Cancel</span></button>'),Ye=E('<form class="svelte-wz1uxj"><label for="zip" class="svelte-wz1uxj">Postal Code</label> <input id="zip" type="text" placeholder="ZIP or postal code" required class="svelte-wz1uxj"> <label for="card-element" class="svelte-wz1uxj">Card Details</label> <div id="card-element" style="padding: 0.75rem; border: 1px solid #cbd5e0; border-radius: 0.375rem;"></div> <!> <div style="margin-top: 1rem; display: flex; gap: 0.5rem;"><button type="submit" class="svelte-wz1uxj"><span> </span></button> <!></div></form>');function Ue(C,e){re(e,!0);let r=W(e,"editing",3,!1);W(e,"customerId",3,null);let P=W(e,"onPaymentAdded",3,c=>{}),I=W(e,"onPaymentAddCancel",3,()=>{});const h="pk_test_51MCQ24ERvP25GWwRjbby9IQv3z4FEh2qpjjK1DTjZNApqTvf5bQNE98VJnT2SjkpLEgJMEroKnSWdpdeCESQFbgZ00qkgzBBCh";let v=null,m=null,_=null,S=H(""),w=H(""),L=H(!1);ze(()=>{if(!window.Stripe){a(w,"Stripe.js failed to load.");return}v=Stripe(h),m=v.elements();const c={base:{iconColor:"rgb(56, 153, 237)",color:"#fff",fontWeight:"500",fontFamily:"Roboto, Open Sans, Segoe UI, sans-serif",fontSize:"18px",fontSmoothing:"antialiased",":-webkit-autofill":{color:"#fce883"},"::placeholder":{color:"rgb(255, 122, 32)"}},invalid:{iconColor:"#fff",color:"rgb(250, 44, 202)"}};_=m.create("card",{style:c,hidePostalCode:!0}),_.mount("#card-element"),_.on("change",p=>{p.error?a(w,p.error.message||"",!0):a(w,"")})});async function q(c){if(c.preventDefault(),!v||!m||!_){a(w,"Stripe.js has not been initialized.");return}a(L,!0),a(w,"");const{error:p,paymentMethod:z}=await v.createPaymentMethod({type:"card",card:_,billing_details:{address:{postal_code:t(S)||void 0}}});if(p){a(w,p.message||"PaymentMethod creation failed.",!0),a(L,!1);return}if(!z||!z.id){a(w,"Unable to retrieve PaymentMethod ID."),a(L,!1);return}P()({payment_method_id:z.id,editing:r()})}var M=Ye(),V=l(n(M),2);we(V);var b=l(V,6);{var B=c=>{var p=Ne(),z=n(p,!0);s(p),K(()=>J(z,t(w))),g(c,p)};Y(b,c=>{t(w)&&c(B)})}var u=l(b,2),f=n(u),j=n(f),x=n(j,!0);s(j),s(f);var A=l(f,2);{var i=c=>{var p=De();p.__click=[Be,I],g(c,p)};Y(A,c=>{r()&&c(i)})}s(u),s(M),K(()=>{f.disabled=t(L),J(x,t(L)?"Processing…":r()?"Update Card":"Add Card")}),me("submit",M,q),Se(V,()=>t(S),c=>a(S,c)),g(C,M),ie()}le(["click"]);const He="data:image/svg+xml,%3csvg%20style='height:%20512px;%20width:%20512px;'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M0%200h512v512H0z'%20fill='%23d6e010'%20fill-opacity='0'%3e%3c/path%3e%3cg%20class=''%20style=''%20transform='translate(0,0)'%3e%3cpath%20d='m208.242%2024.629-52.058%2095.205%2095.207%2052.059%2017.271-31.586-42.424-23.198A143.26%20143.26%200%200%201%20256%20114c78.638%200%20142%2063.362%20142%20142s-63.362%20142-142%20142-142-63.362-142-142c0-16.46%202.785-32.247%207.896-46.928l-32.32-16.16C82.106%20212.535%2078%20233.798%2078%20256c0%2098.093%2079.907%20178%20178%20178s178-79.907%20178-178S354.093%2078%20256%2078c-13.103%200-25.875%201.44-38.18%204.148l22.008-40.25-31.586-17.27zm104.27%20130.379L247%20253.275V368h18V258.725l62.488-93.733-14.976-9.984z'%20fill='%23ffffff'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e",Fe="data:image/svg+xml,%3csvg%20style='height:%20512px;%20width:%20512px;'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M0%200h512v512H0z'%20fill='%23d6e010'%20fill-opacity='0'%3e%3c/path%3e%3cg%20class=''%20style=''%20transform='translate(0,0)'%3e%3cpath%20d='m256%2029.816-231%20154v106.368l231-154%20231%20154V183.816zm0%20128.043L105%20259.783v90.283l151-101.925%20151%20101.925v-90.283zm0%20112-87%2058.725v67.6l87-58%2087%2058v-67.6zm0%2089.957-87%2058v64.368l87-58%2087%2058v-64.368z'%20fill='%23ffffff'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e";function We(C,e,r,P){a(e,!1),a(r,null),a(P,!0)}var qe=(C,e,r)=>e(t(r)),Ge=(C,e,r)=>e(t(r).id),Je=E('<li class="svelte-ucowlg"><p class="cardTitle svelte-ucowlg"><strong> </strong></p> <button class="svelte-ucowlg"><span class="svelte-ucowlg">Edit</span></button> <button class="cancelBtn svelte-ucowlg"><span class="svelte-ucowlg">Delete</span></button></li>'),Ve=E('<ul class="svelte-ucowlg"></ul>'),Qe=E("<p>No cards on file.</p>"),Ke=E('<div class="payment-list svelte-ucowlg"><h2>Your Cards</h2> <!> <div class="button-actions svelte-ucowlg"><button class="svelte-ucowlg"><img alt="Go back to main menu icon" class="svelte-ucowlg"> <span>Add New Card</span></button> <button class="cancelBtn svelte-ucowlg"><img alt="Go back to main menu icon" class="svelte-ucowlg"> <span>Back</span></button></div></div>');function Ze(C,e){re(e,!0),W(e,"editing",3,!1);let r=W(e,"payments",19,()=>[]),P=W(e,"onPaymentAdded",3,()=>{}),I=W(e,"onPaymentAddCancel",3,()=>{}),h=H(!1),v=H(!1),m=H(null);async function _(u){const{token:f}=Z(te)||{};if(f)try{const x=await(await fetch("https://3ee.dev/account/payment-delete/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${f}`},mode:"cors",body:JSON.stringify({payment_method_id:u})})).json();x.success?P()():alert(`Error deleting card: ${x.message}`)}catch(j){console.error("Network or server error when deleting payment:",j),alert("Unable to delete card at this time.")}}function S(u){a(v,!0),a(m,u,!0),a(h,!0)}function w(u){const{payment_method_id:f,editing:j}=u;L(f,j)}async function L(u,f){const{token:j}=Z(te)||{};if(!j)return;let x,A;f&&t(m)?(x="https://3ee.dev/account/payment-update/",A={customer_id:t(m).customer,old_payment_method_id:t(m).id,new_payment_method_id:u}):(x="https://3ee.dev/account/create-customer/",A={payment_method_id:u});try{const c=await(await fetch(x,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${j}`},mode:"cors",body:JSON.stringify(A)})).json();c.success?(a(h,!1),P()()):alert(`Error: ${c.message}`)}catch(i){console.error("Network or server error when submitting payment:",i),alert("Unable to save payment at this time.")}}function q(){a(h,!1),I()()}var M=fe(),V=$(M);{var b=u=>{var f=Ke(),j=l(n(f),2);{var x=y=>{var N=Ve();ke(N,21,r,Pe,(F,R)=>{var D=Je(),O=n(D),G=n(O),Q=n(G);s(G),s(O);var o=l(O,2);o.__click=[qe,S,R];var d=l(o,2);d.__click=[Ge,_,R],s(D),K(()=>J(Q,`${t(R).card.last4??""} (Exp ${t(R).card.exp_month??""}/${t(R).card.exp_year??""})`)),g(F,D)}),s(N),g(y,N)},A=y=>{var N=Qe();g(y,N)};Y(j,y=>{Array.isArray(r())&&r().length>0?y(x):y(A,!1)})}var i=l(j,2),c=n(i);c.__click=[We,v,m,h];var p=n(c);X(p,"src",Fe),ee(2),s(c);var z=l(c,2);z.__click=function(...y){var N;(N=I())==null||N.apply(this,y)};var T=n(z);X(T,"src",He),ee(2),s(z),s(i),s(f),g(u,f)},B=u=>{const f=se(()=>t(v)?t(m).customer:null);Ue(u,{get editing(){return t(v)},get customerId(){return t(f)},onPaymentAdded:w,onPaymentAddCancel:q})};Y(V,u=>{t(h)?u(B,!1):u(b)})}g(C,M),ie()}le(["click"]);var Xe=E('<div class="success-message svelte-epyl68"><h2 class="svelte-epyl68">Thanks for supporting SkateBuild</h2> <p class="svelte-epyl68">Your subscription is now active!</p></div>');function $e(C){var e=Xe();g(C,e)}var et=E('<div class="overlay svelte-b4mu14"><div class="dialog svelte-b4mu14"><p class="svelte-b4mu14">Are you sure you want to cancel your subscription?</p> <div class="buttons svelte-b4mu14"><button class="svelte-b4mu14"><span>No, Go Back</span></button> <button class="cancelBtn svelte-b4mu14"><span>Yes, Cancel</span></button></div></div></div>');function tt(C,e){let r=W(e,"onConfirm",3,()=>{}),P=W(e,"onCancel",3,()=>{});var I=et(),h=n(I),v=l(n(h),2),m=n(v);m.__click=function(...S){var w;(w=P())==null||w.apply(this,S)};var _=l(m,2);_.__click=function(...S){var w;(w=r())==null||w.apply(this,S)},s(v),s(h),s(I),g(C,I)}le(["click"]);function at(C,e){a(e,!0)}var st=E('<!> <!> <div class="subscription-actions svelte-1bv3k9n"><button class="svelte-1bv3k9n"><img alt="Manage payments icon" class="svelte-1bv3k9n"> <span>Payment Methods</span></button> <button class="cancelBtn svelte-1bv3k9n"><img alt="Cancel icon" class="svelte-1bv3k9n"> <span>Cancel Subscription</span></button></div> <!>',1),nt=E('<div class="subscription-actions svelte-1bv3k9n"><button class="svelte-1bv3k9n"><img alt="Manage payments icon" class="svelte-1bv3k9n"> <span>Payment Methods</span></button></div>'),ot=E(`<h2>Your subscription is canceled</h2> <p>You previously subscribed to SkateBuild but your subscription is no longer active. To
		reactivate, please pick a plan below:</p> <!> <!>`,1),rt=E('<div class="subscription-actions svelte-1bv3k9n"><button class="svelte-1bv3k9n"><img alt="Manage payments icon" class="svelte-1bv3k9n"> <span>Payment Methods</span></button></div>'),it=E("<!> <!>",1);function Pt(C,e){re(e,!0);let r=H(he(e.data.subscription)),P=H(he(e.data.paymentResponse||{success:!1})),I=H(!1),h=H(!1),v=H(!1),m=se(()=>t(r)&&t(r).status==="active"),_=se(()=>t(r)&&t(r).status==="canceled"),S=se(()=>t(P).payments??[]);async function w(){const{token:i}=Z(te)||{};if(i)try{const c=await fetch("https://3ee.dev/account/payments/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${i}`},mode:"cors"});a(P,await c.json(),!0)}catch{a(P,{success:!1},!0)}}async function L(){const{token:i}=Z(te)||{};if(i)try{const p=await(await fetch("https://3ee.dev/account/get-stripe-user-subscription/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Token ${i}`},mode:"cors"})).json();a(r,p&&Object.keys(p).length>0?p:null,!0)}catch{a(r,null)}}function q(){a(I,!0),L()}function M(){a(h,!0)}function V(){a(h,!1),w()}function b(){a(h,!1)}async function B(){if(a(v,!1),!t(m))return;const{token:i}=Z(te)||{};if(i)try{const p=await(await fetch("https://3ee.dev/account/subscribe-cancel/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${i}`},mode:"cors"})).json();if(p.success){L();const z=Z(ne),T=await fetch("https://3ee.dev/skatebuild/api/profiles/save/",{method:"POST",headers:{Accept:"application/json","Access-Control-Allow-Origin":"https://skatebuild.pro","Content-Type":"application/json",Authorization:`Token ${i}`},mode:"cors",body:JSON.stringify(z)}),y=await T.json();T.ok?ne.set(y):console.error("Profile save failed:",y.detail||"Unknown error")}else alert(p.message||"Unable to cancel subscription.")}catch{alert("Failed to cancel subscription.")}}function u(){a(v,!1)}var f=fe(),j=$(f);{var x=i=>{Ze(i,{editing:!1,get payments(){return t(S)},onPaymentAdded:V,onPaymentAddCancel:b})},A=(i,c)=>{{var p=T=>{var y=st(),N=$(y);{var F=U=>{$e(U)};Y(N,U=>{t(I)&&U(F)})}var R=l(N,2);Le(R,{get subscription(){return t(r)},onSubscriptionChange:q});var D=l(R,2),O=n(D);O.__click=M;var G=n(O);X(G,"src",pe),ee(2),s(O);var Q=l(O,2);Q.__click=[at,v];var o=n(Q);X(o,"src",xe),ee(2),s(Q),s(D);var d=l(D,2);{var k=U=>{tt(U,{onConfirm:B,onCancel:u})};Y(d,U=>{t(v)&&U(k)})}g(T,y)},z=(T,y)=>{{var N=R=>{var D=ot(),O=l($(D),4);be(O,{get payments(){return t(S)},onRequirePayment:M,onSubscribed:q});var G=l(O,2);{var Q=o=>{var d=nt(),k=n(d);k.__click=M;var U=n(k);X(U,"src",pe),ee(2),s(k),s(d),g(o,d)};Y(G,o=>{t(S).length>0&&o(Q)})}g(R,D)},F=R=>{var D=it(),O=$(D);be(O,{get payments(){return t(S)},onRequirePayment:M,onSubscribed:q});var G=l(O,2);{var Q=o=>{var d=rt(),k=n(d);k.__click=M;var U=n(k);X(U,"src",pe),ee(2),s(k),s(d),g(o,d)};Y(G,o=>{t(S).length>0&&o(Q)})}g(R,D)};Y(T,R=>{t(_)?R(N):R(F,!1)},y)}};Y(i,T=>{t(m)?T(p):T(z,!1)},c)}};Y(j,i=>{t(h)?i(x):i(A,!1)})}g(C,f),ie()}le(["click"]);export{Pt as component,kt as universal};
