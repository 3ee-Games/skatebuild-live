import{a as te}from"../chunks/DjSiL-jg.js";import{g as Z}from"../chunks/IxWn49b3.js";import{t as M,a as g,c as de,d as ie}from"../chunks/DRiVrBMz.js";import{ak as oe,am as i,an as n,ao as s,g as t,aQ as W,ar as K,al as re,aN as ae,v as a,aq as $,ap as ee,o as ue}from"../chunks/DGYefiCd.js";import{d as ne,s as J,e as he}from"../chunks/ByZ5mbbd.js";import{i as D}from"../chunks/CWD507PG.js";import{s as X,r as ye}from"../chunks/BVgT1Vhj.js";import{s as se}from"../chunks/BYCnfF3S.js";import{s as pe}from"../chunks/D-mBL8zO.js";import{p as G}from"../chunks/OZP53ftb.js";import{e as ge,i as be}from"../chunks/k-lROdaV.js";import{b as _e}from"../chunks/DEDQ5tvs.js";import{o as we}from"../chunks/ezTx0NwI.js";import"../chunks/BLulYnNU.js";const ke=async({fetch:_})=>{let e=null,r;const{token:j}=Z(te)||{};if(!j)return{subscription:e,paymentResponse:{success:!1}};const w=await(await _("https://3ee.dev/account/get-stripe-user-subscription/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Token "+j},mode:"cors"})).json();return e=w&&Object.keys(w).length>0?w:null,r=await(await _("https://3ee.dev/account/payments/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Token "+j},mode:"cors"})).json(),{subscription:e,paymentResponse:r}},_t=Object.freeze(Object.defineProperty({__proto__:null,load:ke},Symbol.toStringTag,{value:"Module"})),xe="data:image/svg+xml,%3csvg%20style='height:%20512px;%20width:%20512px;'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M0%200h512v512H0z'%20fill='%23d6e010'%20fill-opacity='0'%3e%3c/path%3e%3cg%20class=''%20style=''%20transform='translate(0,0)'%3e%3cpath%20d='M256%2016C123.45%2016%2016%20123.45%2016%20256s107.45%20240%20240%20240%20240-107.45%20240-240S388.55%2016%20256%2016zm0%2060c99.41%200%20180%2080.59%20180%20180s-80.59%20180-180%20180S76%20355.41%2076%20256%20156.59%2076%20256%2076zm-80.625%2060c-.97-.005-2.006.112-3.063.313v-.032c-18.297%203.436-45.264%2034.743-33.375%2046.626l73.157%2073.125-73.156%2073.126c-14.63%2014.625%2029.275%2058.534%2043.906%2043.906L256%20299.906l73.156%2073.156c14.63%2014.628%2058.537-29.28%2043.906-43.906l-73.156-73.125%2073.156-73.124c14.63-14.625-29.275-58.5-43.906-43.875L256%20212.157l-73.156-73.125c-2.06-2.046-4.56-3.015-7.47-3.03z'%20fill='%23ffffff'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e",le="data:image/svg+xml,%3csvg%20style='height:%20512px;%20width:%20512px;'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M0%200h512v512H0z'%20fill='%23d6e010'%20fill-opacity='0'%3e%3c/path%3e%3cg%20class=''%20style=''%20transform='translate(0,0)'%3e%3cpath%20d='M247%2025.076%20107.053%20130.004l64.996%2032.486L247%20106.297v-81.22zm18%200v81.22l74.95%2056.194%2065-32.488L265%2025.076zm9.277%2022.307%2036.63%2026.437c-25.125-4.207-29.74%209.2-37.348%2028.8l.717-55.237zm-37.79%203.926-.274%2033.362c-22.052%201.182-56.787%2014.423-107.893%2043.99L236.488%2051.31zM256%20122.044l-74%2055.48v156.948l74%2055.482%2074-55.482V177.527l-74-55.482zm4.215%2017.67c-37.503%2033.84-60.642%20164.833-63.65%20199.094l-.35-151.095%2064-48zM99%20146.1v219.8l65-32.488V178.588L99%20146.1zm314%200-65%2032.488v154.824l65%2032.488V146.1zm-301.352%2023.31%2040.473%2020.83c-46.28%2038.757-30.79%20122.693-41.876%20162.572l1.404-183.402zm60.4%20180.1-64.995%2032.486L247%20486.924v-81.22l-74.95-56.194zm167.903%200L265%20405.703v81.22l139.947-104.927-64.996-32.486zm-169.415%2017.172c-19.594%2016.282-16.745%2024.365%204.477%2054.412l-44.246-38.018%2039.77-16.394z'%20fill='%23ffffff'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e";var Pe=(_,e,r)=>e(r),Se=(_,e,r)=>e(r),ze=M('<p class="error svelte-j6itnc"> </p>'),Ce=M(`<div class="marketing-plans svelte-j6itnc"><h2>Support SkateBuild</h2> <p>SkateBuild is just getting started—and we need your help to keep the servers running and improve
		features. Early supporters will be immortalized with a limited “Early Supporter” badge on their
		profile. Your contribution helps cover hosting costs and shows you're part of our founding
		community.</p> <h3>Choose Your Support Level</h3> <div class="build-grid svelte-j6itnc"><div class="card svelte-j6itnc"><div class="card-content svelte-j6itnc"><h3 class="svelte-j6itnc">Monthly</h3> <p class="priceText">$2.00 per month</p> <button class="svelte-j6itnc"><span> </span></button></div></div> <div class="card svelte-j6itnc"><div class="card-content svelte-j6itnc"><h3 class="svelte-j6itnc">Yearly</h3> <p class="priceText">$12.00 per year</p> <button class="svelte-j6itnc"><span> </span></button></div></div></div> <!></div>`);function ve(_,e){oe(e,!0);let r=G(e,"payments",19,()=>[]),j=G(e,"onRequirePayment",3,()=>{}),Y=G(e,"onSubscribed",3,()=>{});const w="price_1RW5SMERvP25GWwRdcl3huBf",u="price_1RW5UxERvP25GWwRvIfpesTp";let p=ae(()=>r().length>0?r()[0].id:null),k=W(!1),x=W("");async function S(A){if(!t(p)){j()();return}a(k,!0),a(x,"");const{token:C}=Z(te)||{};if(!C){a(x,"Not authenticated."),a(k,!1);return}const z=r().find(Q=>Q.id===t(p));if(!z||!z.customer){j()(),a(k,!1);return}const I=z.customer;try{const T=await(await fetch("https://3ee.dev/account/subscribe/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${C}`},mode:"cors",body:JSON.stringify({customer_id:I,payment_method_id:t(p),price_id:A,modifySubscription:!1})})).json();if(T.success){Y()();const L=Z(se),o=await fetch("https://3ee.dev/skatebuild/api/profiles/save/",{method:"POST",headers:{Accept:"application/json","Access-Control-Allow-Origin":"https://skatebuild.pro","Content-Type":"application/json",Authorization:`Token ${C}`},mode:"cors",body:JSON.stringify(L)}),d=await o.json();o.ok?se.set(d):console.error("Profile save failed:",d.detail||"Unknown error")}else a(x,T.message||"Subscription failed.",!0)}catch(Q){console.error("Error subscribing:",Q),a(x,"Unable to subscribe at this time.")}a(k,!1)}var U=Ce(),F=i(n(U),6),y=n(F),R=n(y),E=i(n(R),4);E.__click=[Pe,S,w];var V=n(E),f=n(V,!0);s(V),s(E),s(R),s(y);var v=i(y,2),b=n(v),h=i(n(b),4);h.__click=[Se,S,u];var H=n(h),l=n(H,!0);s(H),s(h),s(b),s(v),s(F);var c=i(F,2);{var m=A=>{var C=ze(),z=n(C,!0);s(C),K(()=>J(z,t(x))),g(A,C)};D(c,A=>{t(x)&&A(m)})}s(U),K(()=>{pe(y,`opacity: ${t(k)?.5:1}`),E.disabled=t(k),J(f,t(k)?"Processing…":"Subscribe"),pe(v,`opacity: ${t(k)?.5:1}`),h.disabled=t(k),J(l,t(k)?"Processing…":"Subscribe")}),g(_,U),re()}ne(["click"]);const me="data:image/svg+xml,%3csvg%20style='height:%20512px;%20width:%20512px;'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M0%200h512v512H0z'%20fill='%23d6e010'%20fill-opacity='0'%3e%3c/path%3e%3cg%20class=''%20style=''%20transform='translate(0,0)'%3e%3cpath%20d='M235.344%2031.188c-35.92.543-70.472%206.628-102.97%2018l5.72%2017.468c30.61-10.843%2063.185-16.653%2097.187-17.156l.064-18.313zm18.687.187-.06%2018.375c46.9%201.963%2096.236%2013.842%20146.56%2036.47l9.376-16.25C356.84%2045.9%20304.253%2033.282%20254.03%2031.374zm-139.093%2024.5c-20.133%208.42-39.376%2018.953-57.562%2031.5l8.813%2016.53c17.207-12.117%2035.41-22.284%2054.468-30.436l-5.72-17.595zm312.97%2020.25-61.5%20106.53%2055.124%2031.814%2061.5-106.532-55.124-31.813zm-174.063%206.313-.03%2018.406c39.736%201.29%2080.36%2011.3%20120.342%2031.062l9.375-16.22c-42.846-21.33-86.708-32.012-129.686-33.25zm-18.688.062c-29.644%201.034-58.722%206.555-86.625%2016.156l5.72%2017.53c26.066-9.063%2053.198-14.28%2080.875-15.28l.03-18.406zM42.126%2098.53a335.26%20335.26%200%200%200-23.876%2020.5l9.97%2016.345a322.214%20322.214%200%200%201%2022.874-20.125l-8.938-16.72h-.03zm88.905%206.72c-17.292%207.142-34.04%2015.886-50.124%2026.125l8.813%2016.5c15.13-9.78%2030.847-18.16%2047.06-25l-5.75-17.625zm122.626%2035.28-.062%2018.44c30.17%201.18%2061.405%207.815%2093.156%2020.405l9.438-16.344c-34.7-14.046-69.15-21.353-102.532-22.5zm-18.687.032c-23.744.82-46.85%204.73-69%2011.563l5.718%2017.5c20.297-6.28%2041.433-9.915%2063.218-10.688l.063-18.375zm-169.626%201.375a349.067%20349.067%200%200%200-22.406%2017.5l9.874%2016.157a337.1%20337.1%200%200%201%2021.407-17.063l-8.876-16.593zm82.97%2016.344c-14.515%205.62-28.545%2012.503-42.033%2020.595l8.782%2016.406c12.534-7.633%2025.55-14.124%2039-19.436l-5.75-17.563zM90.53%20189.03a295.09%20295.09%200%200%200-20.155%2015.314l9.844%2016.125a282.991%20282.991%200%200%201%2019.155-14.876L90.53%20189.03zm279.19%2017.126L292.28%20340.25a135.268%20135.268%200%200%201%2031.94%2013.563l75.31-130.47-29.81-17.187zm-114.033%20147.78c-60.607.002-110.206%2045.816-116.406%20104.752h82.126a35.826%2035.826%200%200%201-3.437-15.344c0-19.872%2016.315-36.156%2036.186-36.156%2019.872%200%2036.188%2016.284%2036.188%2036.156%200%205.475-1.23%2010.674-3.438%2015.344h85.188c-6.2-58.936-55.8-104.75-116.406-104.75zm-1.53%2071.94c-9.773%200-17.5%207.696-17.5%2017.468%200%206.678%203.626%2012.39%209.03%2015.344h16.938c5.404-2.955%209.03-8.666%209.03-15.344%200-9.772-7.727-17.47-17.5-17.47zm-153.47%2051.5v15.687h303.344v-15.688H100.69z'%20fill='%23ffffff'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e",fe="data:image/svg+xml,%3csvg%20style='height:%20512px;%20width:%20512px;'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M0%200h512v512H0z'%20fill='%23d6e010'%20fill-opacity='0'%3e%3c/path%3e%3cg%20class=''%20style=''%20transform='translate(0,0)'%3e%3cpath%20d='M256%2027.845c-21.563%200-48.67%201.224-69.041%209.357C166.589%2045.336%20153%2058.047%20153%2086.845v51.847a125.34%20125.34%200%200%201%2019.988-1.732c3.353-.02%206.693.103%2010.012.355v-38.47c0-16%2011.186-28.155%2024.975-35.05%2013.788-6.893%2030.9-9.95%2048.025-9.95s34.237%203.057%2048.025%209.95C317.815%2070.69%20329%2082.846%20329%2098.846v38.478a124.58%20124.58%200%200%201%2030%201.377V86.845c0-28.798-13.589-41.51-33.959-49.643-20.37-8.133-47.478-9.357-69.041-9.357zm-83.12%20127.093a107.73%20107.73%200%200%200-22.886%202.682C109.396%20166.847%2073%20198.594%2073%20258.845c0%2043%2037.72%2089.974%2081.213%20131.49%2021.747%2020.758%2044.64%2040.173%2064.25%2057.52%2015.099%2013.356%2028.124%2025.257%2037.537%2036.3%209.413-11.043%2022.438-22.944%2037.537-36.3%2019.61-17.347%2042.503-36.762%2064.25-57.52C401.28%20348.819%20439%20301.845%20439%20258.845c0-60.25-36.396-91.998-76.994-101.225-40.598-9.227-83.648%205.56-97.65%2040.567L256%20219.075l-8.355-20.888c-11.377-28.443-41.931-43.537-74.764-43.249zM256%20234.845a44.488%2044.488%200%200%201%2044.488%2044.488A44.488%2044.488%200%200%201%20284%20313.876l16.488%2098.922h-88.976l16.49-98.936a44.488%2044.488%200%200%201-16.49-34.529A44.488%2044.488%200%200%201%20256%20234.845z'%20fill='%23ffffff'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e";var je=(_,e)=>e("yearly"),Ae=M('<button class="svelte-1xosnok"><img alt="Switch subscription" class="svelte-1xosnok"> <span class="svelte-1xosnok"> </span></button> <button disabled class="svelte-1xosnok"><img alt="Current Subscription" class="svelte-1xosnok"> <span class="svelte-1xosnok">Monthly (current)</span></button>',1),Te=(_,e)=>e("monthly"),Me=M('<button disabled class="svelte-1xosnok"><img alt="Current Subscription" class="svelte-1xosnok"> <span class="svelte-1xosnok">Yearly (current)</span></button> <button class="svelte-1xosnok"><img alt="Switch subscription" class="svelte-1xosnok"> <span class="svelte-1xosnok"> </span></button>',1),Re=M('<p class="error svelte-1xosnok"> </p>'),Ee=M('<div class="current-subscription svelte-1xosnok"><h2>Your Subscription</h2> <p><strong>Plan:</strong> </p> <p><strong>Start:</strong> <!> - <strong>Ends:</strong> <!></p> <p><strong>Status:</strong> </p> <div class="switch-options svelte-1xosnok"><!></div> <!></div>');function Oe(_,e){oe(e,!0);let r=G(e,"onSubscriptionChange",3,()=>{});const j="price_1RW5SMERvP25GWwRdcl3huBf",Y="price_1RW5UxERvP25GWwRvIfpesTp";let w=ae(()=>e.subscription?e.subscription.price_id===j?"monthly":"yearly":"monthly"),u=W(!1),p=W("");async function k(y){if(!e.subscription||y===t(w))return;a(u,!0),a(p,"");const{token:R}=Z(te)||{};if(!R){a(p,"Not authenticated."),a(u,!1);return}let E;try{const h=await(await fetch("https://3ee.dev/account/payments/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${R}`},mode:"cors"})).json();if(!h.success||!Array.isArray(h.payments)||h.payments.length===0){a(p,"No payment methods available to switch plan."),a(u,!1);return}E=h.payments[0]}catch(b){console.error("Error fetching payments:",b),a(p,"Unable to retrieve payment methods."),a(u,!1);return}const V=E.customer,f=E.id,v=y==="monthly"?j:Y;try{const h=await(await fetch("https://3ee.dev/account/subscribe/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${R}`},mode:"cors",body:JSON.stringify({customer_id:V,payment_method_id:f,price_id:v,modifySubscription:!0})})).json();if(console.log("subPayload",h),h.success){r()();const H=Z(se),l=await fetch("https://3ee.dev/skatebuild/api/profiles/save/",{method:"POST",headers:{Accept:"application/json","Access-Control-Allow-Origin":"https://skatebuild.pro","Content-Type":"application/json",Authorization:`Token ${R}`},mode:"cors",body:JSON.stringify(H)}),c=await l.json();l.ok?se.set(c):console.error("Profile save failed:",c.detail||"Unknown error")}else a(p,h.message||"Unable to switch plan.",!0)}catch(b){console.error("Error modifying subscription:",b),a(p,"Failed to switch plan.")}a(u,!1)}var x=de(),S=$(x);{var U=y=>{var R=Ee(),E=i(n(R),2),V=i(n(E));s(E);var f=i(E,2),v=i(n(f),2);{var b=o=>{var d=ie();K(P=>J(d,P),[()=>new Date(e.subscription.current_period_start).toLocaleDateString()]),g(o,d)},h=o=>{var d=ie("N/A");g(o,d)};D(v,o=>{e.subscription.current_period_start?o(b):o(h,!1)})}var H=i(v,4);{var l=o=>{var d=ie();K(P=>J(d,P),[()=>new Date(e.subscription.current_period_end).toLocaleDateString()]),g(o,d)},c=o=>{var d=ie("N/A");g(o,d)};D(H,o=>{e.subscription.current_period_end?o(l):o(c,!1)})}s(f);var m=i(f,2),A=i(n(m));s(m);var C=i(m,2),z=n(C);{var I=o=>{var d=Ae(),P=$(d);P.__click=[je,k];var B=n(P);X(B,"src",me);var O=i(B,2),q=n(O,!0);s(O),s(P);var N=i(P,2),ce=n(N);X(ce,"src",fe),ee(2),s(N),K(()=>{P.disabled=t(u),J(q,t(u)?"Processing…":"Switch to Yearly")}),g(o,d)},Q=o=>{var d=Me(),P=$(d),B=n(P);X(B,"src",fe),ee(2),s(P);var O=i(P,2);O.__click=[Te,k];var q=n(O);X(q,"src",me);var N=i(q,2),ce=n(N,!0);s(N),s(O),K(()=>{O.disabled=t(u),J(ce,t(u)?"Processing…":"Switch to Monthly")}),g(o,d)};D(z,o=>{t(w)==="monthly"?o(I):o(Q,!1)})}s(C);var T=i(C,2);{var L=o=>{var d=Re(),P=n(d,!0);s(d),K(()=>J(P,t(p))),g(o,d)};D(T,o=>{t(p)&&o(L)})}s(R),K(()=>{J(V,` ${t(w)==="monthly"?"Monthly":"Yearly"}`),J(A,` ${e.subscription.status??""}`)}),g(y,R)},F=y=>{};D(S,y=>{e.subscription?y(U):y(F,!1)})}g(_,x),re()}ne(["click"]);function Ie(_,e){e()()}var Le=M('<p style="color: #e53e3e; margin-top: 0.5rem;"> </p>'),Be=M('<button type="button" class="cancel-button svelte-wz1uxj"><span>Cancel</span></button>'),Ne=M('<form class="svelte-wz1uxj"><label for="zip" class="svelte-wz1uxj">Postal Code</label> <input id="zip" type="text" placeholder="ZIP or postal code" required class="svelte-wz1uxj"> <label for="card-element" class="svelte-wz1uxj">Card Details</label> <div id="card-element" style="padding: 0.75rem; border: 1px solid #cbd5e0; border-radius: 0.375rem;"></div> <!> <div style="margin-top: 1rem; display: flex; gap: 0.5rem;"><button type="submit" class="svelte-wz1uxj"><span> </span></button> <!></div></form>');function De(_,e){oe(e,!0);let r=G(e,"editing",3,!1);G(e,"customerId",3,null);let j=G(e,"onPaymentAdded",3,c=>{}),Y=G(e,"onPaymentAddCancel",3,()=>{});const w="pk_test_51MCQ24ERvP25GWwRjbby9IQv3z4FEh2qpjjK1DTjZNApqTvf5bQNE98VJnT2SjkpLEgJMEroKnSWdpdeCESQFbgZ00qkgzBBCh";let u=null,p=null,k=null,x=W(""),S=W(""),U=W(!1);we(()=>{if(!window.Stripe){a(S,"Stripe.js failed to load.");return}u=Stripe(w),p=u.elements();const c={base:{iconColor:"rgb(56, 153, 237)",color:"#fff",fontWeight:"500",fontFamily:"Roboto, Open Sans, Segoe UI, sans-serif",fontSize:"18px",fontSmoothing:"antialiased",":-webkit-autofill":{color:"#fce883"},"::placeholder":{color:"rgb(255, 122, 32)"}},invalid:{iconColor:"#fff",color:"rgb(250, 44, 202)"}};k=p.create("card",{style:c,hidePostalCode:!0}),k.mount("#card-element"),k.on("change",m=>{m.error?a(S,m.error.message||"",!0):a(S,"")})});async function F(c){if(c.preventDefault(),!u||!p||!k){a(S,"Stripe.js has not been initialized.");return}a(U,!0),a(S,"");const{error:m,paymentMethod:A}=await u.createPaymentMethod({type:"card",card:k,billing_details:{address:{postal_code:t(x)||void 0}}});if(m){a(S,m.message||"PaymentMethod creation failed.",!0),a(U,!1);return}if(!A||!A.id){a(S,"Unable to retrieve PaymentMethod ID."),a(U,!1);return}j()({payment_method_id:A.id,editing:r()})}var y=Ne(),R=i(n(y),2);ye(R);var E=i(R,6);{var V=c=>{var m=Le(),A=n(m,!0);s(m),K(()=>J(A,t(S))),g(c,m)};D(E,c=>{t(S)&&c(V)})}var f=i(E,2),v=n(f),b=n(v),h=n(b,!0);s(b),s(v);var H=i(v,2);{var l=c=>{var m=Be();m.__click=[Ie,Y],g(c,m)};D(H,c=>{r()&&c(l)})}s(f),s(y),K(()=>{v.disabled=t(U),J(h,t(U)?"Processing…":r()?"Update Card":"Add Card")}),he("submit",y,F),_e(R,()=>t(x),c=>a(x,c)),g(_,y),re()}ne(["click"]);const Ye="data:image/svg+xml,%3csvg%20style='height:%20512px;%20width:%20512px;'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M0%200h512v512H0z'%20fill='%23d6e010'%20fill-opacity='0'%3e%3c/path%3e%3cg%20class=''%20style=''%20transform='translate(0,0)'%3e%3cpath%20d='m208.242%2024.629-52.058%2095.205%2095.207%2052.059%2017.271-31.586-42.424-23.198A143.26%20143.26%200%200%201%20256%20114c78.638%200%20142%2063.362%20142%20142s-63.362%20142-142%20142-142-63.362-142-142c0-16.46%202.785-32.247%207.896-46.928l-32.32-16.16C82.106%20212.535%2078%20233.798%2078%20256c0%2098.093%2079.907%20178%20178%20178s178-79.907%20178-178S354.093%2078%20256%2078c-13.103%200-25.875%201.44-38.18%204.148l22.008-40.25-31.586-17.27zm104.27%20130.379L247%20253.275V368h18V258.725l62.488-93.733-14.976-9.984z'%20fill='%23ffffff'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e",Ue="data:image/svg+xml,%3csvg%20style='height:%20512px;%20width:%20512px;'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M0%200h512v512H0z'%20fill='%23d6e010'%20fill-opacity='0'%3e%3c/path%3e%3cg%20class=''%20style=''%20transform='translate(0,0)'%3e%3cpath%20d='m256%2029.816-231%20154v106.368l231-154%20231%20154V183.816zm0%20128.043L105%20259.783v90.283l151-101.925%20151%20101.925v-90.283zm0%20112-87%2058.725v67.6l87-58%2087%2058v-67.6zm0%2089.957-87%2058v64.368l87-58%2087%2058v-64.368z'%20fill='%23ffffff'%20fill-opacity='1'%3e%3c/path%3e%3c/g%3e%3c/svg%3e";function He(_,e,r,j){a(e,!1),a(r,null),a(j,!0)}var We=(_,e,r)=>e(t(r)),qe=(_,e,r)=>e(t(r).id),Ge=M('<li class="svelte-ucowlg"><p class="cardTitle svelte-ucowlg"><strong> </strong></p> <button class="svelte-ucowlg"><span class="svelte-ucowlg">Edit</span></button> <button class="cancelBtn svelte-ucowlg"><span class="svelte-ucowlg">Delete</span></button></li>'),Fe=M('<ul class="svelte-ucowlg"></ul>'),Je=M("<p>No cards on file.</p>"),Ve=M('<div class="payment-list svelte-ucowlg"><h2>Your Cards</h2> <!> <div class="button-actions svelte-ucowlg"><button class="svelte-ucowlg"><img alt="Go back to main menu icon" class="svelte-ucowlg"> <span>Add New Card</span></button> <button class="cancelBtn svelte-ucowlg"><img alt="Go back to main menu icon" class="svelte-ucowlg"> <span>Back</span></button></div></div>');function Qe(_,e){oe(e,!0),G(e,"editing",3,!1);let r=G(e,"payments",19,()=>[]),j=G(e,"onPaymentAdded",3,()=>{}),Y=G(e,"onPaymentAddCancel",3,()=>{}),w=W(!1),u=W(!1),p=W(null);async function k(f){const{token:v}=Z(te)||{};if(v)try{const h=await(await fetch("https://3ee.dev/account/payment-delete/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${v}`},mode:"cors",body:JSON.stringify({payment_method_id:f})})).json();h.success?j()():alert(`Error deleting card: ${h.message}`)}catch(b){console.error("Network or server error when deleting payment:",b),alert("Unable to delete card at this time.")}}function x(f){a(u,!0),a(p,f,!0),a(w,!0)}function S(f){const{payment_method_id:v,editing:b}=f;U(v,b)}async function U(f,v){const{token:b}=Z(te)||{};if(!b)return;let h,H;v&&t(p)?(h="https://3ee.dev/account/payment-update/",H={customer_id:t(p).customer,old_payment_method_id:t(p).id,new_payment_method_id:f}):(h="https://3ee.dev/account/create-customer/",H={payment_method_id:f});try{const c=await(await fetch(h,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${b}`},mode:"cors",body:JSON.stringify(H)})).json();c.success?(a(w,!1),j()()):alert(`Error: ${c.message}`)}catch(l){console.error("Network or server error when submitting payment:",l),alert("Unable to save payment at this time.")}}function F(){a(w,!1),Y()()}var y=de(),R=$(y);{var E=f=>{var v=Ve(),b=i(n(v),2);{var h=z=>{var I=Fe();ge(I,21,r,be,(Q,T)=>{var L=Ge(),o=n(L),d=n(o),P=n(d);s(d),s(o);var B=i(o,2);B.__click=[We,x,T];var O=i(B,2);O.__click=[qe,k,T],s(L),K(()=>J(P,`${t(T).card.last4??""} (Exp ${t(T).card.exp_month??""}/${t(T).card.exp_year??""})`)),g(Q,L)}),s(I),g(z,I)},H=z=>{var I=Je();g(z,I)};D(b,z=>{Array.isArray(r())&&r().length>0?z(h):z(H,!1)})}var l=i(b,2),c=n(l);c.__click=[He,u,p,w];var m=n(c);X(m,"src",Ue),ee(2),s(c);var A=i(c,2);A.__click=function(...z){var I;(I=Y())==null||I.apply(this,z)};var C=n(A);X(C,"src",Ye),ee(2),s(A),s(l),s(v),g(f,v)},V=f=>{const v=ae(()=>t(u)?t(p).customer:null);De(f,{get editing(){return t(u)},get customerId(){return t(v)},onPaymentAdded:S,onPaymentAddCancel:F})};D(R,f=>{t(w)?f(V,!1):f(E)})}g(_,y),re()}ne(["click"]);var Ke=M('<div class="success-message svelte-epyl68"><h2 class="svelte-epyl68">Thanks for supporting SkateBuild</h2> <p class="svelte-epyl68">Your subscription is now active!</p></div>');function Ze(_){var e=Ke();g(_,e)}var Xe=M('<div class="overlay svelte-b4mu14"><div class="dialog svelte-b4mu14"><p class="svelte-b4mu14">Are you sure you want to cancel your subscription?</p> <div class="buttons svelte-b4mu14"><button class="svelte-b4mu14"><span>No, Go Back</span></button> <button class="cancelBtn svelte-b4mu14"><span>Yes, Cancel</span></button></div></div></div>');function $e(_,e){let r=G(e,"onConfirm",3,()=>{}),j=G(e,"onCancel",3,()=>{});var Y=Xe(),w=n(Y),u=i(n(w),2),p=n(u);p.__click=function(...x){var S;(S=j())==null||S.apply(this,x)};var k=i(p,2);k.__click=function(...x){var S;(S=r())==null||S.apply(this,x)},s(u),s(w),s(Y),g(_,Y)}ne(["click"]);function et(_,e){a(e,!0)}var tt=M('<!> <!> <div class="subscription-actions svelte-ieuxp6"><button class="svelte-ieuxp6"><img alt="Manage payments icon" class="svelte-ieuxp6"> <span>Payment Methods</span></button> <button class="cancelBtn svelte-ieuxp6"><img alt="Cancel icon" class="svelte-ieuxp6"> <span>Cancel Subscription</span></button></div> <!>',1),at=M('<div class="subscription-actions svelte-ieuxp6"><button class="svelte-ieuxp6"><img alt="Manage payments icon" class="svelte-ieuxp6"> <span>Payment Methods</span></button></div>'),st=M(`<h2>Your subscription is canceled</h2> <p>You previously subscribed to SkateBuild but your subscription is no longer active. To
		reactivate, please pick a plan below:</p> <!> <!>`,1),nt=M('<div class="subscription-actions svelte-ieuxp6"><button class="svelte-ieuxp6"><img alt="Manage payments icon" class="svelte-ieuxp6"> <span>Payment Methods</span></button></div>'),ot=M("<!> <!>",1);function wt(_,e){oe(e,!0);let r=W(ue(e.data.subscription)),j=W(ue(e.data.paymentResponse||{success:!1})),Y=W(!1),w=W(!1),u=W(!1),p=ae(()=>t(r)&&t(r).status==="active"),k=ae(()=>t(r)&&t(r).status==="canceled"),x=ae(()=>t(j).payments??[]);async function S(){const{token:l}=Z(te)||{};if(l)try{const c=await fetch("https://3ee.dev/account/payments/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${l}`},mode:"cors"});a(j,await c.json(),!0)}catch{a(j,{success:!1},!0)}}async function U(){const{token:l}=Z(te)||{};if(l)try{const m=await(await fetch("https://3ee.dev/account/get-stripe-user-subscription/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Token ${l}`},mode:"cors"})).json();a(r,m&&Object.keys(m).length>0?m:null,!0)}catch{a(r,null)}}function F(){a(Y,!0),U()}function y(){a(w,!0)}function R(){a(w,!1),S()}function E(){a(w,!1)}async function V(){if(a(u,!1),!t(p))return;const{token:l}=Z(te)||{};if(l)try{const m=await(await fetch("https://3ee.dev/account/subscribe-cancel/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${l}`},mode:"cors"})).json();if(m.success){U();const A=Z(se),C=await fetch("https://3ee.dev/skatebuild/api/profiles/save/",{method:"POST",headers:{Accept:"application/json","Access-Control-Allow-Origin":"https://skatebuild.pro","Content-Type":"application/json",Authorization:`Token ${l}`},mode:"cors",body:JSON.stringify(A)}),z=await C.json();C.ok?se.set(z):console.error("Profile save failed:",z.detail||"Unknown error")}else alert(m.message||"Unable to cancel subscription.")}catch{alert("Failed to cancel subscription.")}}function f(){a(u,!1)}var v=de(),b=$(v);{var h=l=>{Qe(l,{editing:!1,get payments(){return t(x)},onPaymentAdded:R,onPaymentAddCancel:E})},H=(l,c)=>{{var m=C=>{var z=tt(),I=$(z);{var Q=N=>{Ze(N)};D(I,N=>{t(Y)&&N(Q)})}var T=i(I,2);Oe(T,{get subscription(){return t(r)},onSubscriptionChange:F});var L=i(T,2),o=n(L);o.__click=y;var d=n(o);X(d,"src",le),ee(2),s(o);var P=i(o,2);P.__click=[et,u];var B=n(P);X(B,"src",xe),ee(2),s(P),s(L);var O=i(L,2);{var q=N=>{$e(N,{onConfirm:V,onCancel:f})};D(O,N=>{t(u)&&N(q)})}g(C,z)},A=(C,z)=>{{var I=T=>{var L=st(),o=i($(L),4);ve(o,{get payments(){return t(x)},onRequirePayment:y,onSubscribed:F});var d=i(o,2);{var P=B=>{var O=at(),q=n(O);q.__click=y;var N=n(q);X(N,"src",le),ee(2),s(q),s(O),g(B,O)};D(d,B=>{t(x).length>0&&B(P)})}g(T,L)},Q=T=>{var L=ot(),o=$(L);ve(o,{get payments(){return t(x)},onRequirePayment:y,onSubscribed:F});var d=i(o,2);{var P=B=>{var O=nt(),q=n(O);q.__click=y;var N=n(q);X(N,"src",le),ee(2),s(q),s(O),g(B,O)};D(d,B=>{t(x).length>0&&B(P)})}g(T,L)};D(C,T=>{t(k)?T(I):T(Q,!1)},z)}};D(l,C=>{t(p)?C(m):C(A,!1)},c)}};D(b,l=>{t(w)?l(h):l(H,!1)})}g(_,v),re()}ne(["click"]);export{wt as component,_t as universal};
