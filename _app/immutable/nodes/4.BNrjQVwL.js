import{e as We}from"../chunks/BztOBSmR.js";import{g as He}from"../chunks/CjpI74KA.js";import{s as fe}from"../chunks/D7-f-tgC.js";import{t as b,b as _}from"../chunks/DfXK_jSs.js";import"../chunks/DBxjm7Y_.js";import{ak as $e,ar as N,al as we,an as r,ao as l,am as n,aw as ye,g as a,at as H,au as Je,A as q,v as A,j as Ke,ap as ke,n as he}from"../chunks/CWOhmV2c.js";import{e as J,s as v}from"../chunks/CwUoD2Kj.js";import{i as O}from"../chunks/DLKYxPPN.js";import{e as ie,i as ue}from"../chunks/CMljKicW.js";import{r as je,s as p,b as Le}from"../chunks/C32hVi81.js";import{s as Qe}from"../chunks/Bde2N4K0.js";import{s as Xe}from"../chunks/BUPfp6wp.js";import{i as xe}from"../chunks/BtpCMNU_.js";import{p as T}from"../chunks/BuPKHJej.js";import{s as Ye,a as Ze}from"../chunks/DB1vgmwF.js";import{a as Fe}from"../chunks/BqTHlUrR.js";import{g as es}from"../chunks/DiNgIYpQ.js";import{c as ss}from"../chunks/CAUEGmdr.js";import{s as ts,r as as}from"../chunks/DqAaAC6z.js";const ls=!1,rs=!1,os=async({params:o,fetch:u})=>{const{username:d,slug:f}=o;let m;const i=He(fe);if(i.slug===f&&i.owner_username===d)m={name:i.name,slug:i.slug,build_type:i.build_type,skating_type:i.skating_type,deck_slug:i.deck_slug||void 0,griptape_slug:i.griptape_slug||void 0,rails_slug:i.rails_slug||void 0,risers_slug:i.risers_slug||void 0,boot_slug:i.boot_slug||void 0,plates_slug:i.plates_slug||void 0,slideblock_slug:i.slideblock_slug||void 0,toestops_slug:i.toestops_slug||void 0,trucks_slug:i.trucks_slug,bearings_slug:i.bearings_slug,wheels_slug:i.wheels_slug,bushings_slug:i.bushings_slug,owner_username:i.owner_username,attributes:i.attributes??[]};else{const e=await u(`/data/builds/${d}/${f}.json`);if(e.ok){const y=await e.json();m={...y,attributes:y.attributes??[]}}else throw We(404,`Build not found: ${d}/${f}`)}const w=is(m,u),x=await Promise.all(Object.entries(w).filter(([,e])=>e!==null).map(async([e,y])=>{const k=await y;return k.ok?[e,await k.json()]:[e,null]})),V=Object.fromEntries(x);return{build:m,products:V}};function is(o,u){const d=o.build_type==="skateboard"?"skateboard-products":"rollerskate-products",f={bearings:u(`/data/${d}/bearings/${o.bearings_slug}.json`),bushings:u(`/data/${d}/bushings/${o.bushings_slug}.json`),trucks:u(`/data/${d}/trucks/${o.trucks_slug}.json`),wheels:u(`/data/${d}/wheels/${o.wheels_slug}.json`)},m={decks:o.deck_slug?u(`/data/${d}/decks/${o.deck_slug}.json`):null,griptape:o.griptape_slug?u(`/data/${d}/griptape/${o.griptape_slug}.json`):null,rails:o.rails_slug?u(`/data/${d}/rails/${o.rails_slug}.json`):null,risers:o.risers_slug?u(`/data/${d}/risers/${o.risers_slug}.json`):null},i={boots:o.boot_slug?u(`/data/${d}/boots/${o.boot_slug}.json`):null,slideblocks:o.slideblock_slug?u(`/data/${d}/slideblocks/${o.slideblock_slug}.json`):null,plates:o.plates_slug?u(`/data/${d}/plates/${o.plates_slug}.json`):null,toestops:o.toestops_slug?u(`/data/${d}/toestops/${o.toestops_slug}.json`):null};return{...f,...o.build_type==="skateboard"?m:i}}const Gs=Object.freeze(Object.defineProperty({__proto__:null,load:os,prerender:ls,ssr:rs},Symbol.toStringTag,{value:"Module"}));var us=b('<p class="svelte-11fic08"> </p>'),ns=b('<div class="option-container svelte-11fic08"><article class="main svelte-11fic08"><h4 class="highlight large svelte-11fic08"> </h4> <!></article> <aside class="aside aside-1 svelte-11fic08"><input type="checkbox" class="svelte-11fic08"> <label class="svelte-11fic08"> </label></aside></div>');function cs(o,u){$e(u,!1);let d=T(u,"id",8,""),f=T(u,"name",8,""),m=T(u,"label",8,""),i=T(u,"description",8,""),w=T(u,"checked",12,!1),x=T(u,"onChange",8,()=>{});function V(j){x()({id:j.target.id,checked:j.target.checked})}xe();var e=ns(),y=r(e),k=r(y),P=r(k,!0);l(k);var K=n(k,2);{var L=j=>{var E=us(),G=r(E,!0);l(E),N(()=>v(G,i())),_(j,E)};O(K,j=>{i()&&j(L)})}l(y);var D=n(y,2),B=r(D);je(B);var M=n(B,2),$=r(M,!0);l(M),l(D),l(e),N(()=>{v(P,m()),p(B,"id",d()),p(B,"name",f()),p(M,"for",d()),v($,m())}),ss(B,w),J("change",B,V),_(o,e),we()}var ds=b('<img alt="Skateboard build" class="build-icon svelte-8egy2o">'),gs=b('<img alt="Rollerskate build" class="build-icon svelte-8egy2o">'),_s=b('<div class="edit-container svelte-8egy2o"><button class="edit-button svelte-8egy2o">Edit Build</button></div>'),vs=b('<div class="edit-container svelte-8egy2o"><button class="edit-button svelte-8egy2o">Modify Build</button></div>'),ps=b('<div class="attribute-item svelte-8egy2o"><span class="attr-name svelte-8egy2o"> </span> <div class="attr-bar-container svelte-8egy2o"><div class="attr-bar svelte-8egy2o"></div></div></div>'),bs=b('<section class="attributes-section svelte-8egy2o"><h2 class="svelte-8egy2o">Stats</h2> <!></section>'),ms=b('<tr class="svelte-8egy2o"><td class="svelte-8egy2o"><input type="radio" class="svelte-8egy2o"></td><td data-label="Vendor" class="svelte-8egy2o"><a target="_blank" rel="noopener" class="svelte-8egy2o"> </a></td><td data-label="Price" class="svelte-8egy2o"> </td></tr>'),ys=b('<table class="price-table svelte-8egy2o"><thead class="svelte-8egy2o"><tr class="svelte-8egy2o"><th class="svelte-8egy2o">Select</th><th class="svelte-8egy2o">Vendor</th><th class="svelte-8egy2o">Price</th></tr></thead><tbody class="svelte-8egy2o"></tbody></table>'),ks=b('<section class="build-section svelte-8egy2o"><div class="section-inner svelte-8egy2o"><img> <div class="section-info svelte-8egy2o"><h2 class="svelte-8egy2o"> </h2> <p><a class="svelte-8egy2o"><strong> </strong></a> </p> <!></div></div></section>'),hs=b(`<section class="build-section svelte-8egy2o"><h2 class="svelte-8egy2o">Grand Total</h2> <p class="grand-total svelte-8egy2o"> </p> <p class="disclaimer svelte-8egy2o">Prices are an estimate. Check to make sure all parts are compatible and the correct size
				before purchasing.</p></section>`),fs=b('<div class="container svelte-8egy2o"><h1 class="svelte-8egy2o"><!> </h1> <p>Created by <a class="svelte-8egy2o"> </a></p> <!> <p>This build is designed for <strong><span class="highlight"> </span></strong>.</p> <!> <!> <!> <!></div>');function Is(o,u){$e(u,!1);const[d,f]=Ye(),m=()=>Ze(Fe,"$accountData",d),i=q(),w=q(),x=q(),V=q();let e=T(u,"data",8);const y=new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),k=e().build.attributes??[];let P=q(!1);function K({id:s,checked:t}){A(P,t)}function L(s){const t=Object.keys(s).find(c=>c!=="url"&&c!=="productVendorUrl");return{vendor:t,price:s[t],url:s.url,productVendorUrl:s.productVendorUrl}}function D(s){const t=s.split("-").pop().trim(),c=parseFloat(t.replace(/[^0-9.]/g,""));return isNaN(c)?0:Math.round(c*100)}const M=[{key:"decks",label:"Deck",slug:e().build.deck_slug},{key:"griptape",label:"griptape",slug:e().build.griptape_slug},{key:"boots",label:"Boots",slug:e().build.boot_slug},{key:"plates",label:"Plates",slug:e().build.plates_slug},{key:"trucks",label:"Trucks",slug:e().build.trucks_slug},{key:"slideblocks",label:"SlideBlocks",slug:e().build.slideblock_slug},{key:"wheels",label:"Wheels",slug:e().build.wheels_slug},{key:"bearings",label:"Bearings",slug:e().build.bearings_slug},{key:"toestops",label:"Toestops",slug:e().build.toestops_slug},{key:"rails",label:"rails",slug:e().build.rails_slug},{key:"risers",label:"risers",slug:e().build.risers_slug},{key:"bushings",label:"Bushings",slug:e().build.bushings_slug}].map(s=>{const t=e().products[s.key];if(!t||!s.slug)return null;const c=t.productPrices.map(L);return{key:s.key,label:s.label,slug:s.slug,productName:t.productName,productBrand:t.productBrand,cloudinaryUrl:t.cloudinaryUrl,vendorPrices:c}}).filter(Boolean),$=q({});M.forEach(s=>{s.vendorPrices.length&&ye($,a($)[s.key]=D(s.vendorPrices[0].price))});function j(s,t){ye($,a($)[s]=t)}function E(){fe.set({slug:e().build.slug,name:e().build.name,skater_type:[],build_type:e().build.build_type,skating_type:e().build.skating_type,stance:e().build.stance??"",deck_slug:e().build.deck_slug??"",griptape_slug:e().build.griptape_slug??"",risers_slug:e().build.risers_slug??"",boot_slug:e().build.boot_slug??"",toestops_slug:e().build.toestops_slug??"",slideblock_slug:e().build.slideblock_slug??"",rails_slug:e().build.rails_slug??"",plates_slug:e().build.plates_slug??"",trucks_slug:e().build.trucks_slug,bearings_slug:e().build.bearings_slug,wheels_slug:e().build.wheels_slug,bushings_slug:e().build.bushings_slug,attributes:k,owner_username:e().build.owner_username??""}),es("/builds/new")}H(()=>m(),()=>{var s;A(i,(s=m())==null?void 0:s.username)}),H(()=>Ke(e()),()=>{A(w,e().build.owner_username)}),H(()=>a($),()=>{A(x,Object.values(a($)).reduce((s,t)=>s+t,0))}),H(()=>a(x),()=>{A(V,`$${y.format(a(x)/100)}`)}),Je(),xe();var G=fs(),Q=r(G),ne=r(Q);{var Pe=s=>{var t=ds();p(t,"src",ts),_(s,t)},Be=(s,t)=>{{var c=h=>{var g=gs();p(g,"src",as),_(h,g)};O(s,h=>{e().build.build_type==="rollerskate"&&h(c)},t)}};O(ne,s=>{e().build.build_type==="skateboard"?s(Pe):s(Be,!1)})}var Se=n(ne);l(Q);var X=n(Q,2),Y=n(r(X)),Ue=r(Y,!0);l(Y),l(X);var ce=n(X,2);{var Ce=s=>{var t=_s(),c=r(t);l(t),J("click",c,E),_(s,t)},Oe=s=>{var t=vs(),c=r(t);l(t),J("click",c,E),_(s,t)};O(ce,s=>{a(i)===a(w)?s(Ce):s(Oe,!1)})}var Z=n(ce,2),de=n(r(Z)),ge=r(de),Te=r(ge,!0);l(ge),l(de),ke(),l(Z);var _e=n(Z,2);{var Ne=s=>{var t=bs(),c=n(r(t),2);ie(c,1,()=>k,ue,(h,g)=>{var S=ps(),U=r(S),F=r(U,!0);l(U);var z=n(U,2),C=r(z);l(z),l(S),N((R,ee)=>{p(S,"data-value",R),v(F,a(g).name),p(C,"data-color",a(g).value<=.3?"low":a(g).value<=.7?"medium":"high"),Xe(C,`width: ${ee??""}%;`)},[()=>`${Math.round(a(g).value*100)}%`,()=>Math.round(a(g).value*100)],he),_(h,S)}),l(t),_(s,t)};O(_e,s=>{k.length&&s(Ne)})}var ve=n(_e,2);cs(ve,{id:"toggle_prices",name:"toggle_prices",label:"Show Prices",description:"Compare prices.",onChange:K,get checked(){return a(P)},set checked(s){A(P,s)},$$legacy:!0});var pe=n(ve,2);ie(pe,1,()=>M,ue,(s,t)=>{var c=ks(),h=r(c),g=r(h),S=n(g,2),U=r(S),F=r(U,!0);l(U);var z=n(U,2),C=r(z),R=r(C),ee=r(R,!0);l(R),l(C);var Me=n(C);l(z);var Ee=n(z,2);{var ze=se=>{var te=ys(),be=n(r(te));ie(be,5,()=>a(t).vendorPrices,ue,(qe,I)=>{var ae=ms(),le=r(ae),W=r(le);je(W),l(le);var re=n(le),oe=r(re),Ae=r(oe,!0);l(oe),l(re);var me=n(re),Ge=r(me);l(me),l(ae),N((Ie,Re)=>{p(W,"name","selected_"+a(t).key),Le(W,Ie),p(oe,"href",a(I).productVendorUrl),v(Ae,a(I).vendor),v(Ge,`$${Re??""}`)},[()=>a($)[a(t).key]===D(a(I).price),()=>y.format(a(I).price)],he),J("change",W,()=>j(a(t).key,D(a(I).price))),_(qe,ae)}),l(be),l(te),_(se,te)};O(Ee,se=>{a(P)&&se(ze)})}l(S),l(h),l(c),N(()=>{p(g,"src",a(t).cloudinaryUrl),p(g,"alt",a(t).productName),Qe(g,1,`section-image ${a(t).key??""}`,"svelte-8egy2o"),v(F,a(t).label),p(C,"href",`/product/${a(t).key}/${a(t).slug}`),v(ee,a(t).productName),v(Me,`  by ${a(t).productBrand??""}`)}),_(s,c)});var Ve=n(pe,2);{var De=s=>{var t=hs(),c=n(r(t),2),h=r(c,!0);l(c),ke(2),l(t),N(()=>v(h,a(V))),_(s,t)};O(Ve,s=>{a(P)&&s(De)})}l(G),N(()=>{v(Se,` ${e().build.name??""}`),p(Y,"href",`/profiles/${a(w)}`),v(Ue,a(w)),v(Te,e().build.skating_type)}),_(o,G),we(),f()}export{Is as component,Gs as universal};
