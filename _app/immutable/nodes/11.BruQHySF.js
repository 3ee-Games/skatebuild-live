import{t as g,h as W,e as p}from"../chunks/D5sV2v-t.js";import"../chunks/D8N2IpKH.js";import{ao as Y,ar as G,ak as m,as as Q,ax as R,aw as o,au as r,g as u,n as j,av as a,ay as X}from"../chunks/KsHbyUNR.js";import{e as Z,s as v}from"../chunks/-k1GO34d.js";import{i as ee}from"../chunks/CtV-pIfB.js";import{e as te,i as se}from"../chunks/DoBij9eO.js";import{s as i}from"../chunks/BPQtVfJb.js";import{i as ae}from"../chunks/BAI0Ud4A.js";import{p as re}from"../chunks/DZQkes7P.js";import"../chunks/DgM7Pa5_.js";import{s as oe}from"../chunks/ZoJKLrrX.js";import{n as z}from"../chunks/BdRBcRuZ.js";import{L as ie}from"../chunks/BFLYwxZO.js";import{h as ne}from"../chunks/CPRV9u04.js";const ce=async({params:y,fetch:c})=>{const{category:n,slug:t}=y;console.log(n,t);const l=await c(`https://3ee.dev/skatebuild/api/products/${n}/${t}/`);if(!l.ok)throw new Error(`Product not found: ${n}/${t}`);return{product:await l.json()}},Be=Object.freeze(Object.defineProperty({__proto__:null,load:ce},Symbol.toStringTag,{value:"Module"}));var le=g('<meta name="description">'),de=g('<img class="product-image svelte-ncyxps">'),pe=g('<tr class="svelte-ncyxps"><td class="svelte-ncyxps"><a target="_blank" rel="noopener" class="svelte-ncyxps"> </a></td><td class="svelte-ncyxps"> </td></tr>'),me=g('<!> <main class="container svelte-ncyxps"><h1 class="svelte-ncyxps"> </h1> <p class="brand svelte-ncyxps"> </p> <!> <section class="prices svelte-ncyxps"><h2 class="svelte-ncyxps">Vendor Prices</h2> <table class="svelte-ncyxps"><thead class="svelte-ncyxps"><tr class="svelte-ncyxps"><th class="svelte-ncyxps">Vendor</th><th class="svelte-ncyxps">Price</th></tr></thead><tbody class="svelte-ncyxps"></tbody></table></section> <div class="add-to-build svelte-ncyxps"><button class="svelte-ncyxps"><img alt="Add to Build" class="svelte-ncyxps"> <span class="svelte-ncyxps">Add to build</span></button></div></main>',1);function Se(y,c){Y(c,!1);let n=re(c,"data",8);const{product:t}=n(),l={productName:t.name,productBrand:t.brand,productPrices:t.prices.map(e=>({[e.vendor.name]:e.price,url:e.product_url,productVendorUrl:e.product_url})),cloudinaryUrl:t.image_url,imageWidth:t.image_width,imageHeight:t.image_height},w=t.prices.map(e=>({"@type":"Offer",url:e.product_url,price:parseFloat(e.price).toFixed(2),priceCurrency:"USD",availability:"http://schema.org/InStock",seller:{"@type":"Organization",name:e.vendor.name}})).sort((e,s)=>parseFloat(e.price)-parseFloat(s.price)),C=new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),D=t.prices.map(e=>({vendor:e.vendor.name,price:parseFloat(e.price),url:e.product_url})).sort((e,s)=>e.price-s.price),L=t.name?`${t.name} | SkateBuild.pro`:"Build Your Skate",V={decks:"deck",griptape:"griptape",risers:"risers",rails:"rails",boots:"boot",toestops:"toestops",slideblocks:"slideblock",plates:"plates",trucks:"trucks",bearings:"bearings",wheels:"wheels",bushings:"bushings"};function A(){const e=V[t.type];if(!e){z.send({message:`Cannot add ${t.name} to build: unknown product type`,type:"error"});return}oe.update(s=>({...s,[`${e}_slug`]:t.slug,[`${e}_id`]:t.id,[`${e}_name`]:t.name})),z.send({message:`${t.name} added to build`,link:"/builds/new",linkText:"Preview Build"})}ae();var $=me();W(e=>{var s=le();R.title=L,m(()=>i(s,"content",`Customize your own ${t.name??""}`)),p(e,s)});var F=G($);const I=j(()=>({...l,offers:w}));ie(F,{get product(){return u(I)}});var P=o(F,2),h=r(P),M=r(h,!0);a(h);var _=o(h,2),N=r(_);a(_);var B=o(_,2);{var q=e=>{var s=de();m(()=>{i(s,"src",t.image_url),i(s,"alt",t.name),i(s,"width",t.image_width),i(s,"height",t.image_height)}),p(e,s)};ee(B,e=>{t.image_url&&e(q)})}var b=o(B,2),S=o(r(b),2),T=o(r(S));te(T,5,()=>D,se,(e,s)=>{var d=pe(),x=r(d),k=r(x),H=r(k,!0);a(k),a(x);var U=o(x),J=r(U);a(U),a(d),m(K=>{i(k,"href",u(s).url),v(H,u(s).vendor),v(J,`$${K??""}`)},[()=>C.format(u(s).price)],j),p(e,d)}),a(T),a(S),a(b);var O=o(b,2),f=r(O),E=r(f);i(E,"src",ne),X(2),a(f),a(O),a(P),m(()=>{v(M,t.name),v(N,`by ${t.brand??""}`)}),Z("click",f,A),p(y,$),Q()}export{Se as component,Be as universal};
